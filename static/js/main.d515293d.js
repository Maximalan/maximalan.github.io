/*! For license information please see main.d515293d.js.LICENSE.txt */
(()=>{"use strict";var e={7284:e=>{var t,a="object"===typeof Reflect?Reflect:null,n=a&&"function"===typeof a.apply?a.apply:function(e,t,a){return Function.prototype.apply.call(e,t,a)};t=a&&"function"===typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!==e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(a,n){function r(a){e.removeListener(t,s),n(a)}function s(){"function"===typeof e.removeListener&&e.removeListener("error",r),a([].slice.call(arguments))}p(e,t,s,{once:!0}),"error"!==t&&function(e,t,a){"function"===typeof e.on&&p(e,"error",t,a)}(e,r,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var i=10;function l(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function o(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function c(e,t,a,n){var r,s,i,c;if(l(a),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,a.listener?a.listener:a),s=e._events),i=s[t]),void 0===i)i=s[t]=a,++e._eventsCount;else if("function"===typeof i?i=s[t]=n?[a,i]:[i,a]:n?i.unshift(a):i.push(a),(r=o(e))>0&&i.length>r&&!i.warned){i.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=i.length,c=d,console&&console.warn&&console.warn(c)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,a){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:a},r=d.bind(n);return r.listener=a,n.wrapFn=r,r}function h(e,t,a){var n=e._events;if(void 0===n)return[];var r=n[t];return void 0===r?[]:"function"===typeof r?a?[r.listener||r]:[r]:a?function(e){for(var t=new Array(e.length),a=0;a<t.length;++a)t[a]=e[a].listener||e[a];return t}(r):g(r,r.length)}function m(e){var t=this._events;if(void 0!==t){var a=t[e];if("function"===typeof a)return 1;if(void 0!==a)return a.length}return 0}function g(e,t){for(var a=new Array(t),n=0;n<t;++n)a[n]=e[n];return a}function p(e,t,a,n){if("function"===typeof e.on)n.once?e.once(t,a):e.on(t,a);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(s){n.once&&e.removeEventListener(t,r),a(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!==typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return o(this)},s.prototype.emit=function(e){for(var t=[],a=1;a<arguments.length;a++)t.push(arguments[a]);var r="error"===e,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var l=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw l.context=i,l}var o=s[e];if(void 0===o)return!1;if("function"===typeof o)n(o,this,t);else{var c=o.length,d=g(o,c);for(a=0;a<c;++a)n(d[a],this,t)}return!0},s.prototype.addListener=function(e,t){return c(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return c(this,e,t,!0)},s.prototype.once=function(e,t){return l(t),this.on(e,u(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,u(this,e,t)),this},s.prototype.removeListener=function(e,t){var a,n,r,s,i;if(l(t),void 0===(n=this._events))return this;if(void 0===(a=n[e]))return this;if(a===t||a.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,a.listener||t));else if("function"!==typeof a){for(r=-1,s=a.length-1;s>=0;s--)if(a[s]===t||a[s].listener===t){i=a[s].listener,r=s;break}if(r<0)return this;0===r?a.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(a,r),1===a.length&&(n[e]=a[0]),void 0!==n.removeListener&&this.emit("removeListener",e,i||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,a,n;if(void 0===(a=this._events))return this;if(void 0===a.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==a[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete a[e]),this;if(0===arguments.length){var r,s=Object.keys(a);for(n=0;n<s.length;++n)"removeListener"!==(r=s[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=a[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},2730:(e,t,a)=>{var n=a(5043),r=a(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function o(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function p(e,t,a,n,r,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=a,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){f[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];f[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){f[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){f[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){f[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){f[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){f[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){f[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){f[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,a,n){var r=f.hasOwnProperty(t)?f[t]:null;(null!==r?0!==r.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,a,n){if(null===t||"undefined"===typeof t||function(e,t,a,n){if(null!==a&&0===a.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==a?!a.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,a,n))return!0;if(n)return!1;if(null!==a)switch(a.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,a,r,n)&&(a=null),n||null===r?function(e){return!!u.call(g,e)||!u.call(m,e)&&(h.test(e)?g[e]=!0:(m[e]=!0,!1))}(t)&&(null===a?e.removeAttribute(t):e.setAttribute(t,""+a)):r.mustUseProperty?e[r.propertyName]=null===a?3!==r.type&&"":a:(t=r.attributeName,n=r.attributeNamespace,null===a?e.removeAttribute(t):(a=3===(r=r.type)||4===r&&!0===a?"":""+a,n?e.setAttributeNS(n,t,a):e.setAttribute(t,a))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);f[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);f[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);f[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){f[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),f.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){f[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var E=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),N=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),M=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var _,D=Object.assign;function B(e){if(void 0===_)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);_=t&&t[1]||""}return"\n"+_+e}var F=!1;function U(e,t){if(!e||F)return"";F=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=n.stack.split("\n"),i=r.length-1,l=s.length-1;1<=i&&0<=l&&r[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(r[i]!==s[l]){if(1!==i||1!==l)do{if(i--,0>--l||r[i]!==s[l]){var o="\n"+r[i].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=i&&0<=l);break}}}finally{F=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?B(e):""}function H(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case T:return"Fragment";case N:return"Portal";case A:return"Profiler";case x:return"StrictMode";case R:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case M:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return G(e(t))}catch(a){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=z(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof a&&"function"===typeof a.get&&"function"===typeof a.set){var r=a.get,s=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=z(e)?e.checked?"true":"false":e.value),(e=n)!==a&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var a=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=a?a:e._wrapperState.initialChecked})}function Z(e,t){var a=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;a=K(null!=t.value?t.value:a),e._wrapperState={initialChecked:n,initialValue:a,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function q(e,t){J(e,t);var a=K(t.value),n=t.type;if(null!=a)"number"===n?(0===a&&""===e.value||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,a):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,a||t===e.value||(e.value=t),e.defaultValue=t}""!==(a=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==a&&(e.name=a)}function ee(e,t,a){"number"===t&&Q(e.ownerDocument)===e||(null==a?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var te=Array.isArray;function ae(e,t,a,n){if(e=e.options,t){t={};for(var r=0;r<a.length;r++)t["$"+a[r]]=!0;for(a=0;a<e.length;a++)r=t.hasOwnProperty("$"+e[a].value),e[a].selected!==r&&(e[a].selected=r),r&&n&&(e[a].defaultSelected=!0)}else{for(a=""+K(a),t=null,r=0;r<e.length;r++){if(e[r].value===a)return e[r].selected=!0,void(n&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var a=t.value;if(null==a){if(a=t.children,t=t.defaultValue,null!=a){if(null!=t)throw Error(s(92));if(te(a)){if(1<a.length)throw Error(s(93));a=a[0]}t=a}null==t&&(t=""),a=t}e._wrapperState={initialValue:K(a)}}function se(e,t){var a=K(t.value),n=K(t.defaultValue);null!=a&&((a=""+a)!==e.value&&(e.value=a),null==t.defaultValue&&e.defaultValue!==a&&(e.defaultValue=a)),null!=n&&(e.defaultValue=""+n)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,a,n){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&3===a.nodeType)return void(a.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];function pe(e,t,a){return null==t||"boolean"===typeof t||""===t?"":a||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function fe(e,t){for(var a in e=e.style,t)if(t.hasOwnProperty(a)){var n=0===a.indexOf("--"),r=pe(a,t[a],n);"float"===a&&(a="cssFloat"),n?e.setProperty(a,r):e[a]=r}}Object.keys(me).forEach((function(e){ge.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]}))}));var ve=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ee=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,Te=null,xe=null;function Ae(e){if(e=br(e)){if("function"!==typeof Ne)throw Error(s(280));var t=e.stateNode;t&&(t=Sr(t),Ne(e.stateNode,e.type,t))}}function Ce(e){Te?xe?xe.push(e):xe=[e]:Te=e}function Me(){if(Te){var e=Te,t=xe;if(xe=Te=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function we(e,t){return e(t)}function Re(){}var ke=!1;function je(e,t,a){if(ke)return e(t,a);ke=!0;try{return we(e,t,a)}finally{ke=!1,(null!==Te||null!==xe)&&(Re(),Me())}}function Oe(e,t){var a=e.stateNode;if(null===a)return null;var n=Sr(a);if(null===n)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(a&&"function"!==typeof a)throw Error(s(231,t,typeof a));return a}var Ie=!1;if(d)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(de){Ie=!1}function Pe(e,t,a,n,r,s,i,l,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(a,c)}catch(d){this.onError(d)}}var _e=!1,De=null,Be=!1,Fe=null,Ue={onError:function(e){_e=!0,De=e}};function He(e,t,a,n,r,s,i,l,o){_e=!1,De=null,Pe.apply(Ue,arguments)}function Ge(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(a=t.return),e=t.return}while(e)}return 3===t.tag?a:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Ge(e)!==e)throw Error(s(188))}function ze(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(s(188));return t!==e?null:e}for(var a=e,n=t;;){var r=a.return;if(null===r)break;var i=r.alternate;if(null===i){if(null!==(n=r.return)){a=n;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===a)return Ke(r),e;if(i===n)return Ke(r),t;i=i.sibling}throw Error(s(188))}if(a.return!==n.return)a=r,n=i;else{for(var l=!1,o=r.child;o;){if(o===a){l=!0,a=r,n=i;break}if(o===n){l=!0,n=r,a=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===a){l=!0,a=i,n=r;break}if(o===n){l=!0,n=i,a=r;break}o=o.sibling}if(!l)throw Error(s(189))}}if(a.alternate!==n)throw Error(s(190))}if(3!==a.tag)throw Error(s(188));return a.stateNode.current===a?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Ye=r.unstable_scheduleCallback,Qe=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,Ze=r.unstable_requestPaint,Je=r.unstable_now,qe=r.unstable_getCurrentPriorityLevel,$e=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,at=r.unstable_LowPriority,nt=r.unstable_IdlePriority,rt=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/ot|0)|0},lt=Math.log,ot=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var a=e.pendingLanes;if(0===a)return 0;var n=0,r=e.suspendedLanes,s=e.pingedLanes,i=268435455&a;if(0!==i){var l=i&~r;0!==l?n=ut(l):0!==(s&=i)&&(n=ut(s))}else 0!==(i=a&~r)?n=ut(i):0!==s&&(n=ut(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&r)&&((r=n&-n)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&n)&&(n|=16&a),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)r=1<<(a=31-it(t)),n|=e[a],t&=~r;return n}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function gt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function ft(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function vt(e,t,a){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=a}function yt(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-it(a),r=1<<n;r&t|e[n]&t&&(e[n]|=t),a&=~r}}var bt=0;function Et(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,Nt,Tt,xt,At,Ct=!1,Mt=[],wt=null,Rt=null,kt=null,jt=new Map,Ot=new Map,It=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":wt=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function _t(e,t,a,n,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=br(t))&&Nt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Dt(e){var t=yr(e.target);if(null!==t){var a=Ge(t);if(null!==a)if(13===(t=a.tag)){if(null!==(t=We(a)))return e.blockedOn=t,void At(e.priority,(function(){Tt(a)}))}else if(3===t&&a.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===a.tag?a.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var a=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==a)return null!==(t=br(a))&&Nt(t),e.blockedOn=a,!1;var n=new(a=e.nativeEvent).constructor(a.type,a);Ee=n,a.target.dispatchEvent(n),Ee=null,t.shift()}return!0}function Ft(e,t,a){Bt(e)&&a.delete(t)}function Ut(){Ct=!1,null!==wt&&Bt(wt)&&(wt=null),null!==Rt&&Bt(Rt)&&(Rt=null),null!==kt&&Bt(kt)&&(kt=null),jt.forEach(Ft),Ot.forEach(Ft)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ut)))}function Gt(e){function t(t){return Ht(t,e)}if(0<Mt.length){Ht(Mt[0],e);for(var a=1;a<Mt.length;a++){var n=Mt[a];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==wt&&Ht(wt,e),null!==Rt&&Ht(Rt,e),null!==kt&&Ht(kt,e),jt.forEach(t),Ot.forEach(t),a=0;a<It.length;a++)(n=It[a]).blockedOn===e&&(n.blockedOn=null);for(;0<It.length&&null===(a=It[0]).blockedOn;)Dt(a),null===a.blockedOn&&It.shift()}var Wt=E.ReactCurrentBatchConfig,Kt=!0;function zt(e,t,a,n){var r=bt,s=Wt.transition;Wt.transition=null;try{bt=1,Yt(e,t,a,n)}finally{bt=r,Wt.transition=s}}function Vt(e,t,a,n){var r=bt,s=Wt.transition;Wt.transition=null;try{bt=4,Yt(e,t,a,n)}finally{bt=r,Wt.transition=s}}function Yt(e,t,a,n){if(Kt){var r=Xt(e,t,a,n);if(null===r)Kn(e,t,n,Qt,a),Pt(e,n);else if(function(e,t,a,n,r){switch(t){case"focusin":return wt=_t(wt,e,t,a,n,r),!0;case"dragenter":return Rt=_t(Rt,e,t,a,n,r),!0;case"mouseover":return kt=_t(kt,e,t,a,n,r),!0;case"pointerover":var s=r.pointerId;return jt.set(s,_t(jt.get(s)||null,e,t,a,n,r)),!0;case"gotpointercapture":return s=r.pointerId,Ot.set(s,_t(Ot.get(s)||null,e,t,a,n,r)),!0}return!1}(r,e,t,a,n))n.stopPropagation();else if(Pt(e,n),4&t&&-1<Lt.indexOf(e)){for(;null!==r;){var s=br(r);if(null!==s&&St(s),null===(s=Xt(e,t,a,n))&&Kn(e,t,n,Qt,a),s===r)break;r=s}null!==r&&n.stopPropagation()}else Kn(e,t,n,null,a)}}var Qt=null;function Xt(e,t,a,n){if(Qt=null,null!==(e=yr(e=Se(n))))if(null===(t=Ge(e)))e=null;else if(13===(a=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===a){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qe()){case $e:return 1;case et:return 4;case tt:case at:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Jt=null,qt=null,$t=null;function ea(){if($t)return $t;var e,t,a=qt,n=a.length,r="value"in Jt?Jt.value:Jt.textContent,s=r.length;for(e=0;e<n&&a[e]===r[e];e++);var i=n-e;for(t=1;t<=i&&a[n-t]===r[s-t];t++);return $t=r.slice(e,1<t?1-t:void 0)}function ta(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function aa(){return!0}function na(){return!1}function ra(e){function t(t,a,n,r,s){for(var i in this._reactName=t,this._targetInst=n,this.type=a,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(r):r[i]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?aa:na,this.isPropagationStopped=na,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=aa)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=aa)},persist:function(){},isPersistent:aa}),t}var sa,ia,la,oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=ra(oa),da=D({},oa,{view:0,detail:0}),ua=ra(da),ha=D({},da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xa,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==la&&(la&&"mousemove"===e.type?(sa=e.screenX-la.screenX,ia=e.screenY-la.screenY):ia=sa=0,la=e),sa)},movementY:function(e){return"movementY"in e?e.movementY:ia}}),ma=ra(ha),ga=ra(D({},ha,{dataTransfer:0})),pa=ra(D({},da,{relatedTarget:0})),fa=ra(D({},oa,{animationName:0,elapsedTime:0,pseudoElement:0})),va=D({},oa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ya=ra(va),ba=ra(D({},oa,{data:0})),Ea={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Na={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ta(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Na[e])&&!!t[e]}function xa(){return Ta}var Aa=D({},da,{key:function(e){if(e.key){var t=Ea[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ta(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sa[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xa,charCode:function(e){return"keypress"===e.type?ta(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ta(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ca=ra(Aa),Ma=ra(D({},ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wa=ra(D({},da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xa})),Ra=ra(D({},oa,{propertyName:0,elapsedTime:0,pseudoElement:0})),ka=D({},ha,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ja=ra(ka),Oa=[9,13,27,32],Ia=d&&"CompositionEvent"in window,La=null;d&&"documentMode"in document&&(La=document.documentMode);var Pa=d&&"TextEvent"in window&&!La,_a=d&&(!Ia||La&&8<La&&11>=La),Da=String.fromCharCode(32),Ba=!1;function Fa(e,t){switch(e){case"keyup":return-1!==Oa.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ua(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ha=!1;var Ga={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ga[e.type]:"textarea"===t}function Ka(e,t,a,n){Ce(n),0<(t=Vn(t,"onChange")).length&&(a=new ca("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var za=null,Va=null;function Ya(e){Bn(e,0)}function Qa(e){if(Y(Er(e)))return e}function Xa(e,t){if("change"===e)return t}var Za=!1;if(d){var Ja;if(d){var qa="oninput"in document;if(!qa){var $a=document.createElement("div");$a.setAttribute("oninput","return;"),qa="function"===typeof $a.oninput}Ja=qa}else Ja=!1;Za=Ja&&(!document.documentMode||9<document.documentMode)}function en(){za&&(za.detachEvent("onpropertychange",tn),Va=za=null)}function tn(e){if("value"===e.propertyName&&Qa(Va)){var t=[];Ka(t,Va,e,Se(e)),je(Ya,t)}}function an(e,t,a){"focusin"===e?(en(),Va=a,(za=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qa(Va)}function rn(e,t){if("click"===e)return Qa(t)}function sn(e,t){if("input"===e||"change"===e)return Qa(t)}var ln="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function on(e,t){if(ln(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var r=a[n];if(!u.call(t,r)||!ln(e[r],t[r]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var a,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function un(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?un(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var a="string"===typeof t.contentWindow.location.href}catch(n){a=!1}if(!a)break;t=Q((e=t.contentWindow).document)}return t}function mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gn(e){var t=hn(),a=e.focusedElem,n=e.selectionRange;if(t!==a&&a&&a.ownerDocument&&un(a.ownerDocument.documentElement,a)){if(null!==n&&mn(a))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(e,a.value.length);else if((e=(t=a.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=a.textContent.length,s=Math.min(n.start,r);n=void 0===n.end?s:Math.min(n.end,r),!e.extend&&s>n&&(r=n,n=s,s=r),r=dn(a,s);var i=dn(a,n);r&&i&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=a;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<t.length;a++)(e=t[a]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pn=d&&"documentMode"in document&&11>=document.documentMode,fn=null,vn=null,yn=null,bn=!1;function En(e,t,a){var n=a.window===a?a.document:9===a.nodeType?a:a.ownerDocument;bn||null==fn||fn!==Q(n)||("selectionStart"in(n=fn)&&mn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},yn&&on(yn,n)||(yn=n,0<(n=Vn(vn,"onSelect")).length&&(t=new ca("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=fn)))}function Sn(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Nn={animationend:Sn("Animation","AnimationEnd"),animationiteration:Sn("Animation","AnimationIteration"),animationstart:Sn("Animation","AnimationStart"),transitionend:Sn("Transition","TransitionEnd")},Tn={},xn={};function An(e){if(Tn[e])return Tn[e];if(!Nn[e])return e;var t,a=Nn[e];for(t in a)if(a.hasOwnProperty(t)&&t in xn)return Tn[e]=a[t];return e}d&&(xn=document.createElement("div").style,"AnimationEvent"in window||(delete Nn.animationend.animation,delete Nn.animationiteration.animation,delete Nn.animationstart.animation),"TransitionEvent"in window||delete Nn.transitionend.transition);var Cn=An("animationend"),Mn=An("animationiteration"),wn=An("animationstart"),Rn=An("transitionend"),kn=new Map,jn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function On(e,t){kn.set(e,t),o(t,[e])}for(var In=0;In<jn.length;In++){var Ln=jn[In];On(Ln.toLowerCase(),"on"+(Ln[0].toUpperCase()+Ln.slice(1)))}On(Cn,"onAnimationEnd"),On(Mn,"onAnimationIteration"),On(wn,"onAnimationStart"),On("dblclick","onDoubleClick"),On("focusin","onFocus"),On("focusout","onBlur"),On(Rn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_n=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pn));function Dn(e,t,a){var n=e.type||"unknown-event";e.currentTarget=a,function(e,t,a,n,r,i,l,o,c){if(He.apply(this,arguments),_e){if(!_e)throw Error(s(198));var d=De;_e=!1,De=null,Be||(Be=!0,Fe=d)}}(n,t,void 0,e),e.currentTarget=null}function Bn(e,t){t=0!==(4&t);for(var a=0;a<e.length;a++){var n=e[a],r=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==s&&r.isPropagationStopped())break e;Dn(r,l,c),s=o}else for(i=0;i<n.length;i++){if(o=(l=n[i]).instance,c=l.currentTarget,l=l.listener,o!==s&&r.isPropagationStopped())break e;Dn(r,l,c),s=o}}}if(Be)throw e=Fe,Be=!1,Fe=null,e}function Fn(e,t){var a=t[pr];void 0===a&&(a=t[pr]=new Set);var n=e+"__bubble";a.has(n)||(Wn(t,e,2,!1),a.add(n))}function Un(e,t,a){var n=0;t&&(n|=4),Wn(a,e,n,t)}var Hn="_reactListening"+Math.random().toString(36).slice(2);function Gn(e){if(!e[Hn]){e[Hn]=!0,i.forEach((function(t){"selectionchange"!==t&&(_n.has(t)||Un(t,!1,e),Un(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hn]||(t[Hn]=!0,Un("selectionchange",!1,t))}}function Wn(e,t,a,n){switch(Zt(t)){case 1:var r=zt;break;case 4:r=Vt;break;default:r=Yt}a=r.bind(null,t,a,e),r=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),n?void 0!==r?e.addEventListener(t,a,{capture:!0,passive:r}):e.addEventListener(t,a,!0):void 0!==r?e.addEventListener(t,a,{passive:r}):e.addEventListener(t,a,!1)}function Kn(e,t,a,n,r){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var l=n.stateNode.containerInfo;if(l===r||8===l.nodeType&&l.parentNode===r)break;if(4===i)for(i=n.return;null!==i;){var o=i.tag;if((3===o||4===o)&&((o=i.stateNode.containerInfo)===r||8===o.nodeType&&o.parentNode===r))return;i=i.return}for(;null!==l;){if(null===(i=yr(l)))return;if(5===(o=i.tag)||6===o){n=s=i;continue e}l=l.parentNode}}n=n.return}je((function(){var n=s,r=Se(a),i=[];e:{var l=kn.get(e);if(void 0!==l){var o=ca,c=e;switch(e){case"keypress":if(0===ta(a))break e;case"keydown":case"keyup":o=Ca;break;case"focusin":c="focus",o=pa;break;case"focusout":c="blur",o=pa;break;case"beforeblur":case"afterblur":o=pa;break;case"click":if(2===a.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=ma;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=ga;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=wa;break;case Cn:case Mn:case wn:o=fa;break;case Rn:o=Ra;break;case"scroll":o=ua;break;case"wheel":o=ja;break;case"copy":case"cut":case"paste":o=ya;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=Ma}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==l?l+"Capture":null:l;d=[];for(var m,g=n;null!==g;){var p=(m=g).stateNode;if(5===m.tag&&null!==p&&(m=p,null!==h&&(null!=(p=Oe(g,h))&&d.push(zn(g,p,m)))),u)break;g=g.return}0<d.length&&(l=new o(l,c,null,a,r),i.push({event:l,listeners:d}))}}if(0===(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||a===Ee||!(c=a.relatedTarget||a.fromElement)||!yr(c)&&!c[gr])&&(o||l)&&(l=r.window===r?r:(l=r.ownerDocument)?l.defaultView||l.parentWindow:window,o?(o=n,null!==(c=(c=a.relatedTarget||a.toElement)?yr(c):null)&&(c!==(u=Ge(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(o=null,c=n),o!==c)){if(d=ma,p="onMouseLeave",h="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=Ma,p="onPointerLeave",h="onPointerEnter",g="pointer"),u=null==o?l:Er(o),m=null==c?l:Er(c),(l=new d(p,g+"leave",o,a,r)).target=u,l.relatedTarget=m,p=null,yr(r)===n&&((d=new d(h,g+"enter",c,a,r)).target=m,d.relatedTarget=u,p=d),u=p,o&&c)e:{for(h=c,g=0,m=d=o;m;m=Yn(m))g++;for(m=0,p=h;p;p=Yn(p))m++;for(;0<g-m;)d=Yn(d),g--;for(;0<m-g;)h=Yn(h),m--;for(;g--;){if(d===h||null!==h&&d===h.alternate)break e;d=Yn(d),h=Yn(h)}d=null}else d=null;null!==o&&Qn(i,l,o,d,!1),null!==c&&null!==u&&Qn(i,u,c,d,!0)}if("select"===(o=(l=n?Er(n):window).nodeName&&l.nodeName.toLowerCase())||"input"===o&&"file"===l.type)var f=Xa;else if(Wa(l))if(Za)f=sn;else{f=nn;var v=an}else(o=l.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(f=rn);switch(f&&(f=f(e,n))?Ka(i,f,a,r):(v&&v(e,l,n),"focusout"===e&&(v=l._wrapperState)&&v.controlled&&"number"===l.type&&ee(l,"number",l.value)),v=n?Er(n):window,e){case"focusin":(Wa(v)||"true"===v.contentEditable)&&(fn=v,vn=n,yn=null);break;case"focusout":yn=vn=fn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,En(i,a,r);break;case"selectionchange":if(pn)break;case"keydown":case"keyup":En(i,a,r)}var y;if(Ia)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ha?Fa(e,a)&&(b="onCompositionEnd"):"keydown"===e&&229===a.keyCode&&(b="onCompositionStart");b&&(_a&&"ko"!==a.locale&&(Ha||"onCompositionStart"!==b?"onCompositionEnd"===b&&Ha&&(y=ea()):(qt="value"in(Jt=r)?Jt.value:Jt.textContent,Ha=!0)),0<(v=Vn(n,b)).length&&(b=new ba(b,e,null,a,r),i.push({event:b,listeners:v}),y?b.data=y:null!==(y=Ua(a))&&(b.data=y))),(y=Pa?function(e,t){switch(e){case"compositionend":return Ua(t);case"keypress":return 32!==t.which?null:(Ba=!0,Da);case"textInput":return(e=t.data)===Da&&Ba?null:e;default:return null}}(e,a):function(e,t){if(Ha)return"compositionend"===e||!Ia&&Fa(e,t)?(e=ea(),$t=qt=Jt=null,Ha=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _a&&"ko"!==t.locale?null:t.data}}(e,a))&&(0<(n=Vn(n,"onBeforeInput")).length&&(r=new ba("onBeforeInput","beforeinput",null,a,r),i.push({event:r,listeners:n}),r.data=y))}Bn(i,t)}))}function zn(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Vn(e,t){for(var a=t+"Capture",n=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Oe(e,a))&&n.unshift(zn(e,s,r)),null!=(s=Oe(e,t))&&n.push(zn(e,s,r))),e=e.return}return n}function Yn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qn(e,t,a,n,r){for(var s=t._reactName,i=[];null!==a&&a!==n;){var l=a,o=l.alternate,c=l.stateNode;if(null!==o&&o===n)break;5===l.tag&&null!==c&&(l=c,r?null!=(o=Oe(a,s))&&i.unshift(zn(a,o,l)):r||null!=(o=Oe(a,s))&&i.push(zn(a,o,l))),a=a.return}0!==i.length&&e.push({event:t,listeners:i})}var Xn=/\r\n?/g,Zn=/\u0000|\uFFFD/g;function Jn(e){return("string"===typeof e?e:""+e).replace(Xn,"\n").replace(Zn,"")}function qn(e,t,a){if(t=Jn(t),Jn(e)!==t&&a)throw Error(s(425))}function $n(){}var er=null,tr=null;function ar(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var nr="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,ir="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(lr)}:nr;function lr(e){setTimeout((function(){throw e}))}function or(e,t){var a=t,n=0;do{var r=a.nextSibling;if(e.removeChild(a),r&&8===r.nodeType)if("/$"===(a=r.data)){if(0===n)return e.removeChild(r),void Gt(t);n--}else"$"!==a&&"$?"!==a&&"$!"!==a||n++;a=r}while(a);Gt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var a=e.data;if("$"===a||"$!"===a||"$?"===a){if(0===t)return e;t--}else"/$"===a&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),hr="__reactFiber$"+ur,mr="__reactProps$"+ur,gr="__reactContainer$"+ur,pr="__reactEvents$"+ur,fr="__reactListeners$"+ur,vr="__reactHandles$"+ur;function yr(e){var t=e[hr];if(t)return t;for(var a=e.parentNode;a;){if(t=a[gr]||a[hr]){if(a=t.alternate,null!==t.child||null!==a&&null!==a.child)for(e=dr(e);null!==e;){if(a=e[hr])return a;e=dr(e)}return t}a=(e=a).parentNode}return null}function br(e){return!(e=e[hr]||e[gr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Er(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Sr(e){return e[mr]||null}var Nr=[],Tr=-1;function xr(e){return{current:e}}function Ar(e){0>Tr||(e.current=Nr[Tr],Nr[Tr]=null,Tr--)}function Cr(e,t){Tr++,Nr[Tr]=e.current,e.current=t}var Mr={},wr=xr(Mr),Rr=xr(!1),kr=Mr;function jr(e,t){var a=e.type.contextTypes;if(!a)return Mr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in a)s[r]=t[r];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Or(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ir(){Ar(Rr),Ar(wr)}function Lr(e,t,a){if(wr.current!==Mr)throw Error(s(168));Cr(wr,t),Cr(Rr,a)}function Pr(e,t,a){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return a;for(var r in n=n.getChildContext())if(!(r in t))throw Error(s(108,W(e)||"Unknown",r));return D({},a,n)}function _r(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mr,kr=wr.current,Cr(wr,e),Cr(Rr,Rr.current),!0}function Dr(e,t,a){var n=e.stateNode;if(!n)throw Error(s(169));a?(e=Pr(e,t,kr),n.__reactInternalMemoizedMergedChildContext=e,Ar(Rr),Ar(wr),Cr(wr,e)):Ar(Rr),Cr(Rr,a)}var Br=null,Fr=!1,Ur=!1;function Hr(e){null===Br?Br=[e]:Br.push(e)}function Gr(){if(!Ur&&null!==Br){Ur=!0;var e=0,t=bt;try{var a=Br;for(bt=1;e<a.length;e++){var n=a[e];do{n=n(!0)}while(null!==n)}Br=null,Fr=!1}catch(r){throw null!==Br&&(Br=Br.slice(e+1)),Ye($e,Gr),r}finally{bt=t,Ur=!1}}return null}var Wr=[],Kr=0,zr=null,Vr=0,Yr=[],Qr=0,Xr=null,Zr=1,Jr="";function qr(e,t){Wr[Kr++]=Vr,Wr[Kr++]=zr,zr=e,Vr=t}function $r(e,t,a){Yr[Qr++]=Zr,Yr[Qr++]=Jr,Yr[Qr++]=Xr,Xr=e;var n=Zr;e=Jr;var r=32-it(n)-1;n&=~(1<<r),a+=1;var s=32-it(t)+r;if(30<s){var i=r-r%5;s=(n&(1<<i)-1).toString(32),n>>=i,r-=i,Zr=1<<32-it(t)+r|a<<r|n,Jr=s+e}else Zr=1<<s|a<<r|n,Jr=e}function es(e){null!==e.return&&(qr(e,1),$r(e,1,0))}function ts(e){for(;e===zr;)zr=Wr[--Kr],Wr[Kr]=null,Vr=Wr[--Kr],Wr[Kr]=null;for(;e===Xr;)Xr=Yr[--Qr],Yr[Qr]=null,Jr=Yr[--Qr],Yr[Qr]=null,Zr=Yr[--Qr],Yr[Qr]=null}var as=null,ns=null,rs=!1,ss=null;function is(e,t){var a=jc(5,null,null,0);a.elementType="DELETED",a.stateNode=t,a.return=e,null===(t=e.deletions)?(e.deletions=[a],e.flags|=16):t.push(a)}function ls(e,t){switch(e.tag){case 5:var a=e.type;return null!==(t=1!==t.nodeType||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,as=e,ns=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,as=e,ns=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(a=null!==Xr?{id:Zr,overflow:Jr}:null,e.memoizedState={dehydrated:t,treeContext:a,retryLane:1073741824},(a=jc(18,null,null,0)).stateNode=t,a.return=e,e.child=a,as=e,ns=null,!0);default:return!1}}function os(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=ns;if(t){var a=t;if(!ls(e,t)){if(os(e))throw Error(s(418));t=cr(a.nextSibling);var n=as;t&&ls(e,t)?is(n,a):(e.flags=-4097&e.flags|2,rs=!1,as=e)}}else{if(os(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,as=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;as=e}function us(e){if(e!==as)return!1;if(!rs)return ds(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ar(e.type,e.memoizedProps)),t&&(t=ns)){if(os(e))throw hs(),Error(s(418));for(;t;)is(e,t),t=cr(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var a=e.data;if("/$"===a){if(0===t){ns=cr(e.nextSibling);break e}t--}else"$"!==a&&"$!"!==a&&"$?"!==a||t++}e=e.nextSibling}ns=null}}else ns=as?cr(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=ns;e;)e=cr(e.nextSibling)}function ms(){ns=as=null,rs=!1}function gs(e){null===ss?ss=[e]:ss.push(e)}var ps=E.ReactCurrentBatchConfig;function fs(e,t,a){if(null!==(e=a.ref)&&"function"!==typeof e&&"object"!==typeof e){if(a._owner){if(a=a._owner){if(1!==a.tag)throw Error(s(309));var n=a.stateNode}if(!n)throw Error(s(147,e));var r=n,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!a._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,a){if(e){var n=t.deletions;null===n?(t.deletions=[a],t.flags|=16):n.push(a)}}function a(a,n){if(!e)return null;for(;null!==n;)t(a,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function i(t,a,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<a?(t.flags|=2,a):n:(t.flags|=2,a):(t.flags|=1048576,a)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,a,n){return null===t||6!==t.tag?((t=Dc(a,e.mode,n)).return=e,t):((t=r(t,a)).return=e,t)}function c(e,t,a,n){var s=a.type;return s===T?u(e,t,a.props.children,n,a.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===O&&ys(s)===t.type)?((n=r(t,a.props)).ref=fs(e,t,a),n.return=e,n):((n=Lc(a.type,a.key,a.props,null,e.mode,n)).ref=fs(e,t,a),n.return=e,n)}function d(e,t,a,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==a.containerInfo||t.stateNode.implementation!==a.implementation?((t=Bc(a,e.mode,n)).return=e,t):((t=r(t,a.children||[])).return=e,t)}function u(e,t,a,n,s){return null===t||7!==t.tag?((t=Pc(a,e.mode,n,s)).return=e,t):((t=r(t,a)).return=e,t)}function h(e,t,a){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dc(""+t,e.mode,a)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(a=Lc(t.type,t.key,t.props,null,e.mode,a)).ref=fs(e,null,t),a.return=e,a;case N:return(t=Bc(t,e.mode,a)).return=e,t;case O:return h(e,(0,t._init)(t._payload),a)}if(te(t)||P(t))return(t=Pc(t,e.mode,a,null)).return=e,t;vs(e,t)}return null}function m(e,t,a,n){var r=null!==t?t.key:null;if("string"===typeof a&&""!==a||"number"===typeof a)return null!==r?null:o(e,t,""+a,n);if("object"===typeof a&&null!==a){switch(a.$$typeof){case S:return a.key===r?c(e,t,a,n):null;case N:return a.key===r?d(e,t,a,n):null;case O:return m(e,t,(r=a._init)(a._payload),n)}if(te(a)||P(a))return null!==r?null:u(e,t,a,n,null);vs(e,a)}return null}function g(e,t,a,n,r){if("string"===typeof n&&""!==n||"number"===typeof n)return o(t,e=e.get(a)||null,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return c(t,e=e.get(null===n.key?a:n.key)||null,n,r);case N:return d(t,e=e.get(null===n.key?a:n.key)||null,n,r);case O:return g(e,t,a,(0,n._init)(n._payload),r)}if(te(n)||P(n))return u(t,e=e.get(a)||null,n,r,null);vs(t,n)}return null}function p(r,s,l,o){for(var c=null,d=null,u=s,p=s=0,f=null;null!==u&&p<l.length;p++){u.index>p?(f=u,u=null):f=u.sibling;var v=m(r,u,l[p],o);if(null===v){null===u&&(u=f);break}e&&u&&null===v.alternate&&t(r,u),s=i(v,s,p),null===d?c=v:d.sibling=v,d=v,u=f}if(p===l.length)return a(r,u),rs&&qr(r,p),c;if(null===u){for(;p<l.length;p++)null!==(u=h(r,l[p],o))&&(s=i(u,s,p),null===d?c=u:d.sibling=u,d=u);return rs&&qr(r,p),c}for(u=n(r,u);p<l.length;p++)null!==(f=g(u,r,p,l[p],o))&&(e&&null!==f.alternate&&u.delete(null===f.key?p:f.key),s=i(f,s,p),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach((function(e){return t(r,e)})),rs&&qr(r,p),c}function f(r,l,o,c){var d=P(o);if("function"!==typeof d)throw Error(s(150));if(null==(o=d.call(o)))throw Error(s(151));for(var u=d=null,p=l,f=l=0,v=null,y=o.next();null!==p&&!y.done;f++,y=o.next()){p.index>f?(v=p,p=null):v=p.sibling;var b=m(r,p,y.value,c);if(null===b){null===p&&(p=v);break}e&&p&&null===b.alternate&&t(r,p),l=i(b,l,f),null===u?d=b:u.sibling=b,u=b,p=v}if(y.done)return a(r,p),rs&&qr(r,f),d;if(null===p){for(;!y.done;f++,y=o.next())null!==(y=h(r,y.value,c))&&(l=i(y,l,f),null===u?d=y:u.sibling=y,u=y);return rs&&qr(r,f),d}for(p=n(r,p);!y.done;f++,y=o.next())null!==(y=g(p,r,f,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?f:y.key),l=i(y,l,f),null===u?d=y:u.sibling=y,u=y);return e&&p.forEach((function(e){return t(r,e)})),rs&&qr(r,f),d}return function e(n,s,i,o){if("object"===typeof i&&null!==i&&i.type===T&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case S:e:{for(var c=i.key,d=s;null!==d;){if(d.key===c){if((c=i.type)===T){if(7===d.tag){a(n,d.sibling),(s=r(d,i.props.children)).return=n,n=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&ys(c)===d.type){a(n,d.sibling),(s=r(d,i.props)).ref=fs(n,d,i),s.return=n,n=s;break e}a(n,d);break}t(n,d),d=d.sibling}i.type===T?((s=Pc(i.props.children,n.mode,o,i.key)).return=n,n=s):((o=Lc(i.type,i.key,i.props,null,n.mode,o)).ref=fs(n,s,i),o.return=n,n=o)}return l(n);case N:e:{for(d=i.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){a(n,s.sibling),(s=r(s,i.children||[])).return=n,n=s;break e}a(n,s);break}t(n,s),s=s.sibling}(s=Bc(i,n.mode,o)).return=n,n=s}return l(n);case O:return e(n,s,(d=i._init)(i._payload),o)}if(te(i))return p(n,s,i,o);if(P(i))return f(n,s,i,o);vs(n,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(a(n,s.sibling),(s=r(s,i)).return=n,n=s):(a(n,s),(s=Dc(i,n.mode,o)).return=n,n=s),l(n)):a(n,s)}}var Es=bs(!0),Ss=bs(!1),Ns=xr(null),Ts=null,xs=null,As=null;function Cs(){As=xs=Ts=null}function Ms(e){var t=Ns.current;Ar(Ns),e._currentValue=t}function ws(e,t,a){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function Rs(e,t){Ts=e,As=xs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yl=!0),e.firstContext=null)}function ks(e){var t=e._currentValue;if(As!==e)if(e={context:e,memoizedValue:t,next:null},null===xs){if(null===Ts)throw Error(s(308));xs=e,Ts.dependencies={lanes:0,firstContext:e}}else xs=xs.next=e;return t}var js=null;function Os(e){null===js?js=[e]:js.push(e)}function Is(e,t,a,n){var r=t.interleaved;return null===r?(a.next=a,Os(t)):(a.next=r.next,r.next=a),t.interleaved=a,Ls(e,n)}function Ls(e,t){e.lanes|=t;var a=e.alternate;for(null!==a&&(a.lanes|=t),a=e,e=e.return;null!==e;)e.childLanes|=t,null!==(a=e.alternate)&&(a.childLanes|=t),a=e,e=e.return;return 3===a.tag?a.stateNode:null}var Ps=!1;function _s(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ds(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fs(e,t,a){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&wo)){var r=n.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),n.pending=t,Ls(e,a)}return null===(r=n.interleaved)?(t.next=t,Os(n)):(t.next=r.next,r.next=t),n.interleaved=t,Ls(e,a)}function Us(e,t,a){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&a))){var n=t.lanes;a|=n&=e.pendingLanes,t.lanes=a,yt(e,a)}}function Hs(e,t){var a=e.updateQueue,n=e.alternate;if(null!==n&&a===(n=n.updateQueue)){var r=null,s=null;if(null!==(a=a.firstBaseUpdate)){do{var i={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};null===s?r=s=i:s=s.next=i,a=a.next}while(null!==a);null===s?r=s=t:s=s.next=t}else r=s=t;return a={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=a)}null===(e=a.lastBaseUpdate)?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function Gs(e,t,a,n){var r=e.updateQueue;Ps=!1;var s=r.firstBaseUpdate,i=r.lastBaseUpdate,l=r.shared.pending;if(null!==l){r.shared.pending=null;var o=l,c=o.next;o.next=null,null===i?s=c:i.next=c,i=o;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(null!==s){var u=r.baseState;for(i=0,d=c=o=null,l=s;;){var h=l.lane,m=l.eventTime;if((n&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,p=l;switch(h=t,m=a,p.tag){case 1:if("function"===typeof(g=p.payload)){u=g.call(m,u,h);break e}u=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(h="function"===typeof(g=p.payload)?g.call(m,u,h):g)||void 0===h)break e;u=D({},u,h);break e;case 2:Ps=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=m,o=u):d=d.next=m,i|=h;if(null===(l=l.next)){if(null===(l=r.shared.pending))break;l=(h=l).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===d&&(o=u),r.baseState=o,r.firstBaseUpdate=c,r.lastBaseUpdate=d,null!==(t=r.shared.interleaved)){r=t;do{i|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);_o|=i,e.lanes=i,e.memoizedState=u}}function Ws(e,t,a){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(null!==r){if(n.callback=null,n=a,"function"!==typeof r)throw Error(s(191,r));r.call(n)}}}var Ks={},zs=xr(Ks),Vs=xr(Ks),Ys=xr(Ks);function Qs(e){if(e===Ks)throw Error(s(174));return e}function Xs(e,t){switch(Cr(Ys,t),Cr(Vs,e),Cr(zs,Ks),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oe(null,"");break;default:t=oe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ar(zs),Cr(zs,t)}function Zs(){Ar(zs),Ar(Vs),Ar(Ys)}function Js(e){Qs(Ys.current);var t=Qs(zs.current),a=oe(t,e.type);t!==a&&(Cr(Vs,e),Cr(zs,a))}function qs(e){Vs.current===e&&(Ar(zs),Ar(Vs))}var $s=xr(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var a=t.memoizedState;if(null!==a&&(null===(a=a.dehydrated)||"$?"===a.data||"$!"===a.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ai(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ni=E.ReactCurrentDispatcher,ri=E.ReactCurrentBatchConfig,si=0,ii=null,li=null,oi=null,ci=!1,di=!1,ui=0,hi=0;function mi(){throw Error(s(321))}function gi(e,t){if(null===t)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!ln(e[a],t[a]))return!1;return!0}function pi(e,t,a,n,r,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ni.current=null===e||null===e.memoizedState?qi:$i,e=a(n,r),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(s(301));i+=1,oi=li=null,t.updateQueue=null,ni.current=el,e=a(n,r)}while(di)}if(ni.current=Ji,t=null!==li&&null!==li.next,si=0,oi=li=ii=null,ci=!1,t)throw Error(s(300));return e}function fi(){var e=0!==ui;return ui=0,e}function vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===oi?ii.memoizedState=oi=e:oi=oi.next=e,oi}function yi(){if(null===li){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===oi?ii.memoizedState:oi.next;if(null!==t)oi=t,li=e;else{if(null===e)throw Error(s(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===oi?ii.memoizedState=oi=e:oi=oi.next=e}return oi}function bi(e,t){return"function"===typeof t?t(e):t}function Ei(e){var t=yi(),a=t.queue;if(null===a)throw Error(s(311));a.lastRenderedReducer=e;var n=li,r=n.baseQueue,i=a.pending;if(null!==i){if(null!==r){var l=r.next;r.next=i.next,i.next=l}n.baseQueue=r=i,a.pending=null}if(null!==r){i=r.next,n=n.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((si&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(o=c=h,l=n):c=c.next=h,ii.lanes|=u,_o|=u}d=d.next}while(null!==d&&d!==i);null===c?l=n:c.next=o,ln(n,t.memoizedState)||(yl=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,a.lastRenderedState=n}if(null!==(e=a.interleaved)){r=e;do{i=r.lane,ii.lanes|=i,_o|=i,r=r.next}while(r!==e)}else null===r&&(a.lanes=0);return[t.memoizedState,a.dispatch]}function Si(e){var t=yi(),a=t.queue;if(null===a)throw Error(s(311));a.lastRenderedReducer=e;var n=a.dispatch,r=a.pending,i=t.memoizedState;if(null!==r){a.pending=null;var l=r=r.next;do{i=e(i,l.action),l=l.next}while(l!==r);ln(i,t.memoizedState)||(yl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),a.lastRenderedState=i}return[i,n]}function Ni(){}function Ti(e,t){var a=ii,n=yi(),r=t(),i=!ln(n.memoizedState,r);if(i&&(n.memoizedState=r,yl=!0),n=n.queue,Pi(Ci.bind(null,a,n,e),[e]),n.getSnapshot!==t||i||null!==oi&&1&oi.memoizedState.tag){if(a.flags|=2048,ki(9,Ai.bind(null,a,n,r,t),void 0,null),null===Ro)throw Error(s(349));0!==(30&si)||xi(a,t,r)}return r}function xi(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(a=t.stores)?t.stores=[e]:a.push(e)}function Ai(e,t,a,n){t.value=a,t.getSnapshot=n,Mi(t)&&wi(e)}function Ci(e,t,a){return a((function(){Mi(t)&&wi(e)}))}function Mi(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!ln(e,a)}catch(n){return!0}}function wi(e){var t=Ls(e,1);null!==t&&ac(t,e,1,-1)}function Ri(e){var t=vi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Yi.bind(null,ii,e),[t.memoizedState,e]}function ki(e,t,a,n){return e={tag:e,create:t,destroy:a,deps:n,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(a=t.lastEffect)?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function ji(){return yi().memoizedState}function Oi(e,t,a,n){var r=vi();ii.flags|=e,r.memoizedState=ki(1|t,a,void 0,void 0===n?null:n)}function Ii(e,t,a,n){var r=yi();n=void 0===n?null:n;var s=void 0;if(null!==li){var i=li.memoizedState;if(s=i.destroy,null!==n&&gi(n,i.deps))return void(r.memoizedState=ki(t,a,s,n))}ii.flags|=e,r.memoizedState=ki(1|t,a,s,n)}function Li(e,t){return Oi(8390656,8,e,t)}function Pi(e,t){return Ii(2048,8,e,t)}function _i(e,t){return Ii(4,2,e,t)}function Di(e,t){return Ii(4,4,e,t)}function Bi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fi(e,t,a){return a=null!==a&&void 0!==a?a.concat([e]):null,Ii(4,4,Bi.bind(null,t,e),a)}function Ui(){}function Hi(e,t){var a=yi();t=void 0===t?null:t;var n=a.memoizedState;return null!==n&&null!==t&&gi(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function Gi(e,t){var a=yi();t=void 0===t?null:t;var n=a.memoizedState;return null!==n&&null!==t&&gi(t,n[1])?n[0]:(e=e(),a.memoizedState=[e,t],e)}function Wi(e,t,a){return 0===(21&si)?(e.baseState&&(e.baseState=!1,yl=!0),e.memoizedState=a):(ln(a,t)||(a=pt(),ii.lanes|=a,_o|=a,e.baseState=!0),t)}function Ki(e,t){var a=bt;bt=0!==a&&4>a?a:4,e(!0);var n=ri.transition;ri.transition={};try{e(!1),t()}finally{bt=a,ri.transition=n}}function zi(){return yi().memoizedState}function Vi(e,t,a){var n=tc(e);if(a={lane:n,action:a,hasEagerState:!1,eagerState:null,next:null},Qi(e))Xi(t,a);else if(null!==(a=Is(e,t,a,n))){ac(a,e,n,ec()),Zi(a,t,n)}}function Yi(e,t,a){var n=tc(e),r={lane:n,action:a,hasEagerState:!1,eagerState:null,next:null};if(Qi(e))Xi(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=s(i,a);if(r.hasEagerState=!0,r.eagerState=l,ln(l,i)){var o=t.interleaved;return null===o?(r.next=r,Os(t)):(r.next=o.next,o.next=r),void(t.interleaved=r)}}catch(c){}null!==(a=Is(e,t,r,n))&&(ac(a,e,n,r=ec()),Zi(a,t,n))}}function Qi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Xi(e,t){di=ci=!0;var a=e.pending;null===a?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Zi(e,t,a){if(0!==(4194240&a)){var n=t.lanes;a|=n&=e.pendingLanes,t.lanes=a,yt(e,a)}}var Ji={readContext:ks,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},qi={readContext:ks,useCallback:function(e,t){return vi().memoizedState=[e,void 0===t?null:t],e},useContext:ks,useEffect:Li,useImperativeHandle:function(e,t,a){return a=null!==a&&void 0!==a?a.concat([e]):null,Oi(4194308,4,Bi.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Oi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oi(4,2,e,t)},useMemo:function(e,t){var a=vi();return t=void 0===t?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var n=vi();return t=void 0!==a?a(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Vi.bind(null,ii,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},vi().memoizedState=e},useState:Ri,useDebugValue:Ui,useDeferredValue:function(e){return vi().memoizedState=e},useTransition:function(){var e=Ri(!1),t=e[0];return e=Ki.bind(null,e[1]),vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,a){var n=ii,r=vi();if(rs){if(void 0===a)throw Error(s(407));a=a()}else{if(a=t(),null===Ro)throw Error(s(349));0!==(30&si)||xi(n,t,a)}r.memoizedState=a;var i={value:a,getSnapshot:t};return r.queue=i,Li(Ci.bind(null,n,i,e),[e]),n.flags|=2048,ki(9,Ai.bind(null,n,i,a,t),void 0,null),a},useId:function(){var e=vi(),t=Ro.identifierPrefix;if(rs){var a=Jr;t=":"+t+"R"+(a=(Zr&~(1<<32-it(Zr)-1)).toString(32)+a),0<(a=ui++)&&(t+="H"+a.toString(32)),t+=":"}else t=":"+t+"r"+(a=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$i={readContext:ks,useCallback:Hi,useContext:ks,useEffect:Pi,useImperativeHandle:Fi,useInsertionEffect:_i,useLayoutEffect:Di,useMemo:Gi,useReducer:Ei,useRef:ji,useState:function(){return Ei(bi)},useDebugValue:Ui,useDeferredValue:function(e){return Wi(yi(),li.memoizedState,e)},useTransition:function(){return[Ei(bi)[0],yi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:Ti,useId:zi,unstable_isNewReconciler:!1},el={readContext:ks,useCallback:Hi,useContext:ks,useEffect:Pi,useImperativeHandle:Fi,useInsertionEffect:_i,useLayoutEffect:Di,useMemo:Gi,useReducer:Si,useRef:ji,useState:function(){return Si(bi)},useDebugValue:Ui,useDeferredValue:function(e){var t=yi();return null===li?t.memoizedState=e:Wi(t,li.memoizedState,e)},useTransition:function(){return[Si(bi)[0],yi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:Ti,useId:zi,unstable_isNewReconciler:!1};function tl(e,t){if(e&&e.defaultProps){for(var a in t=D({},t),e=e.defaultProps)void 0===t[a]&&(t[a]=e[a]);return t}return t}function al(e,t,a,n){a=null===(a=a(n,t=e.memoizedState))||void 0===a?t:D({},t,a),e.memoizedState=a,0===e.lanes&&(e.updateQueue.baseState=a)}var nl={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,a){e=e._reactInternals;var n=ec(),r=tc(e),s=Bs(n,r);s.payload=t,void 0!==a&&null!==a&&(s.callback=a),null!==(t=Fs(e,s,r))&&(ac(t,e,r,n),Us(t,e,r))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=ec(),r=tc(e),s=Bs(n,r);s.tag=1,s.payload=t,void 0!==a&&null!==a&&(s.callback=a),null!==(t=Fs(e,s,r))&&(ac(t,e,r,n),Us(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=ec(),n=tc(e),r=Bs(a,n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Fs(e,r,n))&&(ac(t,e,n,a),Us(t,e,n))}};function rl(e,t,a,n,r,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!on(a,n)||!on(r,s))}function sl(e,t,a){var n=!1,r=Mr,s=t.contextType;return"object"===typeof s&&null!==s?s=ks(s):(r=Or(t)?kr:wr.current,s=(n=null!==(n=t.contextTypes)&&void 0!==n)?jr(e,r):Mr),t=new t(a,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=nl,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function il(e,t,a,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(a,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&nl.enqueueReplaceState(t,t.state,null)}function ll(e,t,a,n){var r=e.stateNode;r.props=a,r.state=e.memoizedState,r.refs={},_s(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=ks(s):(s=Or(t)?kr:wr.current,r.context=jr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(al(e,t,s,a),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&nl.enqueueReplaceState(r,r.state,null),Gs(e,a,r,n),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function ol(e,t){try{var a="",n=t;do{a+=H(n),n=n.return}while(n);var r=a}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function cl(e,t,a){return{value:e,source:null,stack:null!=a?a:null,digest:null!=t?t:null}}function dl(e,t){try{console.error(t.value)}catch(a){setTimeout((function(){throw a}))}}var ul="function"===typeof WeakMap?WeakMap:Map;function hl(e,t,a){(a=Bs(-1,a)).tag=3,a.payload={element:null};var n=t.value;return a.callback=function(){Ko||(Ko=!0,zo=n),dl(0,t)},a}function ml(e,t,a){(a=Bs(-1,a)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var r=t.value;a.payload=function(){return n(r)},a.callback=function(){dl(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(a.callback=function(){dl(0,t),"function"!==typeof n&&(null===Vo?Vo=new Set([this]):Vo.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),a}function gl(e,t,a){var n=e.pingCache;if(null===n){n=e.pingCache=new ul;var r=new Set;n.set(t,r)}else void 0===(r=n.get(t))&&(r=new Set,n.set(t,r));r.has(a)||(r.add(a),e=Ac.bind(null,e,t,a),t.then(e,e))}function pl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function fl(e,t,a,n,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,1===a.tag&&(null===a.alternate?a.tag=17:((t=Bs(-1,1)).tag=2,Fs(a,t,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var vl=E.ReactCurrentOwner,yl=!1;function bl(e,t,a,n){t.child=null===e?Ss(t,null,a,n):Es(t,e.child,a,n)}function El(e,t,a,n,r){a=a.render;var s=t.ref;return Rs(t,r),n=pi(e,t,a,n,s,r),a=fi(),null===e||yl?(rs&&a&&es(t),t.flags|=1,bl(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wl(e,t,r))}function Sl(e,t,a,n,r){if(null===e){var s=a.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==a.compare||void 0!==a.defaultProps?((e=Lc(a.type,null,n,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Nl(e,t,s,n,r))}if(s=e.child,0===(e.lanes&r)){var i=s.memoizedProps;if((a=null!==(a=a.compare)?a:on)(i,n)&&e.ref===t.ref)return Wl(e,t,r)}return t.flags|=1,(e=Ic(s,n)).ref=t.ref,e.return=t,t.child=e}function Nl(e,t,a,n,r){if(null!==e){var s=e.memoizedProps;if(on(s,n)&&e.ref===t.ref){if(yl=!1,t.pendingProps=n=s,0===(e.lanes&r))return t.lanes=e.lanes,Wl(e,t,r);0!==(131072&e.flags)&&(yl=!0)}}return Al(e,t,a,n,r)}function Tl(e,t,a){var n=t.pendingProps,r=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(Io,Oo),Oo|=a;else{if(0===(1073741824&a))return e=null!==s?s.baseLanes|a:a,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cr(Io,Oo),Oo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:a,Cr(Io,Oo),Oo|=n}else null!==s?(n=s.baseLanes|a,t.memoizedState=null):n=a,Cr(Io,Oo),Oo|=n;return bl(e,t,r,a),t.child}function xl(e,t){var a=t.ref;(null===e&&null!==a||null!==e&&e.ref!==a)&&(t.flags|=512,t.flags|=2097152)}function Al(e,t,a,n,r){var s=Or(a)?kr:wr.current;return s=jr(t,s),Rs(t,r),a=pi(e,t,a,n,s,r),n=fi(),null===e||yl?(rs&&n&&es(t),t.flags|=1,bl(e,t,a,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wl(e,t,r))}function Cl(e,t,a,n,r){if(Or(a)){var s=!0;_r(t)}else s=!1;if(Rs(t,r),null===t.stateNode)Gl(e,t),sl(t,a,n),ll(t,a,n,r),n=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var o=i.context,c=a.contextType;"object"===typeof c&&null!==c?c=ks(c):c=jr(t,c=Or(a)?kr:wr.current);var d=a.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==n||o!==c)&&il(t,i,n,c),Ps=!1;var h=t.memoizedState;i.state=h,Gs(t,n,i,r),o=t.memoizedState,l!==n||h!==o||Rr.current||Ps?("function"===typeof d&&(al(t,a,d,n),o=t.memoizedState),(l=Ps||rl(t,a,l,n,h,o,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=o),i.props=n,i.state=o,i.context=c,n=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Ds(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:tl(t.type,l),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(o=a.contextType)&&null!==o?o=ks(o):o=jr(t,o=Or(a)?kr:wr.current);var m=a.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==u||h!==o)&&il(t,i,n,o),Ps=!1,h=t.memoizedState,i.state=h,Gs(t,n,i,r);var g=t.memoizedState;l!==u||h!==g||Rr.current||Ps?("function"===typeof m&&(al(t,a,m,n),g=t.memoizedState),(c=Ps||rl(t,a,c,n,h,g,o)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,g,o),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,g,o)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),i.props=n,i.state=g,i.context=o,n=c):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Ml(e,t,a,n,s,r)}function Ml(e,t,a,n,r,s){xl(e,t);var i=0!==(128&t.flags);if(!n&&!i)return r&&Dr(t,a,!1),Wl(e,t,s);n=t.stateNode,vl.current=t;var l=i&&"function"!==typeof a.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=Es(t,e.child,null,s),t.child=Es(t,null,l,s)):bl(e,t,l,s),t.memoizedState=n.state,r&&Dr(t,a,!0),t.child}function wl(e){var t=e.stateNode;t.pendingContext?Lr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Lr(0,t.context,!1),Xs(e,t.containerInfo)}function Rl(e,t,a,n,r){return ms(),gs(r),t.flags|=256,bl(e,t,a,n),t.child}var kl,jl,Ol,Il,Ll={dehydrated:null,treeContext:null,retryLane:0};function Pl(e){return{baseLanes:e,cachePool:null,transitions:null}}function _l(e,t,a){var n,r=t.pendingProps,i=$s.current,l=!1,o=0!==(128&t.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&0!==(2&i)),n?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Cr($s,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=r.children,e=r.fallback,l?(r=t.mode,l=t.child,o={mode:"hidden",children:o},0===(1&r)&&null!==l?(l.childLanes=0,l.pendingProps=o):l=_c(o,r,0,null),e=Pc(e,r,a,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Pl(a),t.memoizedState=Ll,e):Dl(t,o));if(null!==(i=e.memoizedState)&&null!==(n=i.dehydrated))return function(e,t,a,n,r,i,l){if(a)return 256&t.flags?(t.flags&=-257,Bl(e,t,l,n=cl(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=n.fallback,r=t.mode,n=_c({mode:"visible",children:n.children},r,0,null),(i=Pc(i,r,l,null)).flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,0!==(1&t.mode)&&Es(t,e.child,null,l),t.child.memoizedState=Pl(l),t.memoizedState=Ll,i);if(0===(1&t.mode))return Bl(e,t,l,null);if("$!"===r.data){if(n=r.nextSibling&&r.nextSibling.dataset)var o=n.dgst;return n=o,Bl(e,t,l,n=cl(i=Error(s(419)),n,void 0))}if(o=0!==(l&e.childLanes),yl||o){if(null!==(n=Ro)){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(n.suspendedLanes|l))?0:r)&&r!==i.retryLane&&(i.retryLane=r,Ls(e,r),ac(n,e,r,-1))}return pc(),Bl(e,t,l,n=cl(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Mc.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,ns=cr(r.nextSibling),as=t,rs=!0,ss=null,null!==e&&(Yr[Qr++]=Zr,Yr[Qr++]=Jr,Yr[Qr++]=Xr,Zr=e.id,Jr=e.overflow,Xr=t),t=Dl(t,n.children),t.flags|=4096,t)}(e,t,o,r,n,i,a);if(l){l=r.fallback,o=t.mode,n=(i=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&o)&&t.child!==i?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ic(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==n?l=Ic(n,l):(l=Pc(l,o,a,null)).flags|=2,l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,o=null===(o=e.child.memoizedState)?Pl(a):{baseLanes:o.baseLanes|a,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~a,t.memoizedState=Ll,r}return e=(l=e.child).sibling,r=Ic(l,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=a),r.return=t,r.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=r,t.memoizedState=null,r}function Dl(e,t){return(t=_c({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bl(e,t,a,n){return null!==n&&gs(n),Es(t,e.child,null,a),(e=Dl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fl(e,t,a){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ws(e.return,t,a)}function Ul(e,t,a,n,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=a,s.tailMode=r)}function Hl(e,t,a){var n=t.pendingProps,r=n.revealOrder,s=n.tail;if(bl(e,t,n.children,a),0!==(2&(n=$s.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fl(e,a,t);else if(19===e.tag)Fl(e,a,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Cr($s,n),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(a=t.child,r=null;null!==a;)null!==(e=a.alternate)&&null===ei(e)&&(r=a),a=a.sibling;null===(a=r)?(r=t.child,t.child=null):(r=a.sibling,a.sibling=null),Ul(t,!1,r,a,s);break;case"backwards":for(a=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ei(e)){t.child=r;break}e=r.sibling,r.sibling=a,a=r,r=e}Ul(t,!0,a,null,s);break;case"together":Ul(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gl(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wl(e,t,a){if(null!==e&&(t.dependencies=e.dependencies),_o|=t.lanes,0===(a&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(a=Ic(e=t.child,e.pendingProps),t.child=a,a.return=t;null!==e.sibling;)e=e.sibling,(a=a.sibling=Ic(e,e.pendingProps)).return=t;a.sibling=null}return t.child}function Kl(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;null!==t;)null!==t.alternate&&(a=t),t=t.sibling;null===a?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;null!==a;)null!==a.alternate&&(n=a),a=a.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function zl(e){var t=null!==e.alternate&&e.alternate.child===e.child,a=0,n=0;if(t)for(var r=e.child;null!==r;)a|=r.lanes|r.childLanes,n|=14680064&r.subtreeFlags,n|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)a|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function Vl(e,t,a){var n=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zl(t),null;case 1:case 17:return Or(t.type)&&Ir(),zl(t),null;case 3:return n=t.stateNode,Zs(),Ar(Rr),Ar(wr),ai(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),jl(e,t),zl(t),null;case 5:qs(t);var r=Qs(Ys.current);if(a=t.type,null!==e&&null!=t.stateNode)Ol(e,t,a,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(s(166));return zl(t),null}if(e=Qs(zs.current),us(t)){n=t.stateNode,a=t.type;var i=t.memoizedProps;switch(n[hr]=t,n[mr]=i,e=0!==(1&t.mode),a){case"dialog":Fn("cancel",n),Fn("close",n);break;case"iframe":case"object":case"embed":Fn("load",n);break;case"video":case"audio":for(r=0;r<Pn.length;r++)Fn(Pn[r],n);break;case"source":Fn("error",n);break;case"img":case"image":case"link":Fn("error",n),Fn("load",n);break;case"details":Fn("toggle",n);break;case"input":Z(n,i),Fn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Fn("invalid",n);break;case"textarea":re(n,i),Fn("invalid",n)}for(var o in ye(a,i),r=null,i)if(i.hasOwnProperty(o)){var c=i[o];"children"===o?"string"===typeof c?n.textContent!==c&&(!0!==i.suppressHydrationWarning&&qn(n.textContent,c,e),r=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&qn(n.textContent,c,e),r=["children",""+c]):l.hasOwnProperty(o)&&null!=c&&"onScroll"===o&&Fn("scroll",n)}switch(a){case"input":V(n),$(n,i,!0);break;case"textarea":V(n),ie(n);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(n.onclick=$n)}n=r,t.updateQueue=n,null!==n&&(t.flags|=4)}else{o=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(a)),"http://www.w3.org/1999/xhtml"===e?"script"===a?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=o.createElement(a,{is:n.is}):(e=o.createElement(a),"select"===a&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,a),e[hr]=t,e[mr]=n,kl(e,t,!1,!1),t.stateNode=e;e:{switch(o=be(a,n),a){case"dialog":Fn("cancel",e),Fn("close",e),r=n;break;case"iframe":case"object":case"embed":Fn("load",e),r=n;break;case"video":case"audio":for(r=0;r<Pn.length;r++)Fn(Pn[r],e);r=n;break;case"source":Fn("error",e),r=n;break;case"img":case"image":case"link":Fn("error",e),Fn("load",e),r=n;break;case"details":Fn("toggle",e),r=n;break;case"input":Z(e,n),r=X(e,n),Fn("invalid",e);break;case"option":default:r=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},r=D({},n,{value:void 0}),Fn("invalid",e);break;case"textarea":re(e,n),r=ne(e,n),Fn("invalid",e)}for(i in ye(a,r),c=r)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?fe(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==a||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Fn("scroll",e):null!=d&&b(e,i,d,o))}switch(a){case"input":V(e),$(e,n,!1);break;case"textarea":V(e),ie(e);break;case"option":null!=n.value&&e.setAttribute("value",""+K(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?ae(e,!!n.multiple,i,!1):null!=n.defaultValue&&ae(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=$n)}switch(a){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return zl(t),null;case 6:if(e&&null!=t.stateNode)Il(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(a=Qs(Ys.current),Qs(zs.current),us(t)){if(n=t.stateNode,a=t.memoizedProps,n[hr]=t,(i=n.nodeValue!==a)&&null!==(e=as))switch(e.tag){case 3:qn(n.nodeValue,a,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&qn(n.nodeValue,a,0!==(1&e.mode))}i&&(t.flags|=4)}else(n=(9===a.nodeType?a:a.ownerDocument).createTextNode(n))[hr]=t,t.stateNode=n}return zl(t),null;case 13:if(Ar($s),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==ns&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ms(),t.flags|=98560,i=!1;else if(i=us(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[hr]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;zl(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=a,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$s.current)?0===Lo&&(Lo=3):pc())),null!==t.updateQueue&&(t.flags|=4),zl(t),null);case 4:return Zs(),jl(e,t),null===e&&Gn(t.stateNode.containerInfo),zl(t),null;case 10:return Ms(t.type._context),zl(t),null;case 19:if(Ar($s),null===(i=t.memoizedState))return zl(t),null;if(n=0!==(128&t.flags),null===(o=i.rendering))if(n)Kl(i,!1);else{if(0!==Lo||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ei(e))){for(t.flags|=128,Kl(i,!1),null!==(n=o.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=a,a=t.child;null!==a;)e=n,(i=a).flags&=14680066,null===(o=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Cr($s,1&$s.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>Go&&(t.flags|=128,n=!0,Kl(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ei(o))){if(t.flags|=128,n=!0,null!==(a=e.updateQueue)&&(t.updateQueue=a,t.flags|=4),Kl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!rs)return zl(t),null}else 2*Je()-i.renderingStartTime>Go&&1073741824!==a&&(t.flags|=128,n=!0,Kl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(a=i.last)?a.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,a=$s.current,Cr($s,n?1&a|2:1&a),t):(zl(t),null);case 22:case 23:return uc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Oo)&&(zl(t),6&t.subtreeFlags&&(t.flags|=8192)):zl(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Yl(e,t){switch(ts(t),t.tag){case 1:return Or(t.type)&&Ir(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zs(),Ar(Rr),Ar(wr),ai(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return qs(t),null;case 13:if(Ar($s),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ar($s),null;case 4:return Zs(),null;case 10:return Ms(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}kl=function(e,t){for(var a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},jl=function(){},Ol=function(e,t,a,n){var r=e.memoizedProps;if(r!==n){e=t.stateNode,Qs(zs.current);var s,i=null;switch(a){case"input":r=X(e,r),n=X(e,n),i=[];break;case"select":r=D({},r,{value:void 0}),n=D({},n,{value:void 0}),i=[];break;case"textarea":r=ne(e,r),n=ne(e,n),i=[];break;default:"function"!==typeof r.onClick&&"function"===typeof n.onClick&&(e.onclick=$n)}for(d in ye(a,n),a=null,r)if(!n.hasOwnProperty(d)&&r.hasOwnProperty(d)&&null!=r[d])if("style"===d){var o=r[d];for(s in o)o.hasOwnProperty(s)&&(a||(a={}),a[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(o=null!=r?r[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(null!=c||null!=o))if("style"===d)if(o){for(s in o)!o.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(a||(a={}),a[s]="");for(s in c)c.hasOwnProperty(s)&&o[s]!==c[s]&&(a||(a={}),a[s]=c[s])}else a||(i||(i=[]),i.push(d,a)),a=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,o=o?o.__html:void 0,null!=c&&o!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fn("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}a&&(i=i||[]).push("style",a);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Il=function(e,t,a,n){a!==n&&(t.flags|=4)};var Ql=!1,Xl=!1,Zl="function"===typeof WeakSet?WeakSet:Set,Jl=null;function ql(e,t){var a=e.ref;if(null!==a)if("function"===typeof a)try{a(null)}catch(n){xc(e,t,n)}else a.current=null}function $l(e,t,a){try{a()}catch(n){xc(e,t,n)}}var eo=!1;function to(e,t,a){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&$l(t,a,s)}r=r.next}while(r!==n)}}function ao(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var a=t=t.next;do{if((a.tag&e)===e){var n=a.create;a.destroy=n()}a=a.next}while(a!==t)}}function no(e){var t=e.ref;if(null!==t){var a=e.stateNode;e.tag,e=a,"function"===typeof t?t(e):t.current=e}}function ro(e){var t=e.alternate;null!==t&&(e.alternate=null,ro(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[mr],delete t[pr],delete t[fr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function so(e){return 5===e.tag||3===e.tag||4===e.tag}function io(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||so(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lo(e,t,a){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===a.nodeType?a.parentNode.insertBefore(e,t):a.insertBefore(e,t):(8===a.nodeType?(t=a.parentNode).insertBefore(e,a):(t=a).appendChild(e),null!==(a=a._reactRootContainer)&&void 0!==a||null!==t.onclick||(t.onclick=$n));else if(4!==n&&null!==(e=e.child))for(lo(e,t,a),e=e.sibling;null!==e;)lo(e,t,a),e=e.sibling}function oo(e,t,a){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(4!==n&&null!==(e=e.child))for(oo(e,t,a),e=e.sibling;null!==e;)oo(e,t,a),e=e.sibling}var co=null,uo=!1;function ho(e,t,a){for(a=a.child;null!==a;)mo(e,t,a),a=a.sibling}function mo(e,t,a){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,a)}catch(l){}switch(a.tag){case 5:Xl||ql(a,t);case 6:var n=co,r=uo;co=null,ho(e,t,a),uo=r,null!==(co=n)&&(uo?(e=co,a=a.stateNode,8===e.nodeType?e.parentNode.removeChild(a):e.removeChild(a)):co.removeChild(a.stateNode));break;case 18:null!==co&&(uo?(e=co,a=a.stateNode,8===e.nodeType?or(e.parentNode,a):1===e.nodeType&&or(e,a),Gt(e)):or(co,a.stateNode));break;case 4:n=co,r=uo,co=a.stateNode.containerInfo,uo=!0,ho(e,t,a),co=n,uo=r;break;case 0:case 11:case 14:case 15:if(!Xl&&(null!==(n=a.updateQueue)&&null!==(n=n.lastEffect))){r=n=n.next;do{var s=r,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&$l(a,t,i),r=r.next}while(r!==n)}ho(e,t,a);break;case 1:if(!Xl&&(ql(a,t),"function"===typeof(n=a.stateNode).componentWillUnmount))try{n.props=a.memoizedProps,n.state=a.memoizedState,n.componentWillUnmount()}catch(l){xc(a,t,l)}ho(e,t,a);break;case 21:ho(e,t,a);break;case 22:1&a.mode?(Xl=(n=Xl)||null!==a.memoizedState,ho(e,t,a),Xl=n):ho(e,t,a);break;default:ho(e,t,a)}}function go(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var a=e.stateNode;null===a&&(a=e.stateNode=new Zl),t.forEach((function(t){var n=wc.bind(null,e,t);a.has(t)||(a.add(t),t.then(n,n))}))}}function po(e,t){var a=t.deletions;if(null!==a)for(var n=0;n<a.length;n++){var r=a[n];try{var i=e,l=t,o=l;e:for(;null!==o;){switch(o.tag){case 5:co=o.stateNode,uo=!1;break e;case 3:case 4:co=o.stateNode.containerInfo,uo=!0;break e}o=o.return}if(null===co)throw Error(s(160));mo(i,l,r),co=null,uo=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(d){xc(r,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fo(t,e),t=t.sibling}function fo(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(po(t,e),vo(e),4&n){try{to(3,e,e.return),ao(3,e)}catch(f){xc(e,e.return,f)}try{to(5,e,e.return)}catch(f){xc(e,e.return,f)}}break;case 1:po(t,e),vo(e),512&n&&null!==a&&ql(a,a.return);break;case 5:if(po(t,e),vo(e),512&n&&null!==a&&ql(a,a.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(f){xc(e,e.return,f)}}if(4&n&&null!=(r=e.stateNode)){var i=e.memoizedProps,l=null!==a?a.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===o&&"radio"===i.type&&null!=i.name&&J(r,i),be(o,l);var d=be(o,i);for(l=0;l<c.length;l+=2){var u=c[l],h=c[l+1];"style"===u?fe(r,h):"dangerouslySetInnerHTML"===u?ue(r,h):"children"===u?he(r,h):b(r,u,h,d)}switch(o){case"input":q(r,i);break;case"textarea":se(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var g=i.value;null!=g?ae(r,!!i.multiple,g,!1):m!==!!i.multiple&&(null!=i.defaultValue?ae(r,!!i.multiple,i.defaultValue,!0):ae(r,!!i.multiple,i.multiple?[]:"",!1))}r[mr]=i}catch(f){xc(e,e.return,f)}}break;case 6:if(po(t,e),vo(e),4&n){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(f){xc(e,e.return,f)}}break;case 3:if(po(t,e),vo(e),4&n&&null!==a&&a.memoizedState.isDehydrated)try{Gt(t.containerInfo)}catch(f){xc(e,e.return,f)}break;case 4:default:po(t,e),vo(e);break;case 13:po(t,e),vo(e),8192&(r=e.child).flags&&(i=null!==r.memoizedState,r.stateNode.isHidden=i,!i||null!==r.alternate&&null!==r.alternate.memoizedState||(Ho=Je())),4&n&&go(e);break;case 22:if(u=null!==a&&null!==a.memoizedState,1&e.mode?(Xl=(d=Xl)||u,po(t,e),Xl=d):po(t,e),vo(e),8192&n){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Jl=e,u=e.child;null!==u;){for(h=Jl=u;null!==Jl;){switch(g=(m=Jl).child,m.tag){case 0:case 11:case 14:case 15:to(4,m,m.return);break;case 1:ql(m,m.return);var p=m.stateNode;if("function"===typeof p.componentWillUnmount){n=m,a=m.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(f){xc(n,a,f)}}break;case 5:ql(m,m.return);break;case 22:if(null!==m.memoizedState){So(h);continue}}null!==g?(g.return=m,Jl=g):So(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{r=h.stateNode,d?"function"===typeof(i=r.style).setProperty?i.setProperty("display","none","important"):i.display="none":(o=h.stateNode,l=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,o.style.display=pe("display",l))}catch(f){xc(e,e.return,f)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(f){xc(e,e.return,f)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:po(t,e),vo(e),4&n&&go(e);case 21:}}function vo(e){var t=e.flags;if(2&t){try{e:{for(var a=e.return;null!==a;){if(so(a)){var n=a;break e}a=a.return}throw Error(s(160))}switch(n.tag){case 5:var r=n.stateNode;32&n.flags&&(he(r,""),n.flags&=-33),oo(e,io(e),r);break;case 3:case 4:var i=n.stateNode.containerInfo;lo(e,io(e),i);break;default:throw Error(s(161))}}catch(l){xc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yo(e,t,a){Jl=e,bo(e,t,a)}function bo(e,t,a){for(var n=0!==(1&e.mode);null!==Jl;){var r=Jl,s=r.child;if(22===r.tag&&n){var i=null!==r.memoizedState||Ql;if(!i){var l=r.alternate,o=null!==l&&null!==l.memoizedState||Xl;l=Ql;var c=Xl;if(Ql=i,(Xl=o)&&!c)for(Jl=r;null!==Jl;)o=(i=Jl).child,22===i.tag&&null!==i.memoizedState?No(r):null!==o?(o.return=i,Jl=o):No(r);for(;null!==s;)Jl=s,bo(s,t,a),s=s.sibling;Jl=r,Ql=l,Xl=c}Eo(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Jl=s):Eo(e)}}function Eo(e){for(;null!==Jl;){var t=Jl;if(0!==(8772&t.flags)){var a=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xl||ao(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Xl)if(null===a)n.componentDidMount();else{var r=t.elementType===t.type?a.memoizedProps:tl(t.type,a.memoizedProps);n.componentDidUpdate(r,a.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ws(t,i,n);break;case 3:var l=t.updateQueue;if(null!==l){if(a=null,null!==t.child)switch(t.child.tag){case 5:case 1:a=t.child.stateNode}Ws(t,l,a)}break;case 5:var o=t.stateNode;if(null===a&&4&t.flags){a=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&a.focus();break;case"img":c.src&&(a.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Gt(h)}}}break;default:throw Error(s(163))}Xl||512&t.flags&&no(t)}catch(m){xc(t,t.return,m)}}if(t===e){Jl=null;break}if(null!==(a=t.sibling)){a.return=t.return,Jl=a;break}Jl=t.return}}function So(e){for(;null!==Jl;){var t=Jl;if(t===e){Jl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Jl=a;break}Jl=t.return}}function No(e){for(;null!==Jl;){var t=Jl;try{switch(t.tag){case 0:case 11:case 15:var a=t.return;try{ao(4,t)}catch(o){xc(t,a,o)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var r=t.return;try{n.componentDidMount()}catch(o){xc(t,r,o)}}var s=t.return;try{no(t)}catch(o){xc(t,s,o)}break;case 5:var i=t.return;try{no(t)}catch(o){xc(t,i,o)}}}catch(o){xc(t,t.return,o)}if(t===e){Jl=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Jl=l;break}Jl=t.return}}var To,xo=Math.ceil,Ao=E.ReactCurrentDispatcher,Co=E.ReactCurrentOwner,Mo=E.ReactCurrentBatchConfig,wo=0,Ro=null,ko=null,jo=0,Oo=0,Io=xr(0),Lo=0,Po=null,_o=0,Do=0,Bo=0,Fo=null,Uo=null,Ho=0,Go=1/0,Wo=null,Ko=!1,zo=null,Vo=null,Yo=!1,Qo=null,Xo=0,Zo=0,Jo=null,qo=-1,$o=0;function ec(){return 0!==(6&wo)?Je():-1!==qo?qo:qo=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&wo)&&0!==jo?jo&-jo:null!==ps.transition?(0===$o&&($o=pt()),$o):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function ac(e,t,a,n){if(50<Zo)throw Zo=0,Jo=null,Error(s(185));vt(e,a,n),0!==(2&wo)&&e===Ro||(e===Ro&&(0===(2&wo)&&(Do|=a),4===Lo&&lc(e,jo)),nc(e,n),1===a&&0===wo&&0===(1&t.mode)&&(Go=Je()+500,Fr&&Gr()))}function nc(e,t){var a=e.callbackNode;!function(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),l=1<<i,o=r[i];-1===o?0!==(l&a)&&0===(l&n)||(r[i]=mt(l,t)):o<=t&&(e.expiredLanes|=l),s&=~l}}(e,t);var n=ht(e,e===Ro?jo:0);if(0===n)null!==a&&Qe(a),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=a&&Qe(a),1===t)0===e.tag?function(e){Fr=!0,Hr(e)}(oc.bind(null,e)):Hr(oc.bind(null,e)),ir((function(){0===(6&wo)&&Gr()})),a=null;else{switch(Et(n)){case 1:a=$e;break;case 4:a=et;break;case 16:default:a=tt;break;case 536870912:a=nt}a=Rc(a,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=a}}function rc(e,t){if(qo=-1,$o=0,0!==(6&wo))throw Error(s(327));var a=e.callbackNode;if(Nc()&&e.callbackNode!==a)return null;var n=ht(e,e===Ro?jo:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=fc(e,n);else{t=n;var r=wo;wo|=2;var i=gc();for(Ro===e&&jo===t||(Wo=null,Go=Je()+500,hc(e,t));;)try{yc();break}catch(o){mc(e,o)}Cs(),Ao.current=i,wo=r,null!==ko?t=0:(Ro=null,jo=0,t=Lo)}if(0!==t){if(2===t&&(0!==(r=gt(e))&&(n=r,t=sc(e,r))),1===t)throw a=Po,hc(e,0),lc(e,n),nc(e,Je()),a;if(6===t)lc(e,n);else{if(r=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var a=t.updateQueue;if(null!==a&&null!==(a=a.stores))for(var n=0;n<a.length;n++){var r=a[n],s=r.getSnapshot;r=r.value;try{if(!ln(s(),r))return!1}catch(l){return!1}}}if(a=t.child,16384&t.subtreeFlags&&null!==a)a.return=t,t=a;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=fc(e,n))&&(0!==(i=gt(e))&&(n=i,t=sc(e,i))),1===t))throw a=Po,hc(e,0),lc(e,n),nc(e,Je()),a;switch(e.finishedWork=r,e.finishedLanes=n,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sc(e,Uo,Wo);break;case 3:if(lc(e,n),(130023424&n)===n&&10<(t=Ho+500-Je())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=nr(Sc.bind(null,e,Uo,Wo),t);break}Sc(e,Uo,Wo);break;case 4:if(lc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,r=-1;0<n;){var l=31-it(n);i=1<<l,(l=t[l])>r&&(r=l),n&=~i}if(n=r,10<(n=(120>(n=Je()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*xo(n/1960))-n)){e.timeoutHandle=nr(Sc.bind(null,e,Uo,Wo),n);break}Sc(e,Uo,Wo);break;default:throw Error(s(329))}}}return nc(e,Je()),e.callbackNode===a?rc.bind(null,e):null}function sc(e,t){var a=Fo;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=fc(e,t))&&(t=Uo,Uo=a,null!==t&&ic(t)),e}function ic(e){null===Uo?Uo=e:Uo.push.apply(Uo,e)}function lc(e,t){for(t&=~Bo,t&=~Do,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var a=31-it(t),n=1<<a;e[a]=-1,t&=~n}}function oc(e){if(0!==(6&wo))throw Error(s(327));Nc();var t=ht(e,0);if(0===(1&t))return nc(e,Je()),null;var a=fc(e,t);if(0!==e.tag&&2===a){var n=gt(e);0!==n&&(t=n,a=sc(e,n))}if(1===a)throw a=Po,hc(e,0),lc(e,t),nc(e,Je()),a;if(6===a)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Uo,Wo),nc(e,Je()),null}function cc(e,t){var a=wo;wo|=1;try{return e(t)}finally{0===(wo=a)&&(Go=Je()+500,Fr&&Gr())}}function dc(e){null!==Qo&&0===Qo.tag&&0===(6&wo)&&Nc();var t=wo;wo|=1;var a=Mo.transition,n=bt;try{if(Mo.transition=null,bt=1,e)return e()}finally{bt=n,Mo.transition=a,0===(6&(wo=t))&&Gr()}}function uc(){Oo=Io.current,Ar(Io)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(-1!==a&&(e.timeoutHandle=-1,rr(a)),null!==ko)for(a=ko.return;null!==a;){var n=a;switch(ts(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Ir();break;case 3:Zs(),Ar(Rr),Ar(wr),ai();break;case 5:qs(n);break;case 4:Zs();break;case 13:case 19:Ar($s);break;case 10:Ms(n.type._context);break;case 22:case 23:uc()}a=a.return}if(Ro=e,ko=e=Ic(e.current,null),jo=Oo=t,Lo=0,Po=null,Bo=Do=_o=0,Uo=Fo=null,null!==js){for(t=0;t<js.length;t++)if(null!==(n=(a=js[t]).interleaved)){a.interleaved=null;var r=n.next,s=a.pending;if(null!==s){var i=s.next;s.next=r,n.next=i}a.pending=n}js=null}return e}function mc(e,t){for(;;){var a=ko;try{if(Cs(),ni.current=Ji,ci){for(var n=ii.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}ci=!1}if(si=0,oi=li=ii=null,di=!1,ui=0,Co.current=null,null===a||null===a.return){Lo=1,Po=t,ko=null;break}e:{var i=e,l=a.return,o=a,c=t;if(t=jo,o.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=o,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=pl(l);if(null!==g){g.flags&=-257,fl(g,l,o,0,t),1&g.mode&&gl(i,d,t),c=d;var p=(t=g).updateQueue;if(null===p){var f=new Set;f.add(c),t.updateQueue=f}else p.add(c);break e}if(0===(1&t)){gl(i,d,t),pc();break e}c=Error(s(426))}else if(rs&&1&o.mode){var v=pl(l);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),fl(v,l,o,0,t),gs(ol(c,o));break e}}i=c=ol(c,o),4!==Lo&&(Lo=2),null===Fo?Fo=[i]:Fo.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Hs(i,hl(0,c,t));break e;case 1:o=c;var y=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Vo||!Vo.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Hs(i,ml(i,o,t));break e}}i=i.return}while(null!==i)}Ec(a)}catch(E){t=E,ko===a&&null!==a&&(ko=a=a.return);continue}break}}function gc(){var e=Ao.current;return Ao.current=Ji,null===e?Ji:e}function pc(){0!==Lo&&3!==Lo&&2!==Lo||(Lo=4),null===Ro||0===(268435455&_o)&&0===(268435455&Do)||lc(Ro,jo)}function fc(e,t){var a=wo;wo|=2;var n=gc();for(Ro===e&&jo===t||(Wo=null,hc(e,t));;)try{vc();break}catch(r){mc(e,r)}if(Cs(),wo=a,Ao.current=n,null!==ko)throw Error(s(261));return Ro=null,jo=0,Lo}function vc(){for(;null!==ko;)bc(ko)}function yc(){for(;null!==ko&&!Xe();)bc(ko)}function bc(e){var t=To(e.alternate,e,Oo);e.memoizedProps=e.pendingProps,null===t?Ec(e):ko=t,Co.current=null}function Ec(e){var t=e;do{var a=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(a=Vl(a,t,Oo)))return void(ko=a)}else{if(null!==(a=Yl(a,t)))return a.flags&=32767,void(ko=a);if(null===e)return Lo=6,void(ko=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(ko=t);ko=t=e}while(null!==t);0===Lo&&(Lo=5)}function Sc(e,t,a){var n=bt,r=Mo.transition;try{Mo.transition=null,bt=1,function(e,t,a,n){do{Nc()}while(null!==Qo);if(0!==(6&wo))throw Error(s(327));a=e.finishedWork;var r=e.finishedLanes;if(null===a)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=a.lanes|a.childLanes;if(function(e,t){var a=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<a;){var r=31-it(a),s=1<<r;t[r]=0,n[r]=-1,e[r]=-1,a&=~s}}(e,i),e===Ro&&(ko=Ro=null,jo=0),0===(2064&a.subtreeFlags)&&0===(2064&a.flags)||Yo||(Yo=!0,Rc(tt,(function(){return Nc(),null}))),i=0!==(15990&a.flags),0!==(15990&a.subtreeFlags)||i){i=Mo.transition,Mo.transition=null;var l=bt;bt=1;var o=wo;wo|=4,Co.current=null,function(e,t){if(er=Kt,mn(e=hn())){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(a=(a=e.ownerDocument)&&a.defaultView||window).getSelection&&a.getSelection();if(n&&0!==n.rangeCount){a=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{a.nodeType,i.nodeType}catch(S){a=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var g;h!==a||0!==r&&3!==h.nodeType||(o=l+r),h!==i||0!==n&&3!==h.nodeType||(c=l+n),3===h.nodeType&&(l+=h.nodeValue.length),null!==(g=h.firstChild);)m=h,h=g;for(;;){if(h===e)break t;if(m===a&&++d===r&&(o=l),m===i&&++u===n&&(c=l),null!==(g=h.nextSibling))break;m=(h=m).parentNode}h=g}a=-1===o||-1===c?null:{start:o,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(tr={focusedElem:e,selectionRange:a},Kt=!1,Jl=t;null!==Jl;)if(e=(t=Jl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jl=e;else for(;null!==Jl;){t=Jl;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var f=p.memoizedProps,v=p.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?f:tl(t.type,f),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var E=t.stateNode.containerInfo;1===E.nodeType?E.textContent="":9===E.nodeType&&E.documentElement&&E.removeChild(E.documentElement);break;default:throw Error(s(163))}}catch(S){xc(t,t.return,S)}if(null!==(e=t.sibling)){e.return=t.return,Jl=e;break}Jl=t.return}p=eo,eo=!1}(e,a),fo(a,e),gn(tr),Kt=!!er,tr=er=null,e.current=a,yo(a,e,r),Ze(),wo=o,bt=l,Mo.transition=i}else e.current=a;if(Yo&&(Yo=!1,Qo=e,Xo=r),i=e.pendingLanes,0===i&&(Vo=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(a.stateNode),nc(e,Je()),null!==t)for(n=e.onRecoverableError,a=0;a<t.length;a++)r=t[a],n(r.value,{componentStack:r.stack,digest:r.digest});if(Ko)throw Ko=!1,e=zo,zo=null,e;0!==(1&Xo)&&0!==e.tag&&Nc(),i=e.pendingLanes,0!==(1&i)?e===Jo?Zo++:(Zo=0,Jo=e):Zo=0,Gr()}(e,t,a,n)}finally{Mo.transition=r,bt=n}return null}function Nc(){if(null!==Qo){var e=Et(Xo),t=Mo.transition,a=bt;try{if(Mo.transition=null,bt=16>e?16:e,null===Qo)var n=!1;else{if(e=Qo,Qo=null,Xo=0,0!==(6&wo))throw Error(s(331));var r=wo;for(wo|=4,Jl=e.current;null!==Jl;){var i=Jl,l=i.child;if(0!==(16&Jl.flags)){var o=i.deletions;if(null!==o){for(var c=0;c<o.length;c++){var d=o[c];for(Jl=d;null!==Jl;){var u=Jl;switch(u.tag){case 0:case 11:case 15:to(8,u,i)}var h=u.child;if(null!==h)h.return=u,Jl=h;else for(;null!==Jl;){var m=(u=Jl).sibling,g=u.return;if(ro(u),u===d){Jl=null;break}if(null!==m){m.return=g,Jl=m;break}Jl=g}}}var p=i.alternate;if(null!==p){var f=p.child;if(null!==f){p.child=null;do{var v=f.sibling;f.sibling=null,f=v}while(null!==f)}}Jl=i}}if(0!==(2064&i.subtreeFlags)&&null!==l)l.return=i,Jl=l;else e:for(;null!==Jl;){if(0!==(2048&(i=Jl).flags))switch(i.tag){case 0:case 11:case 15:to(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Jl=y;break e}Jl=i.return}}var b=e.current;for(Jl=b;null!==Jl;){var E=(l=Jl).child;if(0!==(2064&l.subtreeFlags)&&null!==E)E.return=l,Jl=E;else e:for(l=b;null!==Jl;){if(0!==(2048&(o=Jl).flags))try{switch(o.tag){case 0:case 11:case 15:ao(9,o)}}catch(N){xc(o,o.return,N)}if(o===l){Jl=null;break e}var S=o.sibling;if(null!==S){S.return=o.return,Jl=S;break e}Jl=o.return}}if(wo=r,Gr(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(N){}n=!0}return n}finally{bt=a,Mo.transition=t}}return!1}function Tc(e,t,a){e=Fs(e,t=hl(0,t=ol(a,t),1),1),t=ec(),null!==e&&(vt(e,1,t),nc(e,t))}function xc(e,t,a){if(3===e.tag)Tc(e,e,a);else for(;null!==t;){if(3===t.tag){Tc(t,e,a);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Vo||!Vo.has(n))){t=Fs(t,e=ml(t,e=ol(a,e),1),1),e=ec(),null!==t&&(vt(t,1,e),nc(t,e));break}}t=t.return}}function Ac(e,t,a){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&a,Ro===e&&(jo&a)===a&&(4===Lo||3===Lo&&(130023424&jo)===jo&&500>Je()-Ho?hc(e,0):Bo|=a),nc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var a=ec();null!==(e=Ls(e,t))&&(vt(e,t,a),nc(e,a))}function Mc(e){var t=e.memoizedState,a=0;null!==t&&(a=t.retryLane),Cc(e,a)}function wc(e,t){var a=0;switch(e.tag){case 13:var n=e.stateNode,r=e.memoizedState;null!==r&&(a=r.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(s(314))}null!==n&&n.delete(t),Cc(e,a)}function Rc(e,t){return Ye(e,t)}function kc(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,a,n){return new kc(e,t,a,n)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var a=e.alternate;return null===a?((a=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=14680064&e.flags,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function Lc(e,t,a,n,r,i){var l=2;if(n=e,"function"===typeof e)Oc(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case T:return Pc(a.children,r,i,t);case x:l=8,r|=8;break;case A:return(e=jc(12,a,t,2|r)).elementType=A,e.lanes=i,e;case R:return(e=jc(13,a,t,r)).elementType=R,e.lanes=i,e;case k:return(e=jc(19,a,t,r)).elementType=k,e.lanes=i,e;case I:return _c(a,r,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:l=10;break e;case M:l=9;break e;case w:l=11;break e;case j:l=14;break e;case O:l=16,n=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=jc(l,a,t,r)).elementType=e,t.type=n,t.lanes=i,t}function Pc(e,t,a,n){return(e=jc(7,e,n,t)).lanes=a,e}function _c(e,t,a,n){return(e=jc(22,e,n,t)).elementType=I,e.lanes=a,e.stateNode={isHidden:!1},e}function Dc(e,t,a){return(e=jc(6,e,null,t)).lanes=a,e}function Bc(e,t,a){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,a,n,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ft(0),this.expirationTimes=ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ft(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uc(e,t,a,n,r,s,i,l,o){return e=new Fc(e,t,a,l,o),1===t?(t=1,!0===s&&(t|=8)):t=0,s=jc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},_s(s),e}function Hc(e){if(!e)return Mr;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Or(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var a=e.type;if(Or(a))return Pr(e,a,t)}return t}function Gc(e,t,a,n,r,s,i,l,o){return(e=Uc(a,n,!0,e,0,s,0,l,o)).context=Hc(null),a=e.current,(s=Bs(n=ec(),r=tc(a))).callback=void 0!==t&&null!==t?t:null,Fs(a,s,r),e.current.lanes=r,vt(e,r,n),nc(e,n),e}function Wc(e,t,a,n){var r=t.current,s=ec(),i=tc(r);return a=Hc(a),null===t.context?t.context=a:t.pendingContext=a,(t=Bs(s,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Fs(r,t,i))&&(ac(e,r,i,s),Us(e,r,i)),i}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function zc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var a=e.retryLane;e.retryLane=0!==a&&a<t?a:t}}function Vc(e,t){zc(e,t),(e=e.alternate)&&zc(e,t)}To=function(e,t,a){if(null!==e)if(e.memoizedProps!==t.pendingProps||Rr.current)yl=!0;else{if(0===(e.lanes&a)&&0===(128&t.flags))return yl=!1,function(e,t,a){switch(t.tag){case 3:wl(t),ms();break;case 5:Js(t);break;case 1:Or(t.type)&&_r(t);break;case 4:Xs(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,r=t.memoizedProps.value;Cr(Ns,n._currentValue),n._currentValue=r;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Cr($s,1&$s.current),t.flags|=128,null):0!==(a&t.child.childLanes)?_l(e,t,a):(Cr($s,1&$s.current),null!==(e=Wl(e,t,a))?e.sibling:null);Cr($s,1&$s.current);break;case 19:if(n=0!==(a&t.childLanes),0!==(128&e.flags)){if(n)return Hl(e,t,a);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Cr($s,$s.current),n)break;return null;case 22:case 23:return t.lanes=0,Tl(e,t,a)}return Wl(e,t,a)}(e,t,a);yl=0!==(131072&e.flags)}else yl=!1,rs&&0!==(1048576&t.flags)&&$r(t,Vr,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Gl(e,t),e=t.pendingProps;var r=jr(t,wr.current);Rs(t,a),r=pi(null,t,n,e,r,a);var i=fi();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Or(n)?(i=!0,_r(t)):i=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,_s(t),r.updater=nl,t.stateNode=r,r._reactInternals=t,ll(t,n,e,a),t=Ml(null,t,n,!0,i,a)):(t.tag=0,rs&&i&&es(t),bl(null,t,r,a),t=t.child),t;case 16:n=t.elementType;e:{switch(Gl(e,t),e=t.pendingProps,n=(r=n._init)(n._payload),t.type=n,r=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===w)return 11;if(e===j)return 14}return 2}(n),e=tl(n,e),r){case 0:t=Al(null,t,n,e,a);break e;case 1:t=Cl(null,t,n,e,a);break e;case 11:t=El(null,t,n,e,a);break e;case 14:t=Sl(null,t,n,tl(n.type,e),a);break e}throw Error(s(306,n,""))}return t;case 0:return n=t.type,r=t.pendingProps,Al(e,t,n,r=t.elementType===n?r:tl(n,r),a);case 1:return n=t.type,r=t.pendingProps,Cl(e,t,n,r=t.elementType===n?r:tl(n,r),a);case 3:e:{if(wl(t),null===e)throw Error(s(387));n=t.pendingProps,r=(i=t.memoizedState).element,Ds(e,t),Gs(t,n,null,a);var l=t.memoizedState;if(n=l.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Rl(e,t,n,a,r=ol(Error(s(423)),t));break e}if(n!==r){t=Rl(e,t,n,a,r=ol(Error(s(424)),t));break e}for(ns=cr(t.stateNode.containerInfo.firstChild),as=t,rs=!0,ss=null,a=Ss(t,null,n,a),t.child=a;a;)a.flags=-3&a.flags|4096,a=a.sibling}else{if(ms(),n===r){t=Wl(e,t,a);break e}bl(e,t,n,a)}t=t.child}return t;case 5:return Js(t),null===e&&cs(t),n=t.type,r=t.pendingProps,i=null!==e?e.memoizedProps:null,l=r.children,ar(n,r)?l=null:null!==i&&ar(n,i)&&(t.flags|=32),xl(e,t),bl(e,t,l,a),t.child;case 6:return null===e&&cs(t),null;case 13:return _l(e,t,a);case 4:return Xs(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Es(t,null,n,a):bl(e,t,n,a),t.child;case 11:return n=t.type,r=t.pendingProps,El(e,t,n,r=t.elementType===n?r:tl(n,r),a);case 7:return bl(e,t,t.pendingProps,a),t.child;case 8:case 12:return bl(e,t,t.pendingProps.children,a),t.child;case 10:e:{if(n=t.type._context,r=t.pendingProps,i=t.memoizedProps,l=r.value,Cr(Ns,n._currentValue),n._currentValue=l,null!==i)if(ln(i.value,l)){if(i.children===r.children&&!Rr.current){t=Wl(e,t,a);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var o=i.dependencies;if(null!==o){l=i.child;for(var c=o.firstContext;null!==c;){if(c.context===n){if(1===i.tag){(c=Bs(-1,a&-a)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=a,null!==(c=i.alternate)&&(c.lanes|=a),ws(i.return,a,t),o.lanes|=a;break}c=c.next}}else if(10===i.tag)l=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(s(341));l.lanes|=a,null!==(o=l.alternate)&&(o.lanes|=a),ws(l,a,t),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===t){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}bl(e,t,r.children,a),t=t.child}return t;case 9:return r=t.type,n=t.pendingProps.children,Rs(t,a),n=n(r=ks(r)),t.flags|=1,bl(e,t,n,a),t.child;case 14:return r=tl(n=t.type,t.pendingProps),Sl(e,t,n,r=tl(n.type,r),a);case 15:return Nl(e,t,t.type,t.pendingProps,a);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:tl(n,r),Gl(e,t),t.tag=1,Or(n)?(e=!0,_r(t)):e=!1,Rs(t,a),sl(t,n,r),ll(t,n,r,a),Ml(null,t,n,!0,e,a);case 19:return Hl(e,t,a);case 22:return Tl(e,t,a)}throw Error(s(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function qc(){}function $c(e,t,a,n,r){var s=a._reactRootContainer;if(s){var i=s;if("function"===typeof r){var l=r;r=function(){var e=Kc(i);l.call(e)}}Wc(t,i,e,r)}else i=function(e,t,a,n,r){if(r){if("function"===typeof n){var s=n;n=function(){var e=Kc(i);s.call(e)}}var i=Gc(t,n,e,0,null,!1,0,"",qc);return e._reactRootContainer=i,e[gr]=i.current,Gn(8===e.nodeType?e.parentNode:e),dc(),i}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof n){var l=n;n=function(){var e=Kc(o);l.call(e)}}var o=Uc(e,0,!1,null,0,!1,0,"",qc);return e._reactRootContainer=o,e[gr]=o.current,Gn(8===e.nodeType?e.parentNode:e),dc((function(){Wc(t,o,a,n)})),o}(a,t,e,r,n);return Kc(i)}Xc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Xc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Wc(null,e,null,null)})),t[gr]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var a=0;a<It.length&&0!==t&&t<It[a].priority;a++);It.splice(a,0,e),0===a&&Dt(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var a=ut(t.pendingLanes);0!==a&&(yt(t,1|a),nc(t,Je()),0===(6&wo)&&(Go=Je()+500,Gr()))}break;case 13:dc((function(){var t=Ls(e,1);if(null!==t){var a=ec();ac(t,e,1,a)}})),Vc(e,1)}},Nt=function(e){if(13===e.tag){var t=Ls(e,134217728);if(null!==t)ac(t,e,134217728,ec());Vc(e,134217728)}},Tt=function(e){if(13===e.tag){var t=tc(e),a=Ls(e,t);if(null!==a)ac(a,e,t,ec());Vc(e,t)}},xt=function(){return bt},At=function(e,t){var a=bt;try{return bt=e,t()}finally{bt=a}},Ne=function(e,t,a){switch(t){case"input":if(q(e,a),t=a.name,"radio"===a.type&&null!=t){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var r=Sr(n);if(!r)throw Error(s(90));Y(n),q(n,r)}}}break;case"textarea":se(e,a);break;case"select":null!=(t=a.value)&&ae(e,!!a.multiple,t,!1)}},we=cc,Re=dc;var ed={usingClientEntryPoint:!1,Events:[br,Er,Sr,Ce,Me,cc]},td={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ad={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=ze(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{rt=nd.inject(ad),st=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(s(200));return function(e,t,a){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==n?null:""+n,children:e,containerInfo:t,implementation:a}}(e,t,null,a)},t.createRoot=function(e,t){if(!Zc(e))throw Error(s(299));var a=!1,n="",r=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(a=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Uc(e,1,!1,null,0,a,0,n,r),e[gr]=t.current,Gn(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=ze(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,a){if(!Jc(t))throw Error(s(200));return $c(null,e,t,!0,a)},t.hydrateRoot=function(e,t,a){if(!Zc(e))throw Error(s(405));var n=null!=a&&a.hydratedSources||null,r=!1,i="",l=Yc;if(null!==a&&void 0!==a&&(!0===a.unstable_strictMode&&(r=!0),void 0!==a.identifierPrefix&&(i=a.identifierPrefix),void 0!==a.onRecoverableError&&(l=a.onRecoverableError)),t=Gc(t,null,e,1,null!=a?a:null,r,0,i,l),e[gr]=t.current,Gn(e),n)for(e=0;e<n.length;e++)r=(r=(a=n[e])._getVersion)(a._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[a,r]:t.mutableSourceEagerHydrationData.push(a,r);return new Xc(t)},t.render=function(e,t,a){if(!Jc(t))throw Error(s(200));return $c(null,e,t,!1,a)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){$c(null,null,e,!1,(function(){e._reactRootContainer=null,e[gr]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,a,n){if(!Jc(a))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return $c(e,t,a,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},4391:(e,t,a)=>{var n=a(7950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},7950:(e,t,a)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=a(2730)},1153:(e,t,a)=>{var n=a(5043),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,a){var n,s={},c=null,d=null;for(n in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,n)&&!o.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:r,type:e,key:c,ref:d,props:s,_owner:l.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},4202:(e,t)=>{var a=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,f={};function v(e,t,a){this.props=e,this.context=t,this.refs=f,this.updater=a||g}function y(){}function b(e,t,a){this.props=e,this.context=t,this.refs=f,this.updater=a||g}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var E=b.prototype=new y;E.constructor=b,p(E,v.prototype),E.isPureReactComponent=!0;var S=Array.isArray,N=Object.prototype.hasOwnProperty,T={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var r,s={},i=null,l=null;if(null!=t)for(r in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)N.call(t,r)&&!x.hasOwnProperty(r)&&(s[r]=t[r]);var o=arguments.length-2;if(1===o)s.children=n;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===s[r]&&(s[r]=o[r]);return{$$typeof:a,type:e,key:i,ref:l,props:s,_owner:T.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var M=/\/+/g;function w(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,r,s,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var o=!1;if(null===e)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case a:case n:o=!0}}if(o)return i=i(o=e),e=""===s?"."+w(o,0):s,S(i)?(r="",null!=e&&(r=e.replace(M,"$&/")+"/"),R(i,t,r,"",(function(e){return e}))):null!=i&&(C(i)&&(i=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(M,"$&/")+"/")+e)),t.push(i)),1;if(o=0,s=""===s?".":s+":",S(e))for(var c=0;c<e.length;c++){var d=s+w(l=e[c],c);o+=R(l,t,r,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(l=e.next()).done;)o+=R(l=l.value,t,r,d=s+w(l,c++),i);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function k(e,t,a){if(null==e)return e;var n=[],r=0;return R(e,n,"","",(function(e){return t.call(a,e,r++)})),n}function j(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},I={transition:null},L={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:I,ReactCurrentOwner:T};function P(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:k,forEach:function(e,t,a){k(e,(function(){t.apply(this,arguments)}),a)},count:function(e){var t=0;return k(e,(function(){t++})),t},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=i,t.PureComponent=b,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=p({},e.props),s=e.key,i=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=T.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)N.call(t,c)&&!x.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==o?o[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:a,type:e.type,key:s,ref:i,props:r,_owner:l}},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=P,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,a){return O.current.useImperativeHandle(e,t,a)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,a){return O.current.useReducer(e,t,a)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,a){return O.current.useSyncExternalStore(e,t,a)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},5043:(e,t,a)=>{e.exports=a(4202)},579:(e,t,a)=>{e.exports=a(1153)},7234:(e,t)=>{function a(e,t){var a=e.length;e.push(t);e:for(;0<a;){var n=a-1>>>1,r=e[n];if(!(0<s(r,t)))break e;e[n]=t,e[a]=r,a=n}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],a=e.pop();if(a!==t){e[0]=a;e:for(var n=0,r=e.length,i=r>>>1;n<i;){var l=2*(n+1)-1,o=e[l],c=l+1,d=e[c];if(0>s(o,a))c<r&&0>s(d,o)?(e[n]=d,e[c]=a,n=c):(e[n]=o,e[l]=a,n=l);else{if(!(c<r&&0>s(d,a)))break e;e[n]=d,e[c]=a,n=c}}}return t}function s(e,t){var a=e.sortIndex-t.sortIndex;return 0!==a?a:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,m=3,g=!1,p=!1,f=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function E(e){for(var t=n(d);null!==t;){if(null===t.callback)r(d);else{if(!(t.startTime<=e))break;r(d),t.sortIndex=t.expirationTime,a(c,t)}t=n(d)}}function S(e){if(f=!1,E(e),!p)if(null!==n(c))p=!0,I(N);else{var t=n(d);null!==t&&L(S,t.startTime-e)}}function N(e,a){p=!1,f&&(f=!1,y(C),C=-1),g=!0;var s=m;try{for(E(a),h=n(c);null!==h&&(!(h.expirationTime>a)||e&&!R());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var l=i(h.expirationTime<=a);a=t.unstable_now(),"function"===typeof l?h.callback=l:h===n(c)&&r(c),E(a)}else r(c);h=n(c)}if(null!==h)var o=!0;else{var u=n(d);null!==u&&L(S,u.startTime-a),o=!1}return o}finally{h=null,m=s,g=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var T,x=!1,A=null,C=-1,M=5,w=-1;function R(){return!(t.unstable_now()-w<M)}function k(){if(null!==A){var e=t.unstable_now();w=e;var a=!0;try{a=A(!0,e)}finally{a?T():(x=!1,A=null)}}else x=!1}if("function"===typeof b)T=function(){b(k)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,O=j.port2;j.port1.onmessage=k,T=function(){O.postMessage(null)}}else T=function(){v(k,0)};function I(e){A=e,x||(x=!0,T())}function L(e,a){C=v((function(){e(t.unstable_now())}),a)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||g||(p=!0,I(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var a=m;m=t;try{return e()}finally{m=a}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var a=m;m=e;try{return t()}finally{m=a}},t.unstable_scheduleCallback=function(e,r,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:s,expirationTime:l=s+l,sortIndex:-1},s>i?(e.sortIndex=s,a(d,e),null===n(c)&&e===n(d)&&(f?(y(C),C=-1):f=!0,L(S,s-i))):(e.sortIndex=l,a(c,e),p||g||(p=!0,I(N))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=m;return function(){var a=m;m=t;try{return e.apply(this,arguments)}finally{m=a}}}},8853:(e,t,a)=>{e.exports=a(7234)}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,a),s.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.p="/";var n=a(5043),r=a(4391);class s{constructor(){this.nodes=void 0,this.edges=void 0,this.nodes=new Map,this.edges=new Map}addNode(e){this.nodes.set(e.name,e),this.edges.set(e.name,new Map)}addEdge(e,t,a){var n;null===(n=this.edges.get(e))||void 0===n||n.set(t,a)}getNode(e){return this.nodes.get(e)}}let i=function(e){return e[e.MAIN=0]="MAIN",e[e.START=1]="START",e}({}),l=function(e){return e[e.GEAR=0]="GEAR",e[e.PLOT=1]="PLOT",e[e.NONE=2]="NONE",e}({}),o=function(e){return e[e.HATE=-1]="HATE",e[e.CONFLICTED=0]="CONFLICTED",e[e.LIKE=1]="LIKE",e[e.NEUTRAL=100]="NEUTRAL",e}({}),c=function(e){return e.COMBAT="combat",e.MAGIC="magic",e.TOOLS="tools",e}({}),d=function(e){return e.RACE="race",e.GEAR="gear",e.CHARACTER_CLASS="character_class",e.ALL="all",e.NPC="npc",e}({});const u="encounter",h="location",m="character",g="player",p="message",f="tutorial",v="toc",y="group",b="campaign",E="player recruitment",S="character assignment";let N=function(e){return e.PLAYER="player",e.CHARACTER="character",e.HELPER="helper",e.SYSTEM="system",e.DM="dm",e}({}),T=function(e){return e.LOCATION_INTRO="location_intro",e.INTRO_EVENTS="intro_events",e.INTRO_MAIN="intro_main",e.MAIN_EVENTS="main_events",e.INTRO_EXIT="intro_exit",e.EXIT_EVENTS="exit_events",e.EXIT="exit",e}({}),x=function(e){return e.LOCATION="location",e.PLAYERS="players",e.QUESTS="quests",e.RUMOR="rumor",e.PLOT="plot",e.DM="dm",e.ALL="all",e.MAGIC_ITEM="magic-item",e.FORESHADOWING="foreshadowing",e.FORESHADOWING_RANDOM="foreshadowing-random",e.BACKSTORY="backstory",e.PLOT_HOOK="plot-hook",e.EXPOSITION="exposition",e}({}),A=function(e){return e.COMEDIC="comedic",e.HEROIC="heroic",e.SERIOUS="serious",e.DRAMATIC="dramatic",e.GRIM="grim",e.ROMANTIC="romantic",e.FANTASY="fantasy",e.HORROR="horror",e.NONE="none",e.length="length",e}({}),C=function(e){return e[e.CURRENT_LOCATION=0]="CURRENT_LOCATION",e[e.BRANCH_LOCATION=1]="BRANCH_LOCATION",e[e.MAGIC_ITEM=2]="MAGIC_ITEM",e[e.PLOT_HOOK=3]="PLOT_HOOK",e[e.CHARACTER_BACKSTORY=4]="CHARACTER_BACKSTORY",e[e.CHARACTER_BACKSTORY_PROGRESS=5]="CHARACTER_BACKSTORY_PROGRESS",e[e.AMBUSH=6]="AMBUSH",e}({}),M=function(e){return e[e.INDEX=0]="INDEX",e[e.DANGER=1]="DANGER",e[e.STRESS=2]="STRESS",e[e.SCORE=3]="SCORE",e}({}),w=function(e){return e[e.TREASURE=0]="TREASURE",e[e.XP=1]="XP",e[e.ITEM=2]="ITEM",e[e.PLOT_HOOK=3]="PLOT_HOOK",e[e.HEALING=4]="HEALING",e[e.BACKSTORY=5]="BACKSTORY",e[e.TOOLS=6]="TOOLS",e[e.MAGIC=7]="MAGIC",e[e.BACKSTORY_PROGRESS=8]="BACKSTORY_PROGRESS",e}({}),R=function(e){return e.ADD_TENSION="add_tension",e.ADD_ENJOYMENT="add_enjoyment",e.ADD_INVOLVEMENT="add_involvement",e.ADD_HAPPINESS="add_happiness",e.ADD_REWARDS="add_rewards",e.REPLENISH_MAGIC="replenish_magic",e.REPLENISH_TOOLS="replenish_tools",e.ADD_BACKSTORY="add_backstory",e.HEAL="heal",e.RESURRECT="resurrect",e.INJURE="add_injury",e.USE_TOOLS="use_tools",e.USE_MAGIC="use_magic",e.ADD_TREASURE="add_treasure",e.ADD_DM_POINT="add_dm_point",e.ADD_PLAYER_POINT="add_player_point",e.ADD_SCORE="add_score",e.NONE="none",e}({}),k=function(e){return e.TEMPLE="temple",e.SHOP="shop",e.TAVERN="tavern",e.MARKETPLACE="marketplace",e.GUILD_HALL="guild_hall",e.BARRACKS="barracks",e.LIBRARY="library",e.FIRE="fire",e.CONFRONTATION="confrontation",e}({}),j=function(e){return e.SHORT="short",e.MEDIUM="medium",e.LONG="long",e}({}),O=function(e){return e.EXPLORE_CURRENT_LOCATION="explore_current_location",e.EXPLORE_UPCOMING_LOCATION="explore_upcoming_location",e.CHARACTER_BACKSTORY="character_backstory",e.AMBUSH="ambush",e.CAMP="camp",e.TRAVEL="travel",e.TRADERS="traders",e.SIDE_QUEST="side_quest",e}({});const I=a.p+"static/media/player_0.4a3651c609911ede6b72.png",L=a.p+"static/media/player_1.e45ee653acbed2e81514.png",P=a.p+"static/media/player_2.5356a740be72474dde56.png",_=a.p+"static/media/player_3.e970725dca65db94df39.png",D=a.p+"static/media/player_4.98676765df467966984d.png",B=a.p+"static/media/player_5.8e9f672d492a6cd896a0.png",F=a.p+"static/media/player_6.1afa8fa2ab715ade57d5.png",U=a.p+"static/media/player_7.23786cb18222b198a480.png",H=a.p+"static/media/player_8.2b3036cbda4d0af349b0.png",G=a.p+"static/media/player_9.fd514f539cd296b8caac.png",W=a.p+"static/media/player_10.fd514f539cd296b8caac.png",K=a.p+"static/media/human_1.9d3f8a08cea097d68269.png",z=a.p+"static/media/human_2.0e1a803f8d735c4da762.png",V=a.p+"static/media/dwarf_1.c503bf6080db0c9aca15.png",Y=a.p+"static/media/dwarf_2.325f93f2c9d02a323c0d.png",Q=a.p+"static/media/elf_1.3c415e4adb872f30841d.png",X=a.p+"static/media/elf_2.b487365606e6211f3988.png",Z=a.p+"static/media/halfOrc_1.cf7fa4b64f0730c1b02d.png",J=a.p+"static/media/halfOrc_2.70c9be869bbf78847eed.png",q=a.p+"static/media/halfElf_1.903a6f9a31de5c5fa48f.png",$=a.p+"static/media/halfElf_2.24de139aa431732d5366.png",ee=a.p+"static/media/halfling_1.64e3bf1b974cc3baae68.png",te=a.p+"static/media/halfling_2.aa9af491102918fccd9d.png",ae=a.p+"static/media/combat_humans.89c356e733541dcb180a.png",ne=a.p+"static/media/combat_cultists.d0ab5cb2741624fd0092.png",re=a.p+"static/media/combat_dragons.a2989854bcbd0162365d.png",se=a.p+"static/media/combat_dwarves.13c40c678e72bab59ea4.png",ie=a.p+"static/media/combat_elves.d6fd31d11c3108bdb449.png",le=a.p+"static/media/combat_goblins.9301d270487837bd4748.png",oe=a.p+"static/media/combat_half_orcs.9cf980a920a41feb200e.png",ce=a.p+"static/media/combat_halflings.98aa638546add30dfbe1.png",de=a.p+"static/media/combat_orcs.c7be566ba65f106f6b1e.png",ue=a.p+"static/media/combat_undead.4790a552af33cacad7df.png",he=a.p+"static/media/combat_half_elves.0a2d9509713fd51f9e4f.png",me=a.p+"static/media/combat_bandits.89c356e733541dcb180a.png",ge=a.p+"static/media/combat_beasts.9502aa1dc2917797980d.png",pe=a.p+"static/media/combat_deer.062749db0e7b6f72ddd8.png",fe=a.p+"static/media/combat_bear.2f83335d479faa0bebf0.png",ve=a.p+"static/media/title.4674d0f8292f8293550e.png",ye=a.p+"static/media/not-implemented.6e4dd23f00eef76570e5.png",be=a.p+"static/media/campaign.0ae804324ee4a18dce29.png",Ee=a.p+"static/media/gameroom.4e3df83064899f2fae6a.png",Se=a.p+"static/media/cult_of_the_deep_1.b409ccc25b3fadce874d.png",Ne=a.p+"static/media/trolls_1.90f3ef3168a7f77abc26.png",Te=a.p+"static/media/millstone_mystery.0d0e978724bf0aa95d99.png",xe=a.p+"static/media/theoldmill.b86706aaeacca8bbc241.png",Ae=a.p+"static/media/mm_l_quarry.eb852bbab8e4cc3a8ca9.png",Ce=a.p+"static/media/mm_l_road.d480c4606222b9aea225.png",Me=a.p+"static/media/mm_l_entrance.5679770273c0862c881c.png",we=a.p+"static/media/mm_l_tunnel2.5976fb89c60f0f68d3fd.png",Re=a.p+"static/media/mm_l_bridge.1c1ce30fcaf2e4507aae.png",ke=a.p+"static/media/mm_l_beach.31082008cdfcff16b189.png",je=a.p+"static/media/mm_l_townville.4e54b180a6ee89c987d3.png",Oe=a.p+"static/media/cd_l_underthewell.98e28442096e4aaac62e.png",Ie=a.p+"static/media/cd_l_lakeside.d5b62d5defccbb95ed8c.png",Le=a.p+"static/media/cd_l_lakesidebrewery.0c7b83c1dde61fb344f1.png",Pe=a.p+"static/media/cd_l_lakesidecliffs.38f0ef7278d542cc991d.png",_e=a.p+"static/media/cd_l_sagewoodtavern.4775f3613dcbcab24ca8.png",De=a.p+"static/media/cd_l_sagewoodbrewery.64e3abb3d3e74cd872b9.png",Be=a.p+"static/media/millstone.c7ca463bca0eb320cbb6.png",Fe=a.p+"static/media/mm_e_road.cf271ba5815a2537fb24.png",Ue=a.p+"static/media/mm_e_quarry.960c581913f776a57abc.png",He=a.p+"static/media/mm_e_tunnels.15628af37650c0bc9ee1.png",Ge=a.p+"static/media/mm_e_bandits.0006aeb7ebe035ec77e8.png",We=a.p+"static/media/mm_e_beach.061cc3fe7e572a537013.png",Ke=a.p+"static/media/mm_e_shipwreck.afc3a7d9ae6e260cd095.png",ze=a.p+"static/media/mm_e_fire.698dc46d87465784cb37.png",Ve=a.p+"static/media/mm_e_townville.1676d8a8fc3226700c83.png",Ye=a.p+"static/media/cd_e_breweryexploration.661326c17535663b1c7d.png",Qe=a.p+"static/media/cd_e_breweryfight.64e3abb3d3e74cd872b9.png",Xe=a.p+"static/media/cd_e_bythelake.acbab6311ed84da30246.png",Ze=a.p+"static/media/cd_e_lakesidecliffs.814e190d9e33026b9850.png",Je=a.p+"static/media/cd_e_underthewell.f9feee6b1e0f48ffc561.png",qe=a.p+"static/media/cd_e_sagewoodtavern4.15b73aec91294164e7f6.png",$e=a.p+"static/media/cd_e_sagewoodbrewery.0c7b83c1dde61fb344f1.png",et=a.p+"static/media/mm_l_mountain_camp.0e6a014b058a4d52ef36.png",tt=a.p+"static/media/mm_l_elven_town.d06fa2be497a4b619bb1.png",at=a.p+"static/media/mm_e_mountain_path.29406517a21f942f7933.png",nt=a.p+"static/media/mm_e_pointed.a6ea5f2cb1e4d2eafc2c.png",rt=a.p+"static/media/mm_l_witch.96f8ffed5a5f387fc3a3.png",st=a.p+"static/media/mm_e_cabin2.8c2df121554dfb223ae1.png",it=a.p+"static/media/mm_e_dwarves.d018647284ec26e3fb20.png",lt=a.p+"static/media/mm_e_fairlight.2bd3e8dc56115ac0a5f8.png",ot=a.p+"static/media/mm_l_fairlight.efa637cfd018bf65ffd1.png",ct=a.p+"static/media/imp.7010d4c2da611a1b1ef2.png",dt=a.p+"static/media/dm.6eddb4c9c933accb4321.png",ut=a.p+"static/media/die.006fb464b16c2368884a.png",ht=a.p+"static/media/imp.c1264900e624e8b84161.png",mt=a.p+"static/media/event_roleplay.f96d28d31976009a6d50.png",gt=a.p+"static/media/event_town.da8414c457dc0f3f3e38.png",pt=a.p+"static/media/event_challenge.b4711d0b921afc3ad481.png",ft=a.p+"static/media/event_trap.708f8a4b30441fdb40a7.png",vt=a.p+"static/media/event_exposition.52e794b142c4be513074.png";var yt=a(579);const bt={player_0:I,player_1:L,player_2:P,player_3:_,player_4:D,player_5:B,player_6:F,player_7:U,player_8:H,player_9:G,player_10:W,human_1:K,human_2:z,dwarf_1:V,dwarf_2:Y,elf_1:Q,elf_2:X,halfOrc_1:Z,halfOrc_2:J,halfElf_1:q,halfElf_2:$,halfling_1:ee,halfling_2:te,main_menu:ve,default_bg:ye,campaign_bg:be,gameroom_bg:Ee,cult_of_the_deep_1:Se,trolls_1:Ne,millstone_mystery_1:Te,mountain_mystery:Te,mm_l_oldMill:xe,mm_l_quarry:Ae,mm_l_road:Ce,mm_l_entrance:Me,mm_l_tunnel:we,mm_l_bridge:Re,mm_l_beach:ke,mm_l_townville:je,mm_e_millstone:Be,mm_e_road:Fe,mm_e_quarry:Ue,mm_e_tunnels:He,mm_e_bandits:Ge,mm_e_beach:We,mm_e_shipwreck:Ke,mm_e_fire:ze,mm_e_townville:Ve,cd_l_underthewell:Oe,cd_l_lakeside:Ie,cd_l_lakesidebrewery:Le,cd_l_lakesidecliffs:Pe,cd_l_sagewoodtavern:_e,cd_l_sagewoodbrewery:De,cd_e_breweryexploration:Ye,cd_e_breweryfight:Qe,cd_e_bythelake:Xe,cd_e_lakesidecliffs:Ze,cd_e_underthewell:Je,cd_e_sagewoodtavern:qe,cd_e_sagewoodbrewery:$e,mm_l_mountain_camp:et,mm_l_elven_town:tt,mm_e_up_the_mountain:at,mm_e_pointed:nt,mm_l_witch:rt,mm_e_cabin:st,mm_l_tunnel23:we,mm_e_dwarves:it,mm_e_fairlight:lt,mm_l_fairlight:ot,tutorial_mascot:ht,chat_imp:ct,chat_dm:dt,chat_die:ut,number_die_4:ut,number_die_6:ut,number_die_8:ut,number_die_10:ut,number_die_12:ut,number_die_20:ut,number_die_100:ut,combat_human:ae,combat_cultists:ne,combat_dragons:re,combat_dwarves:se,combat_elves:ie,combat_goblins:le,combat_half_orcs:oe,combat_halflings:ce,combat_humans:ae,combat_orcs:de,combat_undead:ue,combat_half_elves:he,combat_bandits:me,combat_beasts:ge,combat_deer:pe,combat_bear:fe,icon_treasure1:"data:image/png;base64,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",icon_dmpoint:"data:image/png;base64,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",icon_playerpoint:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAABg2lDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw1AUhU9TpSIVBwuKiGSoTnZREcdahSJUCLVCqw4mL/2DJg1Jiouj4Fpw8Gex6uDirKuDqyAI/oC4C06KLlLifUmhRYwXHu/jvHcO990HCI0K06yuOKDptplOJsRsblUMvSKIQfAalZllzElSCr71dY8A3+9iPMv/3p/Vp+YtBgRE4jgzTJt4g3hm0zY47xNHWElWic+JJ0xqkPiR64rHb5yLLgs8M2Jm0vPEEWKx2MFKB7OSqRFPE0dVTad8IeuxynmLs1apsVaf/IXhvL6yzHVaI0hiEUuQIEJBDWVUYCNGu06KhTSdJ3z8w65fIpdCrjIYORZQhQbZ9YP/we/ZWoWpSS8pnAC6XxznYwwI7QLNuuN8HztO8wQIPgNXettfbQCzn6TX21r0COjfBi6u25qyB1zuAENPhmzKrhSkJRQKwPsZfVMOGLgFete8ubXOcfoAZGhWqRvg4BAYL1L2us+7ezrn9u+d1vx+ACwscormaRQ4AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH6QMXARkDdDpniQAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAALjSURBVHja7Z09UiNBDEal3tlTkHMPas+Ag429CUcg5wok6wts+Q4U5yA3l4CtIXIVRQHln1br656n0IEt6c2nltpT3WYYhmHdmKs7eL3ZzRHfu11fOEASEt8bKAeCFhwHghYcB4QWGAeEFhgHhBYYB4QWGO8dxFeJUPOnKZAWwdd6AtV9deUAozsaRd9dLZisSVklHldxXmVvKTs2z3ZYdZMvK07PclIVRHbM3tqxXkBkxe+tnOkVROtcODC0oDgwtKBMvQ512baPr3Y35hFPwOgwInPlwNCCUihTWrF7LdJLhlEzfw4MLShFRaqUrw8l6xSqwKivlGkUuY+icFdTR+ZLEhExHRtPGeGpqpm87P97imFSKi3H/vhSFvKsP+MKMLSgULLEyldBHVpdHAoRU8k0gjr2/s02+6M9/rjfXL4o+/od4GmkJ9nNZzN7tbVJvYDNHNLxOlhGCKI3KN/5wKJOycJOBsLs0b5soRBKFgaQjmaRaSkgfv/d3b643an7OY22oM82l9Xm+f/Hz8/ZS4nKxWfbKEMo5H1QK3tmDVliewqQjKd1tgcZhSz1zJL39u/Pxa/WHR8KEWtqACLWYU6kX6vVB4iZ3ayffl7Z1av8pH692c0j7/juY9smz07DKWSkh4ZFvTcgzCPtyhUKoWRhVYBQttqUKxTSc8lCJfHqQCG9L+qoJFYdZmbl2CkXKHEwKFmjzCGoJC5Xxey0zTmgxOSIkiVmZ5+XxRvy9dRR5bwsSlfdnHDEnwiMT4/4A0oujOqL+pLLV63YOUg5GcZBBykDJQeGWeBbJ3tHOYy/Usmq+cNcV3F4TrjQRQjGwUBqSpQrjypceRRRN7kUrAKQiMWMa/POBBLVYXCx5BlAIts+rl4VDaQFnKEuJ24VWG04w1/f3TLQY4Jf9AX3ConItrA7qACTu86FdzSjgolqOJq1mKOAie78mvf8vYJpNR+lTsfqcDKGVJl9JBU42Vs4b3dv8ih1MV7NAAAAAElFTkSuQmCC",event_combat:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAABDlBMVEX///88PE9/kb/w9///w2L6iD46Okzz+v8wMEX/xWI4N0g0NEiClcT/yGM3N0v/iz0qKkFZYYD2/f8jIzw/QFSjo6oxNU54iLOpqbAyOU8pKUFsbHlBQ1gtM05ra3g2OE95e4lOTl/m7PVaW2snNlD19faIiJJjY3EmL07g4ONcSE21tbtxdIJHSmKZe1eVXkhPVG9fU1LlsV/1vGHyhT9gaoxjVlJUTFGNc1Z5ZVSQkJlIRFDPz9Ozs7jr6+zOztJjS0yigVi6klrSo10YGDW8wcvX3eZteqFrW1P7l0ePXEngfUGHb1Xhrl94UkvBcES3w96SocnO1+ututjUeELKnlyrZkelZEcZKU2xjFoIOIbIAAASu0lEQVR4nO2dfV/ayBbHjWJITImRIGoEAlKIrmgVu6JgtdrFbbvtdvfetbt9/2/kzmPIw0wehgSy98P5Z7eKyXxzzm/Omaewtrayla1sZStb2cpWtrKVrWxludqp0+rvvps+nPSW3RKu9U7upu92+4fOqchfT3/RdU1RDMs0TanT6o93Tx9O7nu9JfP2evcnD6f74/5ht2aalmUoiqbrv0wFLjVWpJnJCBbQao1uq90f7z9k3vQ4u9vf7bdb3YaOqACW7Gmf0he44q6X0Muqa4DWOswcIdoOTUAFvCUzW6XsClzyHSLUFINcOXBppZs5RJQ5wedNnrShaKg17wSuOTXAH06f76anu+P2YbfT0Eh06DpGbC1QkYcYUEddA+gblFqn2xr0d/end89T8DtDpKt5sMAfTqvlchXaxtHR8/PDFCh84HSIFxcXqARQ6jgD2ONNn5+PjjZQu0DzoCsMkX7hBBAqp9UN18plRFveqLY14sXMUdjWIh5sVzfKGKtcdptVPQW/tU4ELtszoYA9hDNzdOJFJ3MYllEN6g6rMVXYJZpCigE+1PoswqMOJNQXpUUUovBucueIRTgGEWUJXbkmS1qbSQhuqY37xmICFQEqbcihMAmRZoQu3dUlvcUgLD9Dhe6vtZVFBCrSoDJY24dqey4zCA914F2ha4O/1LuMh1ZGnde0Wl0EIgZskx5zyiDcQJ4Qunhfk3RW5Ffh4zTA4yxjxMMctUhCFAaOAgOHEVJHHaAmkaINF6a1o/BTq6KKFQZMuZ2zFjHgAOSG8jMssMYsQtBfKGOhy0NXKYzIh9ImziWBmlcB52DAKnYVCMZBmLAM+z2hshSMDznarsLA7+Kfk0DNJ2mQEMV3qjqwQ2EQwn5PqGgDZRtH21XQO7tPk2oxYzhoVIOEcADTBYPwQbRoY5Rt1EyvInLrUVueEN0g6jfDHV95Klq0ra3dW8yyjaRD9+c5IZI0MbsNJyHin9+LEerM3qsczEy5aNFNEz5fMUSDfKuLEfZQogkRolre18fmkDRmaWIWOuyEWAVpW24IPl3YZw44D82XJzMPVMevQUR4BEJKYYQU6IH0riBha5YVvDgDWOf7f0wDNSPAljdNuPeVJFZCLDvCRdvaWhv633sxPNzvyuHElGnS8KcJlxDfF4+APT8HlYDWFrxTH2YgcB86kfE8PR0Pug2Z9Syr2WmRajB0BxA7cqPT6u9P744oaXkD9odiZSmeTwQZ6Oh5uj8edAwTzkTh6Ty5G6pXM9OiE0gTNEqOuujOcObWMEyjMxjvT59BfoS5S6wsxfOJcrdhADItME+phREzShqhNOECaoHZRDjnZjS6Ohqsihmsh6TgPKkso58wEY35tcjWIASEv5C3Qs2B3Z4hMqcP7c7yk21tbclS42JnZwsidvII1FY4TSDAjQ704NbFzsWZBNvhJzXuBG93T+ICXFJqnF3s/Pzr3t4raBgxBy0y04Qbols76O57e7/+DEgbNfjAkSliJQ2wfRMB7gCydXjtdWJcxDlH/dEaBIBuA2BjAOkOQjRFZQhsFyE21t1LxyPOkTTCpRoJ0SAgbcU6zFySKTb8JbaPOpvaHgcxUy0ySjXswQ4bcH2vBgGNuQApYoOHyE8aqe90GKfBECDyoDUnINEiQAxeP1aLYoCcNMEFnC9EvYg1HiIrUAW0yCnVuBokITq/BxHiArTIL9U4nUw2GnQRLUEtJk4aidNE9iFKEKMDde4CbokadBGtPAOVlyY28k0TAcRoLc5VwMWWaiENNrIHnCNpxGpx6RqktiuoxbikkbZUIyGaPaB40ohetllSqcZBzCFpLK1U4yBmXsAVIE0EEK3UBVxkGc4d0S+iVOMgZlrABRdf4kI041KNg2iKaZGVNAqTJliIWRRwvDSxNA26iBkVcIKlWp4adBEzGfUXpFTjIGaQNPhpYqkapJa6gAuN+lOP6NdzK9XYNq8WuSN6jgYXkiZYiKJaFEwTi+hkPIjptegmjcKVahxE4UCNWXxZZpoIIIoVcLqmpU0TC9egiyiWNKRClmpRiKkLOPAr1oiep8EFp4kAoligSlq4Fl3GiD4RoljS0B1/P1qsNBFAFCzgWl7EoqUJFmL6ZRuPF5cxq5YKUXQGjiIWMU0EEEULOIxYZA26iKJTxRCx2BqkJlzAbZSLV6qxTXjZZqMQI/okJjzqdwpYqrFNcNkGnbctbJrwm2gBV8hSjW2CSUOSi5wm/CaoRfmi+BqkJrBsA0N764wVosXzIDRBLfoQC1OqsU1w2caLWFQNUhMs4GaIxdUgtTkDtdghik1w2QYhFq5UY5tg0gCIr4ofotgEC7itsyKWamwTHEzJ8LeFD1FsogVcodOE3/YVIS0KHzpfgqF3n6Tfd6OLvd1iCdbCZ23Sa1FbzPtu5ja0PigLjvqL+/a7mR3i/LYlNgO36JekCRhao9+6ePXzluAM3LIB4gx7EAxrCeIiTtss1FxAD2JqLS4bIso8gC5i3qdtFmpUg+sBxP8bLfo86AvULDZrFsBCgPGB+u9KGi1/iP7/BSoTECLKkYg5vrpAxO4euPpghCiyvTN0GDnLpNF7ED2cHmtt0+xwEHmA62fkQHl2Wux1LbOdE6ABhcNEdNghuo4PW8vRgZpOiz24pqrkgog3NGkdxun+6BDd2smwgOvh12PkgUh2bLG8GB2i8E0ImRVwPfr+j+wREaBdZyFyelESomh9MKsCDoWoZNs5IKL71W/Pm+FA5WrwzAXMKi9iwOb5LWyGkSkimj6rfyxVHo9RVHkQ4zRIkMQLOA8gCtHj84r6ESJac7wOI2g9BQOqpcr5sT9QYzXoksxdwGEPQkC1hBCV7KpXOD1oQ8BSEDGBBkOIgoFKQ7QCmgEQ7TleLRS2Qzg7OISAAPHRo8VWshBNhhjyYhW+i412NzhEMSBAvAL/0LOrzzuyZF9XEGBJJV6EL4FLqMEAYrKkUa4e/fHn+sUWCdSZBnEzKtd2lvOrkPCSEHoCNbEGKch60gKuXN34z5/oFwSRaPCGAmZNCIPF/qq6iChQdUtPrEGMgVeXYrVYLhO8GSK+FwhR2gR1CF/TNsiM8BR0avbllQfxGFcWKUKULmHrMUkDeO+/vl8iRMkXokCGwIWSIfKFCGzraaBt9Rki0SJrNww3RAmgMbAitej88WfwNxcyA7CebbZYO0UZ/7I08yJGlEO+4APSfTLR+250O/TzdTkIWLqEgFZ2LgQ2RlWbL1CbTF/wOhnPRqDo7QyhS2LfN70eRICG6KsEeYhWCPE43J4YDZIl7Oi1fvmMcUlfiH5EgKJvg+RaHyGOgoEqNxJ4MLhPJnrfjezbB4b+0pMm1BLSYLZ1NzYcqCOPF8+DgcpJE+F9MtFr/d6nxgvRzD04Q+RrMSZEfZsQovfduIGKL9kM9aL5AIa1qNJA3UsTogQxiRYZGswVMEaLPEDOIeUYLTbcEPVpMMcQxRbWohuo0aUaY59MXNJYsAb9iOGkcRYdosx9MtH7bsglFxmi2PqhvIgDNY0GXcRoLXLSRM6AzKRByvD0J1+ikwazVMsfkJs0GLvu47dT8hFRLbq4NBFAVDhaDIZbgu2UnEDllWrCL+5OZ/doE5onaaiVN69DBVzCky/spIEezevPwRCVDOEXBqexE/Jqb1eLaunTNkHcCwHGbqdkJA3s+9dvtj+pvjQBPqeJfVVHOsAa+dI1GqgAcHMzjJh4S3MoaeAQBYCbm5+8GoSmS7kjzgApogoAw4gptjQHtOgBBIiqD3ABiPf6DBBrEQPOEL0hmnBDrF+LRIPb+LKfVKpBiqjlqsUTHyDSIgH0eTHtyRePFl0N0st+8noQIeo5etEbogTxp7ebIcRXqU++uFr0hSiyt+/rgXvqtdwQT6QgoCQd/LQZRkx/rIBq8cwXotDeH4TumZsWT7QwIEQMeXFL4GAIDtStoAc3fwoD5haoLA+yEaX0gARRCoUoCzAnL4Y1GIUosOt+X0kMmIsW75khShGDWpR0geloDPg5LkQJYtZJg61Bvhd13tYirvXQEQafByMAIWKmXuSHKA+Rue8mChCtDyYLUYKYpRZ5nUw0YhovEsCYNJEbYnSIUsSgFtMg4gXQ+DQRQMwqUOM9yPNi0kANA8aFKEHMJi/GaXB+xPQadBGzSBrBYptlWk2RxAOVeDCUJpSaFn1bKRMvJtGg4uDpKbHuhhGiCNDou185HoU4rxaTaBDtWuIixgUqL0TRrNphAsT5etQkGiRHB9BUcXov8gAtPKuWN2JUqeYC0t2DBDGdFnkadOdFEwWqcAGXSIOzHaCMQIWN1aK+OgB58IClQWqtHLWYLEQ9fzAOBepn1Fz+/U/QQ/nM1CC1JIEqljTuk3Qy/u89CGhx+7cJ+hA/iO7hRh1p8puLGAZMqEWRQG2k0KCL6A3U7d8kuF3ZjPrO7FM4e2FLFDEYotiSBGojPeA4/rKMvfRUi9sIEFrM1qxTNLQ/gIjbjBDFlsCL6b+os0d22UVdlLW9k2jxr82335IAUkTp29vNv9gehI2JR5Rryev8h912q+s4sTHKOZmEtGgfTCaosjTjd2ahQJXgH9gcwLUkgao7LWfQfxd7YOiubcCvVdXji1Hu0auxMfuQleR76089XwbKXR+Mz4uw0ZpiKO0oyDvHjC92CSB/B/LYIgGuK0kAAaJCnqdu8dWUQIvYNLP7wLlGr29Qz8W6MPKU57RhKpqmmE7SM2bgycI/sBoRTyRWi7pt0wdltJmtu++gS+j15rE0mtjHzeBsuhcw5nQg0HJ7N80Zujv4B7xHTyxKi/Vmc3J9PQL/QZRKg1EC4BLNbo4ev6oVYFcvN5MmD3A5p625XmxKNx9KsNGV4Y9RE3ZYuhJ6vnig27x8UeGBDbgsqVaufqCUHQZc1kFkNqJdf7wijS6B1r+M0C50JeDFHqpgjs9nG7rQx68+Mtw49xdTixsLsT76WvG2ulJC2190yd/KAfzT5pPvo8iRNyHEpR5CDmuxeVsKNrryhPZt+KQ0hTns+KXigql0j0DlSwBxyQfJg16s37pNdRtdqrxAL/qSMZxRP/7hnoq5Gg5LxJ2qemn7AZf7MoBA0rDpnhe1UhoOryoVuk8L+EX2jL1hVWF/pB99up7o0uT2Azlh9NXrxAKck/dVN018zkWtfLidSPrkmuhMLUG/GDMnwu+Yp58djo5Rd2sff8GPp3JeLxKgT4v1mwoG+nKM0r19PMEH0NQPwC+6O7twb7ouVIezBNHE5/HQMbFCaJDawEXUh3hHz6zLtyXiKXh8z6Tj4lMF9aPosxMIaB+ggUETP6HKrV0MDbpGtWjf4gbiDh832p7gc5JP4GduXdyHB7fQ06j8gJ99/f77GzT4+Qc/ohd0AT2vc/4C1jZRcdZ8Qu0b/gP5Jn9/RyPo5iPy1ZXu2egHZTjBTwP0MdLB9+3t7c3fD2iYq0NE6MSUjQu1BwcRYrfAjuLg903Q6u+g0TpBGekzIdboAUp1iD6LJk3eQreNsJDrC9v3mNxg4DVxV4jyGZ4aQn7B3EBbMp29qdGIRj3Q62/b7ocnOLtIBSW0cfoDgUfcsv3tNeD+gAhv6pJcIx+WeIT6RHUJ28vEYRgklHCIxRMyo3QTcuOjsSrg1jI+KTa3wblAEqXwtOXBW0aUusdoPT3NCPY0f7s9zaPb02R4Mjwbg9tvSE/ziPzylvY0o1lPQ4tvb7aAJevB+7992QKmFqNIPSm0BzBYaL7gkgRnizc4W+D6GmULdxIVTlnijF9SR/YseZKTxSjjmwvZYZ3CeuYs45+TjI+qlREOXZ9bfFVbLVS1wWPTcvFeLQrHQ7Rqu/VUbcNZ1Wa5H3bClbfkr7wLJ0O81a9+TirvG9rokafy9vT/6DQ6HT2pT5f1el33j56MglSkHsOvI5mNnnTQ6ssnOskE1WZ5+g40An50R8Cl4ZVKR8Al+Nn06x4LMJgvgOrosBaM20vuOyVgLa57h3rhWQz3/27r6ZY9Fmc9uILb/DI7djKbxXiCKcHf/aP3pNQZM1FIw4mWHxZvaMGj+UUNNhqPkIKvWUIr2sc3JS+jWhmOFnecSsD6aIbwcuhvNOh24KihFvgw3jjTnLyUPDPCj6iHKsTUBdvQnI3ddGeEQaNLL2iqnnF+CCPqzcvHr2iC/OoDmdVXnCKKEFsPz9k0azcfrmCjS18fL9HKha4xVk3IyozdrE9G19cjiazMWO2FtzuNtfHiY70pwUZP6mjVQtI4u4jc1bXZQpWiZ/p6jRzsna4EG60bA17Y3TmWd4VUVox+0crRsN33DcW750C3utOIj9+1LQuvcmuKKY0XcNovAzsZSyZttGUOYkdBD/vtluMcjt/9O/CwnbwbHzpdp7/Lf8Pqyla2spWtbGUrW9nKVraylc1j/wPDtNa3efvktQAAAABJRU5ErkJggg==",event_roleplay:mt,event_perception:"data:image/png;base64,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",event_town:gt,event_travel:"data:image/png;base64,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",event_challenge:pt,event_trap:ft,event_exposition:vt,event_exploration:"data:image/png;base64,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"},Et=e=>{let{imageId:t}=e;if("none"===t)return null;const a=bt[t||""];return a?(0,yt.jsx)("img",{src:a,alt:"Icon",className:"cimage"}):(console.error(`No image found for imageId: ${t}`),null)};let St=function(e){return e.HUMAN="human",e.ELF="elf",e.DWARF="dwarf",e.HALFLING="halfling",e.HALF_ORC="half-orc",e.HALF_ELF="HALF_ELF",e.NPC="npc",e}({}),Nt=function(e){return e.CLERIC="cleric",e.DRUID="druid",e.FIGHTER="fighter",e.PALADIN="paladin",e.ROGUE="rogue",e.WIZARD="wizard",e.NPC="npc",e}({});const Tt=65,xt=30;let At=function(e){return e.COMBAT="combat",e.ROLEPLAY="roleplay",e.PUZZLE="puzzle",e.PERCEPTION="perception",e.TOWN="town",e.TRAVEL="travel",e.CHALLENGE="challenge",e.TRAP="trap",e.CHARACTER_BACKSTORY="character backstory",e.STORY="story",e.EXPLORATION="exploration",e.EXPOSITION="exposition",e.FINALE="finale",e}({}),Ct=function(e){return e.REFRESH="refresh",e.CHARACTER="character",e.MAX_HAPPINESS="max_happiness",e.MAX_ATTENTION="max_attention",e.STRESS_BUFFER="stress_buffer",e.PLAYER_TRAIT="player_trait",e}({});const Mt=[6,6,10,10,10,20],wt=[{abbreviation:"M",fullName:"Monday"},{abbreviation:"T",fullName:"Tuesday"},{abbreviation:"W",fullName:"Wednesday"},{abbreviation:"R",fullName:"Thursday"},{abbreviation:"F",fullName:"Friday"},{abbreviation:"St",fullName:"Saturday"},{abbreviation:"Sn",fullName:"Sunday"}],Rt=[{name:"Yes",percentage:Tt+1},{name:"Maybe",percentage:Tt-1},{name:"No",percentage:xt-1}],kt=e=>`rgba(${Math.min(255,Math.floor(2.55*(100-e)))}, ${Math.min(255,Math.floor(2.55*e))}, 0, 0)`,jt=e=>e<=xt?"X":e>Tt?"\u2714":"",Ot=e=>{let{dayData:t,legend:a=!1}=e;return(0,yt.jsxs)("div",{className:"week-display-days",children:[!a&&wt.map(((e,a)=>{const n=((e,t)=>e[t])(t,a),r=kt(n);return(0,yt.jsxs)("div",{className:"day-square",style:{backgroundColor:r},children:[(0,yt.jsx)("div",{className:"day-abbreviation",children:e.abbreviation}),(0,yt.jsx)("div",{className:"day-symbol",children:jt(n)}),(0,yt.jsxs)("div",{className:"day-percentage",children:[n,"%"]})]},a)})),a&&Rt.map(((e,t)=>{const a=e.percentage,n=kt(a);return(0,yt.jsxs)("div",{className:"day-square",style:{backgroundColor:n},children:[(0,yt.jsx)("div",{className:"day-abbreviation",children:e.name}),(0,yt.jsx)("div",{className:"day-symbol",children:jt(a)})]},t)}))]})},It=e=>{let{callback:t,classname:a=""}=e;return(0,yt.jsx)("div",{className:`more-info ${a}`,onClick:t,children:(0,yt.jsx)("div",{className:"more-info-text",children:"?"})})},Lt=(0,n.createContext)(void 0),Pt=(0,n.createContext)(void 0),_t=(0,n.createContext)(void 0),Dt=(0,n.createContext)(void 0),Bt=(0,n.createContext)(void 0),Ft=(0,n.createContext)(void 0),Ut=(0,n.createContext)(void 0),Ht=(0,n.createContext)(void 0),Gt=e=>{let{manager:t,children:a}=e;return(0,yt.jsx)(Ut.Provider,{value:t,children:a})},Wt=e=>{let{manager:t,children:a}=e;return(0,yt.jsx)(Ht.Provider,{value:t,children:a})},Kt=e=>{let{manager:t,children:a}=e;return(0,yt.jsx)(Lt.Provider,{value:t,children:a})},zt=e=>{let{manager:t,children:a}=e;return(0,yt.jsx)(Pt.Provider,{value:t,children:a})},Vt=e=>{let{manager:t,children:a}=e;return(0,yt.jsx)(_t.Provider,{value:t,children:a})},Yt=e=>{let{manager:t,children:a}=e;return(0,yt.jsx)(Dt.Provider,{value:t,children:a})},Qt=e=>{let{manager:t,children:a}=e;return(0,yt.jsx)(Bt.Provider,{value:t,children:a})},Xt=e=>{let{manager:t,children:a}=e;return(0,yt.jsx)(Ft.Provider,{value:t,children:a})},Zt=()=>{const e=(0,n.useContext)(Ut);if(void 0===e)throw new Error("useCharacterManager must be used within a CharacterManagerProvider");return e},Jt=()=>{const e=(0,n.useContext)(Ht);if(void 0===e)throw new Error("usePlayerManager must be used within a PlayerManagerProvider");return e},qt=()=>{const e=(0,n.useContext)(Lt);if(void 0===e)throw new Error("useAppManager must be used within a AppManagerProvider");return e},$t=()=>{const e=(0,n.useContext)(_t);if(void 0===e)throw new Error("useCampaignManager must be used within a CampaignManagerProvider");return e},ea=()=>{const e=(0,n.useContext)(Bt);if(void 0===e)throw new Error("usePartyManager must be used within a PartyManagerProvider");return e},ta=()=>{const e=(0,n.useContext)(Ft);if(void 0===e)throw new Error("useUiManager must be used within a UiManagerProvider");return e};let aa=function(e){return e.MAIN_MENU="main-menu",e.CAMPAIGN_SETUP="campaign-setup",e.PLAYER_RECRUITMENT="player-recruitment",e.CHARACTER_CREATION="character-creation",e.SESSION_OVERVIEW="session-setup",e.SESSION="session",e.SCORE="score",e}({});const na={nextState:aa.MAIN_MENU,ui:{showCharacterBar:!1},background_image_id:"default_bg",bg_transition_mode:"none",secondary_bg_image_id:"none",secondary_image_pos:"none"},ra={[aa.MAIN_MENU]:{nextState:aa.CAMPAIGN_SETUP,ui:{showCharacterBar:!1},background_image_id:"main_menu"},[aa.CAMPAIGN_SETUP]:{nextState:aa.PLAYER_RECRUITMENT,ui:{showCharacterBar:!1},background_image_id:"main_menu",bg_transition_mode:"slide-down",secondary_bg_image_id:"campaign_bg",secondary_image_pos:"bottom"},[aa.PLAYER_RECRUITMENT]:{nextState:aa.CHARACTER_CREATION,ui:{showCharacterBar:!1},background_image_id:"main_menu",bg_transition_mode:"slide-right"},[aa.CHARACTER_CREATION]:{nextState:aa.SESSION_OVERVIEW,ui:{showCharacterBar:!1},background_image_id:"main_menu",bg_transition_mode:"slide-left"},[aa.SESSION_OVERVIEW]:{nextState:aa.SESSION,ui:{showCharacterBar:!1},background_image_id:"none",bg_transition_mode:"none",secondary_bg_image_id:"none"},[aa.SESSION]:{nextState:aa.SCORE,ui:{showCharacterBar:!1},background_image_id:"none",secondary_bg_image_id:"none"},[aa.SCORE]:{nextState:aa.MAIN_MENU,ui:{showCharacterBar:!1}}},sa={SWORD_1:{name:"Plus 1 Sword",attributes:{[c.COMBAT]:1}},MIRROR_SHIELD:{name:"Mirror Shield",attributes:{[c.COMBAT]:2,[c.TOOLS]:2}},WAND_5:{name:"Spellring",attributes:{[c.MAGIC]:2}},HELPFUL_IMP:{name:"Helpful Imp",attributes:{[c.COMBAT]:1,[c.TOOLS]:1,[c.MAGIC]:1}},STONECUTTER:{name:"Stonecutter",attributes:{[c.TOOLS]:5}},CLOAK_OF_LEVITATION:{name:"Cloak of Levitation",attributes:{[c.MAGIC]:1,[c.TOOLS]:1}},WAND_OF_MISSILES:{name:"Wand of Missiles",attributes:{[c.MAGIC]:2,[c.COMBAT]:1}},GLOVES_OF_THE_SPIDER:{name:"Gloves of the Spider",attributes:{[c.TOOLS]:3}}};function ia(e){switch(e.race){case St.DWARF:return{[c.COMBAT]:2,[c.MAGIC]:0,[c.TOOLS]:1};case St.ELF:return{[c.COMBAT]:1,[c.MAGIC]:3,[c.TOOLS]:0};case St.HUMAN:return{[c.COMBAT]:1,[c.MAGIC]:1,[c.TOOLS]:1};case St.HALFLING:return{[c.COMBAT]:1,[c.MAGIC]:0,[c.TOOLS]:3};case St.HALF_ORC:return{[c.COMBAT]:3,[c.MAGIC]:0,[c.TOOLS]:0};case St.HALF_ELF:return{[c.COMBAT]:1,[c.MAGIC]:2,[c.TOOLS]:0};case St.NPC:return{[c.COMBAT]:0,[c.MAGIC]:0,[c.TOOLS]:0}}}function la(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return{[c.COMBAT]:0,[c.MAGIC]:0,[c.TOOLS]:0};const a=ia(e),n=function(e){const t={[c.COMBAT]:0,[c.MAGIC]:0,[c.TOOLS]:0};return e.gear.forEach((e=>{var a,n,r;t[c.COMBAT]+=null!==(a=e.attributes[c.COMBAT])&&void 0!==a?a:0,t[c.MAGIC]+=null!==(n=e.attributes[c.MAGIC])&&void 0!==n?n:0,t[c.TOOLS]+=null!==(r=e.attributes[c.TOOLS])&&void 0!==r?r:0})),t}(e),r=oa(e),s={[c.COMBAT]:0+a[c.COMBAT]+r[c.COMBAT]+n[c.COMBAT],[c.MAGIC]:0+a[c.MAGIC]+r[c.MAGIC]+n[c.MAGIC],[c.TOOLS]:0+a[c.TOOLS]+r[c.TOOLS]+n[c.TOOLS]};var i,l,o;t&&(e.attributeLoss&&(s[c.COMBAT]-=null!==(i=e.attributeLoss[c.COMBAT])&&void 0!==i?i:0,s[c.MAGIC]-=null!==(l=e.attributeLoss[c.MAGIC])&&void 0!==l?l:0,s[c.TOOLS]-=null!==(o=e.attributeLoss[c.TOOLS])&&void 0!==o?o:0));return s}function oa(e){const t={[c.COMBAT]:0,[c.MAGIC]:0,[c.TOOLS]:0};for(let a=0;a<e.level;a++){let n=a+1;t[c.COMBAT]+=ca(e.character_class,n)[c.COMBAT],t[c.MAGIC]+=ca(e.character_class,n)[c.MAGIC],t[c.TOOLS]+=ca(e.character_class,n)[c.TOOLS]}return t}function ca(e,t){const a=t%2,n=(t+1)%2;switch(e){case Nt.CLERIC:return{[c.COMBAT]:1+a,[c.MAGIC]:2,[c.TOOLS]:n};case Nt.DRUID:return{[c.COMBAT]:1+n,[c.MAGIC]:1+a,[c.TOOLS]:1+a};case Nt.FIGHTER:return{[c.COMBAT]:3,[c.MAGIC]:0,[c.TOOLS]:1};case Nt.PALADIN:return{[c.COMBAT]:2+n,[c.MAGIC]:1,[c.TOOLS]:a};case Nt.ROGUE:return{[c.COMBAT]:1,[c.MAGIC]:0,[c.TOOLS]:3+a};case Nt.WIZARD:return{[c.COMBAT]:n,[c.MAGIC]:3,[c.TOOLS]:1}}return{[c.COMBAT]:0,[c.MAGIC]:0,[c.TOOLS]:0}}const da=e=>"character"in e||"npcTag"in e,ua=e=>{let{hero:t,category:a,collapsed:n,showAttributeLoss:r,overviewDisplay:s=!1}=e;const i=Zt(),l=qt().getCombatManager();let o,u={[c.COMBAT]:0,[c.MAGIC]:0,[c.TOOLS]:0};da(t)&&t.npcTag&&(u=l.getNPCAttributes(t.npcTag),t.character=i.generateNPC(t.npcTag),a=d.NPC),o=da(t)?t.character:t;const h=ia(o),m=la(o,!0),g=o.attributeLoss||{[c.COMBAT]:0,[c.MAGIC]:0,[c.TOOLS]:0},p=la(o),f=(e,t)=>{const a=[],n=i.getUFAttributeSymbol(e);for(let r=0;r<t;r++)a.push((0,yt.jsx)("span",{className:`attribute-icon ${e}`,children:n},`${e}-${r}`));return a},v=(e,t)=>{if(n){const t=Object.keys(e).flatMap((t=>f(t,e[t]||0)));return(0,yt.jsx)("div",{className:"collapsed-attributes",children:t})}return Object.keys(e).map((a=>(0,yt.jsxs)("div",{className:"attribute-display",children:[(0,yt.jsxs)("div",{className:"attribute-title",children:[(0,yt.jsx)("b",{children:i.getUFAttributeName(a)}),":"]}),t&&r?(0,yt.jsxs)("div",{className:"attribute-container",children:[(0,yt.jsx)("div",{className:"attributes-retained",children:f(a,e[a]||0)}),(0,yt.jsx)("div",{className:"attributes-lost",children:f(a,t[a]||0)})]}):(0,yt.jsx)("div",{className:"attribute-container",children:f(a,e[a]||0)})]},a)))},y=()=>0===o.gear.length?(0,yt.jsx)("div",{}):o.gear.map((e=>(0,yt.jsxs)("div",{className:"gear-attributes",children:[(0,yt.jsx)("div",{className:"gear-title",children:(0,yt.jsxs)("b",{children:[e.name,": "]})}),v(e.attributes)]},e.name)));return(0,yt.jsxs)("div",{className:"attribute-display-container",children:[(()=>{switch(a){case d.CHARACTER_CLASS:return Array.from({length:o.level},((e,t)=>t+1)).map((e=>{const t=ca(o.character_class,e);return(0,yt.jsxs)("div",{className:"level-attributes",children:[(0,yt.jsxs)("div",{className:"level-title",children:[(0,yt.jsxs)("b",{children:["Level ",e,":"]})," "]}),v(t)]},e)}));case d.GEAR:return y();case d.RACE:return v(h);case d.ALL:return r?v(m,g):v(p);case d.NPC:return v(u);default:return null}})(),s&&y(),s&&(()=>{const e=o.backstory,t=o.backstory.filter((e=>e.completed)).length,a=4-e.length;return(0,yt.jsxs)("div",{className:"backstory-element",children:[(0,yt.jsxs)("div",{className:"backstory-title",children:[(0,yt.jsx)("b",{children:"Backstory : "}),t," / 4"]}),(0,yt.jsxs)("div",{className:"backstory-tags",children:[e.map(((e,t)=>(0,yt.jsx)("div",{className:"text-pill backstory-item "+(e.completed?"type-backstory":"expected"),children:e.tag.name},`backstory-${t}`))),[...Array(a)].map(((e,t)=>(0,yt.jsx)("div",{className:"text-pill backstory-item expected",children:"?"},`placeholder-${t}`)))]})]})})()]})},ha=e=>{let{character:t,isSelected:a,onSelect:n,showAbilities:r,collapsed:s,isAssigned:i,isAssignedToOther:l}=e;const o=ta(),c=Zt(),u=()=>{o.showBasicNotebook(m,t)},h=qt().state!==aa.CHARACTER_CREATION;return s?(0,yt.jsxs)("div",{className:"character-card collapsed",onClick:n,children:[(0,yt.jsxs)("div",{className:"character-icon",children:[(0,yt.jsx)(Et,{imageId:t.icon}),(0,yt.jsx)("div",{className:"character-initials",children:c.getUFInitials(t)})]}),(0,yt.jsx)("div",{className:"character-collapsed-overlay",children:h?(0,yt.jsx)(It,{callback:u}):(0,yt.jsx)("div",{className:"character-collapsed-unassign",children:"X"})})]}):(0,yt.jsxs)("div",{className:`character-card ${a?"selected":""} ${l?"assigned-to-other":""}`,onClick:n,children:[(0,yt.jsxs)("div",{className:`character-card-container ${i?"assigned":""} `,children:[(0,yt.jsxs)("div",{className:"character-card-header",children:[(0,yt.jsxs)("div",{className:"character-info",children:[(0,yt.jsx)("div",{className:"character-name",children:t.name}),(0,yt.jsx)("div",{className:"character-details",children:(0,yt.jsxs)("div",{className:"character-race",children:[c.getUFRace(t.race)," ",c.getUFClass(t.character_class)]})}),(0,yt.jsx)(ua,{hero:t,category:d.ALL,collapsed:!1})]}),(0,yt.jsxs)("div",{className:"character-icon",children:[(0,yt.jsx)(Et,{imageId:t.icon}),(0,yt.jsxs)("div",{className:"character-level",children:["Level ",t.level]})]})]}),r&&(0,yt.jsx)("div",{className:"character-card-body",children:(0,yt.jsx)("div",{className:"abilities-list",children:(0,yt.jsx)("ul",{children:t.abilities.map(((e,t)=>(0,yt.jsx)("li",{children:(0,yt.jsx)("strong",{children:e})},t)))})})})]}),(0,yt.jsx)(It,{callback:u}),i&&(0,yt.jsx)("div",{className:"character-assigned",children:"Assigned"})]})},ma=e=>{let{totalSegments:t,filledSegments:a,theme:n="",label:r,buttonWhenFilled:s=!1,onClickFilled:i,filledLabel:l,labelStyle:o="normal"}=e;const c=Array.from({length:t},((e,t)=>(0,yt.jsx)("div",{className:`fill-bar-segment bg-theme-${n} ${t<a?"filled":""}`},t))),d=a>=t,u="theme-"+n;return"over"!==o?(0,yt.jsxs)("div",{className:"fill-bar",children:[r&&(0,yt.jsx)("div",{className:`fill-bar-label text-theme-${n||""}`,children:r}),(0,yt.jsx)("div",{className:`fill-bar-container ${d?u:""}`,children:d&&s?(0,yt.jsx)("div",{className:`fill-bar-filled-button ${u}`,onClick:i,children:l}):c})]}):(0,yt.jsx)("div",{className:"fill-bar",children:(0,yt.jsxs)("div",{className:`fill-bar-container ${d?u:""}`,children:[r&&"over"===o&&(0,yt.jsx)("div",{className:`fill-bar-label-over text-theme-${n||""}`,children:r}),d&&s?(0,yt.jsx)("div",{className:`fill-bar-filled-button ${u}`,onClick:i,children:l}):c]})})},ga=["#CC0000","#CC6600","#CCCC00","#66CC00","#00CC00"],pa=["#990000","#994C00","#999900","#4C9900","#009900"],fa=["#FFCCCC","#FFDDCC","#FFFFCC","#DDFFCC","#CCFFCC"],va=["#660000","#663300","#666600","#336600","#006600"],ya=e=>{let{player:t,parentUpdate:a,isSelected:r,onSelect:s,showCharacters:i,showSchedule:l,showPreferences:o,overlayStyle:c,showStats:d}=e;const u=ta(),h=qt(),[p,f]=(0,n.useState)(!1),[v,y]=(0,n.useState)(!1),[b,E]=(0,n.useState)(!1),[S,N]=(0,n.useState)(!1),[T,x]=(0,n.useState)(t.playerStats.enjoyment),[A,C]=(0,n.useState)(!1),M=t.preferences.reduce(((e,t)=>t[1]>e[1]?t:e),t.preferences[0]),w=t.preferences.reduce(((e,t)=>t[1]<e[1]?t:e),t.preferences[0]),R=t.preferences.filter((e=>e[1]>0)),k=t.preferences.filter((e=>e[1]<0)),j="assign"===c?"Assign":"Remove",O="none"===c?"":(0,yt.jsx)("div",{className:`overlay ${c}`,children:(0,yt.jsx)("div",{className:"overlay-text",children:j})}),I=(Zt(),Jt()),L=e=>{I.toggleSinglePlayerForCharacter(t,e),f(!p),a&&a()};(0,n.useEffect)((()=>{T!==t.playerStats.enjoyment&&(C(!0),setTimeout((()=>C(!1)),500),x(t.playerStats.enjoyment))}),[t.playerStats.enjoyment]);return(0,yt.jsxs)("div",{className:"player-card "+(r?"selected":""),onClick:s,style:{backgroundColor:fa[t.playerStats.enjoyment]||"",borderColor:va[t.playerStats.enjoyment]||""},children:[(0,yt.jsx)(It,{callback:()=>{u.showBasicNotebook(g,t)}}),(0,yt.jsxs)("div",{className:"player-card-header",children:[(0,yt.jsx)("div",{className:"player-icon",children:(0,yt.jsx)(Et,{imageId:t.icon})}),(0,yt.jsxs)("div",{className:"player-upper-info",children:[(0,yt.jsx)("div",{className:"player-name",children:t.name}),l&&(0,yt.jsx)("div",{className:"player-schedule-container",children:(0,yt.jsx)(Ot,{dayData:t.schedule})})]})]}),o&&(0,yt.jsxs)("div",{className:"player-preferences-section",children:[t.traits.length>0&&(0,yt.jsxs)("div",{className:"preferences-column",children:[(0,yt.jsx)("div",{className:"preferences-title",children:"Traits"}),(0,yt.jsx)("div",{className:"preferences-traits ",onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),children:t.traits.map(((e,t)=>(0,yt.jsx)("div",{className:"trait-item text-pill trait",children:e.name},t)))}),S&&(0,yt.jsx)("div",{className:"tooltip traits",children:(0,yt.jsx)("div",{className:"tooltip-content-single",children:t.traits.map(((e,t)=>(0,yt.jsxs)("div",{className:"tooltip-trait-item",children:[(0,yt.jsx)("b",{children:e.name}),": ",e.description]},t)))})})]}),(0,yt.jsxs)("div",{className:"preferences-column",children:[(0,yt.jsx)("div",{className:"preferences-title",children:"Likes"}),(0,yt.jsx)("div",{className:"preferences-main",children:M[0].name}),(0,yt.jsx)("div",{className:"preferences-dots",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:R.map(((e,t)=>(0,yt.jsx)("div",{className:"preference-dot like",title:e[0].name},t)))}),v&&(0,yt.jsx)("div",{className:"tooltip like",children:(0,yt.jsx)("div",{className:"tooltip-content",children:t.preferences.filter((e=>e[1]>0)).map(((e,t)=>(0,yt.jsx)("div",{className:"tooltip-pill",children:e[0].name},t)))})})]}),(0,yt.jsxs)("div",{className:"preferences-column",children:[(0,yt.jsx)("div",{className:"preferences-title",children:"Hates"}),(0,yt.jsx)("div",{className:"preferences-main",children:w[0].name}),(0,yt.jsx)("div",{className:"preferences-dots",onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:k.map(((e,t)=>(0,yt.jsx)("div",{className:"preference-dot hate",title:e[0].name},t)))}),b&&(0,yt.jsx)("div",{className:"tooltip hate",children:(0,yt.jsx)("div",{className:"tooltip-content",children:t.preferences.filter((e=>e[1]<0)).map(((e,t)=>(0,yt.jsx)("div",{className:"tooltip-pill",children:e[0].name},t)))})})]})]}),d?(0,yt.jsxs)("div",{className:"player-stats",children:[(0,yt.jsxs)("div",{className:"stat-item enjoyment",children:[(0,yt.jsx)("div",{className:"stat-item-emoji",children:"\ud83d\ude1e"}),Array.from({length:5}).map(((e,a)=>{const n=a<=t.playerStats.enjoyment;return(0,yt.jsx)("span",{className:`delight-circle ${n?"filled":""} ${A?"flash":""}`,style:n?{backgroundColor:ga[t.playerStats.enjoyment]||"",borderColor:pa[t.playerStats.enjoyment]||"",boxShadow:`0 0 10px ${ga[t.playerStats.enjoyment]||""}`}:{}},a)})),(0,yt.jsx)("div",{className:"stat-item-emoji",children:"\ud83d\ude0a"})]}),(0,yt.jsx)("div",{className:"stat-item engagement",children:(0,yt.jsx)(ma,{totalSegments:5,filledSegments:t.playerStats.involvement,theme:"engagement",label:"ATTENTION"})})]}):null,i&&(0,yt.jsx)("div",{className:"character-row-container",children:(0,yt.jsx)("div",{className:"character-row-display",children:t.characters.map((e=>(0,yt.jsx)(ha,{character:e,isSelected:!1,onSelect:()=>{(e=>{h.state===aa.CHARACTER_CREATION?L(e):u.showBasicNotebook(m,e)})(e)},showAbilities:!1,collapsed:!0},e.id)))})}),c&&O]})},ba=e=>{let{title:t,theme:a,children:n}=e;return(0,yt.jsxs)("div",{className:`cbox ${a}`,children:[(0,yt.jsx)("div",{className:`cbox-text ${a}`,children:t}),(0,yt.jsx)("div",{className:"cbox-children",children:n})]})},Ea=e=>{let{encounterInfo:t}=e;const a=$t(),n=t.encounter,r=a.getTagsForEncounter(n);t.encounter.branches;return(0,yt.jsxs)("div",{className:"notebook-encounter-container",children:[(0,yt.jsx)("div",{className:"notebook-encounter-contents left",children:(0,yt.jsx)(ba,{title:n.name,theme:"encounter-info",children:(0,yt.jsx)("div",{className:"notebook-icon-container",children:(0,yt.jsx)(Et,{imageId:n.icon})})})}),(0,yt.jsxs)(ba,{title:"DETAILS",theme:"details",children:[(0,yt.jsx)(ba,{title:"LOCATION",theme:"location",children:(0,yt.jsx)("div",{className:"encounter-location",children:n.location.name})}),(0,yt.jsxs)(ba,{title:"DESCRIPTION",theme:"description",children:[" ",(0,yt.jsx)("div",{className:"notebook-text encounter-description",children:n.description})]}),(0,yt.jsx)(ba,{title:"ELEMENTS",theme:"elements",children:(0,yt.jsx)("div",{className:"elements-features-list-container",children:r.map(((e,t)=>(0,yt.jsxs)("div",{className:"notebook-text elements-features-list text-pill type-encounter",children:[e.name," "]},t)))})})]})]})},Sa=e=>{var t,a;let{characterInfo:n}=e;const r=Zt(),s=Jt();return(0,yt.jsxs)("div",{className:"notebook-character",children:[(0,yt.jsxs)("div",{className:"notebook-character-left",children:[(0,yt.jsx)(ba,{title:n.character.name,theme:"character-info",children:(0,yt.jsxs)("div",{className:"notebook-left-top-container",children:[(0,yt.jsx)("div",{className:"notebook-character-icon-container",children:(0,yt.jsx)(Et,{imageId:n.character.icon})}),(0,yt.jsxs)("div",{className:"notebook-character-stats",children:[(0,yt.jsxs)("div",{children:[(0,yt.jsx)("b",{children:"Race:"})," ",r.getUFRace(n.character.race)]}),(0,yt.jsxs)("div",{children:[(0,yt.jsx)("b",{children:"Class:"})," ",r.getUFClass(n.character.character_class)]}),(0,yt.jsxs)("div",{children:[(0,yt.jsx)("b",{children:"Level:"})," ",n.character.level]}),(0,yt.jsx)("div",{children:(()=>{const e=s.getPlayerAssignedCharacter(n.character);return e?`Assigned to ${e.name}`:"Not assigned to any player"})()})]}),(0,yt.jsx)(ba,{title:"STATUS",theme:`health ${n.character.injury}`,children:(0,yt.jsx)("div",{className:`health-status ${n.character.injury}`,children:null!==(t=null===(a=n.character.injury)||void 0===a?void 0:a.toUpperCase())&&void 0!==t?t:"HEALTHY"})})]})}),(0,yt.jsx)(ba,{title:"ABILITIES",theme:"abilities",children:(0,yt.jsx)(ua,{hero:n.character,category:d.ALL})}),(0,yt.jsxs)(ba,{title:"BACKSTORY",theme:"backstory",children:[(0,yt.jsx)(ma,{totalSegments:Math.max(n.character.backstory.length,3),filledSegments:n.character.backstory.filter((e=>e.completed)).length,theme:"backstory",label:"Backstory Elements"}),(0,yt.jsxs)("div",{className:"notebook-backstory-tags",children:["SEEKING:",n.character.backstory.filter((e=>!e.completed)).map(((e,t)=>(0,yt.jsx)("div",{className:"text-pill expected",children:e.tag.name},t)))]}),(0,yt.jsxs)("div",{className:"notebook-backstory-tags",children:[n.character.backstory.filter((e=>e.completed)).length>0&&(0,yt.jsx)("div",{children:"COMPLETED:"}),n.character.backstory.filter((e=>e.completed)).map(((e,t)=>(0,yt.jsx)("div",{className:"text-pill completed",children:e.tag.name},t)))]})]})]}),(0,yt.jsx)("div",{className:"notebook-character-right",children:(0,yt.jsxs)(ba,{title:"ABILITY DETAILS",theme:"ability-details",children:[(0,yt.jsx)(ba,{title:`${r.getUFRace(n.character.race)} Abilities`,theme:"race-abilities",children:(0,yt.jsx)(ua,{hero:n.character,category:d.RACE,collapsed:!0})}),(0,yt.jsx)(ba,{title:`${r.getUFClass(n.character.character_class)} Abilities`,theme:"class-abilities",children:(0,yt.jsx)(ua,{hero:n.character,category:d.CHARACTER_CLASS,collapsed:!0})}),n.character.gear.length>0&&(0,yt.jsx)(ba,{title:"Equipment Bonuses",theme:"gear-abilities",children:(0,yt.jsx)(ua,{hero:n.character,category:d.GEAR,collapsed:!0})})]})})]})},Na=e=>{let{locationInfo:t}=e;const a=t.location;return(0,yt.jsxs)("div",{className:"notebook-location-container",children:[(0,yt.jsx)("div",{className:"notebook-location-contents left",children:(0,yt.jsx)(ba,{title:a.name,theme:"location-info",children:(0,yt.jsx)("div",{className:"notebook-icon-container",children:(0,yt.jsx)(Et,{imageId:a.icon})})})}),(0,yt.jsx)("div",{className:"notebook-location-contents right",children:(0,yt.jsxs)(ba,{title:"DETAILS",theme:"location-details",children:[(0,yt.jsx)(ba,{title:"DESCRIPTION",theme:"description",children:(0,yt.jsx)("div",{className:"notebook-text location-description",children:a.description})}),(0,yt.jsx)(ba,{title:"FEATURES",theme:"location-features",children:(0,yt.jsx)("div",{className:"elements-features-list-container",children:a.tags.map(((e,t)=>(0,yt.jsx)("div",{className:"notebook-text elements-features-list text-pill type-location",children:e.name},t)))})})]})})]})},Ta=e=>{let{playerInfo:t,singleColumn:a,clickChar:n=()=>{}}=e;Zt();const r=t.player.preferences.filter((e=>e[1]>0)),s=t.player.preferences.filter((e=>e[1]<0));return(0,yt.jsxs)("div",{className:"notebook-player-container",children:[(0,yt.jsxs)("div",{className:"player-notebook-upper",children:[!a&&(0,yt.jsxs)("div",{className:"player-notebook-left-content",children:[(0,yt.jsxs)("div",{className:"notebook-player-topbar",children:[(0,yt.jsx)("div",{className:"notebook-player-icon",children:(0,yt.jsx)(Et,{imageId:t.player.icon})}),(0,yt.jsx)("div",{className:"notebook-player-name",children:t.player.name})]}),(0,yt.jsxs)("div",{className:"player-notebook-mid-content",children:[(0,yt.jsx)("div",{className:"player-notebook-mid-left",children:(0,yt.jsxs)(ba,{title:"STATS",theme:"stats",children:[(0,yt.jsx)("div",{className:"character-level",children:(0,yt.jsx)(ma,{filledSegments:t.player.playerStats.experience,totalSegments:Mt[t.player.playerStats.level],theme:"player-level",label:`LEVEL ${t.player.playerStats.level}`})}),(0,yt.jsx)("div",{className:"character-attitude",children:(0,yt.jsx)(ma,{filledSegments:t.player.playerStats.enjoyment,totalSegments:t.player.playerStats.maxEnjoyment,theme:"player-level",label:`ATTITUDE ${t.player.playerStats.enjoyment}/${t.player.playerStats.maxEnjoyment}`})}),(0,yt.jsx)("div",{className:"character-attention",children:(0,yt.jsx)(ma,{filledSegments:t.player.playerStats.involvement,totalSegments:t.player.playerStats.maxInvolvement,theme:"player-level",label:`ATTENTION ${t.player.playerStats.involvement}/${t.player.playerStats.maxInvolvement}`})}),(0,yt.jsxs)(ba,{title:"STRESS",theme:"stress",children:[(0,yt.jsxs)("div",{className:"character-stress",children:["CURRENT STRESS"," ",Math.max(0,t.player.playerStats.stress-t.player.playerStats.stressBuffer),"%"]}),(0,yt.jsxs)("div",{className:"character-stress",children:["RESILIENCE"," ",Math.min(t.player.playerStats.stressBuffer,t.player.playerStats.stress),"/",t.player.playerStats.stressBuffer]})]})]})}),(0,yt.jsx)("div",{className:"player-notebook-mid-right",children:(0,yt.jsxs)(ba,{title:"PREFERENCES",theme:"preferences",children:[(0,yt.jsx)(ba,{title:"LIKES",theme:"likes",children:(0,yt.jsx)("div",{className:"player-preferences likes",children:r.map(((e,t)=>(0,yt.jsx)("div",{className:"text-pill like",children:(0,yt.jsxs)("div",{className:"player-preference",children:["- ",e[0].name]})},t)))})}),(0,yt.jsx)(ba,{title:"HATES",theme:"hates",children:(0,yt.jsx)("div",{className:"player-preferences hates",children:s.map(((e,t)=>(0,yt.jsx)("div",{className:"text-pill hate",children:(0,yt.jsxs)("div",{className:"player-preference",children:["- ",e[0].name]})},t)))})})]})})]})]}),(0,yt.jsx)("div",{className:"player-notebook-right-content",children:!a&&t.player.characters.length>0&&(0,yt.jsx)(ba,{title:"CHARACTERS",theme:"characters",children:t.player.characters.map(((e,t)=>(0,yt.jsxs)("div",{className:"player-character-container",onClick:()=>(e=>{n(e)})(t),children:[(0,yt.jsxs)("div",{className:"player-character-hero-image",children:[(0,yt.jsx)("div",{className:"challenge-character-icon",children:(0,yt.jsx)(Et,{imageId:e.icon})}),"injured"===e.injury&&(0,yt.jsx)("div",{className:"player-character-hero-injury"}),"dead"===e.injury&&(0,yt.jsx)("div",{className:"player-character-hero-injury dead"})]}),(0,yt.jsxs)("div",{className:"player-character-text-container",children:[(0,yt.jsx)("div",{className:"player-character-name-container",children:(0,yt.jsx)("div",{className:"player-character-name",children:e.name})}),(0,yt.jsxs)("div",{className:"player-character-info",children:[e.race," ",e.character_class]}),(0,yt.jsxs)("div",{className:"player-character-info",children:["Level ",e.level]})]})]},t)))})})]}),(0,yt.jsx)("div",{className:"player-notebook-bottom",children:(0,yt.jsx)(ba,{title:"PLAYER TRAITS",theme:"traits",children:0===t.player.traits.length?(0,yt.jsx)("div",{className:"no-traits",children:"level up to unlock traits"}):(0,yt.jsx)("div",{className:"player-notebook-traits",children:t.player.traits.map(((e,t)=>(0,yt.jsx)("div",{children:(0,yt.jsx)(ba,{title:e.name,theme:"trait",children:(0,yt.jsx)("div",{className:"trait-description",children:e.description})})},t)))})})})]})},xa=e=>{let{groupInfo:t}=e;const[a,r]=(0,n.useState)(t.players),s=Jt(),[i,l]=(0,n.useState)(s.getGroupAttitudes()),[o,c]=(0,n.useState)(s.aggregateSchedule());return(0,n.useEffect)((()=>{l(s.getGroupAttitudes()),r(t.players),c(s.aggregateSchedule())}),[t,s]),(0,yt.jsxs)("div",{className:"notebook-group-container",children:[(0,yt.jsx)("div",{className:"notebook-group-top-content",children:(0,yt.jsxs)("div",{className:"notebook-group-players notebook-text large",children:[(0,yt.jsx)("u",{children:"Players"}),(0,yt.jsx)("div",{className:"notebook-group-players-list",children:0!==a.length&&a.map(((e,t)=>(0,yt.jsx)("div",{className:"notebook-text player-name",children:e.name},t)))})]})}),(0,yt.jsxs)("div",{className:"player-attitude",children:[(0,yt.jsxs)("div",{className:"attitude-column",children:[(0,yt.jsx)("div",{className:"attitude-title notebook-text large",children:(0,yt.jsx)("u",{children:"Group Likes"})}),i.likes.map(((e,t)=>(0,yt.jsx)("div",{className:"attitude-item like",children:(0,yt.jsx)("div",{className:"attitude-item-text",children:e})},t)))]}),i.conflicted.length>0&&(0,yt.jsxs)("div",{className:"attitude-column",children:[(0,yt.jsx)("div",{className:"attitude-title notebook-text large",children:(0,yt.jsx)("u",{children:"Conflicted"})}),i.conflicted.map(((e,t)=>(0,yt.jsx)("div",{className:"attitude-item conflicted",children:(0,yt.jsx)("div",{className:"attitude-item-text",children:e})},t)))]}),(0,yt.jsxs)("div",{className:"attitude-column",children:[(0,yt.jsx)("div",{className:"attitude-title notebook-text large",children:(0,yt.jsx)("u",{children:"Group Hates"})}),i.hates.map(((e,t)=>(0,yt.jsx)("div",{className:"attitude-item hate",children:(0,yt.jsx)("div",{className:"attitude-item-text",children:e})},t)))]})]})]})},Aa=()=>{const e=Jt().aggregateSchedule(),t=e=>0===e?"-":e<33?"X":e<65?" ":"\u2714";return(0,yt.jsxs)("div",{className:"group-schedule-container",children:[(0,yt.jsx)("div",{className:"group-schedule-tab",children:"Scheduling"}),(0,yt.jsx)("div",{className:"week-display-days",children:e.map(((e,a)=>(0,yt.jsxs)("div",{className:"day-box",children:[(0,yt.jsx)("div",{className:"day-abbreviation",children:["M","T","W","R","F","St","Sn"][a]}),(0,yt.jsx)("div",{className:"day-percentage",children:t(e)})]},a)))})]})},Ca=e=>{let{tutorialInfo:t}=e;const a=t.message,n=t.icon,r=t.showNext,s=t.showPrev,i=ta(),l=qt().getTutorialManager(),o=r?"Next":"Close";return(0,yt.jsxs)("div",{className:"notebook-tutorial-container",children:[(0,yt.jsxs)("div",{className:"notebook-tutorial-contents left",children:[(0,yt.jsx)("div",{className:"tutorial-title-container",children:(0,yt.jsx)("div",{className:"tutorial-title",children:t.title})}),(0,yt.jsx)("div",{className:"notebook-icon-container",children:(0,yt.jsx)(Et,{imageId:n})}),(0,yt.jsx)("div",{className:"pill-button remove",children:(0,yt.jsx)("div",{className:"pill-button-disable",onClick:()=>(i.closeTutorial(),void l.disableTutorial()),children:"DISABLE TUTORIAL"})})]}),(0,yt.jsxs)("div",{className:"notebook-tutorial-contents right",children:[(0,yt.jsx)("div",{className:"tutorial-message-container",children:(0,yt.jsx)("div",{className:"tutorial-message",dangerouslySetInnerHTML:{__html:a}})}),(0,yt.jsxs)("div",{className:"notebook-tutorial-buttons",children:[void 0!==s&&s>=0&&(0,yt.jsx)("div",{className:"nav-button prev",onClick:()=>{void 0!==s&&s>=0&&i.showTutorialPage(s)},children:"Previous"}),(0,yt.jsx)("div",{className:"nav-button next",onClick:()=>{void 0!==r&&r>=0?i.showTutorialPage(r):i.closeTutorial()},children:o})]})]})]})},Ma=e=>{let{notebookPages:t,singleColumn:a,pageIndex:r}=e;const s=ta(),[i,l]=n.useState(r||0),o=()=>{s.closeNotebook()};(0,n.useEffect)((()=>{l(r||0)}),[r]);const c=t[i],d=()=>{l(0),s.removePlayer(c.content.player)},b=t.map(((e,t)=>(0,yt.jsx)("div",{className:`notebook-tab ${e.category} ${t===i?"current":""}`,onClick:()=>l(t),children:(0,yt.jsx)("div",{className:"notebook-tab-title",children:e.title})},t)));return c?(0,yt.jsxs)("div",{className:`notebook-modal ${a?"single-column":""} ${c.category===f?"tutorial":""}`,children:[c.category===f?(0,yt.jsx)(Ca,{tutorialInfo:c.content}):(0,yt.jsxs)("div",{className:"notebook-container",children:[(0,yt.jsx)("div",{className:"notebook-tabs",children:b}),(0,yt.jsxs)("div",{className:`notebook-content ${c.category}`,onClick:e=>e.stopPropagation(),children:[c?c.category===u||c.category===h?(0,yt.jsxs)("div",{className:`notebook-header ${c.category} `,children:[(0,yt.jsx)("button",{className:"pill-button",onClick:o,children:"X"}),(0,yt.jsx)("div",{className:"notebook-header-title",children:c.category.toUpperCase()})]}):c.category===g?(0,yt.jsxs)("div",{className:"notebook-header player ",children:[a?(0,yt.jsx)("button",{className:"pill-button remove",onClick:d,children:"REMOVE"}):(0,yt.jsx)("button",{className:"pill-button",onClick:o,children:"X"}),(0,yt.jsx)("div",{className:"notebook-header-title",children:c.category.toUpperCase()})]}):c.category===m?(0,yt.jsxs)("div",{className:"notebook-header character ",children:[(0,yt.jsx)("button",{className:"pill-button",onClick:o,children:"X"}),(0,yt.jsx)("div",{className:"notebook-header-title",children:c.category.toUpperCase()}),(0,yt.jsx)("div",{className:"notebook-header-container"})]}):c.category===y||c.category===m?(0,yt.jsxs)("div",{className:`notebook-header player ${c.category}  `,children:[(0,yt.jsx)("div",{className:"notebook-header-title",children:c.category.toUpperCase()}),(0,yt.jsx)("div",{className:"notebook-header-container"})]}):(0,yt.jsxs)("div",{className:`notebook-header  ${c.category} `,children:[(0,yt.jsx)("button",{className:"pill-button",onClick:o,children:"X"}),(0,yt.jsx)("div",{className:"title-bar",children:(0,yt.jsx)("div",{className:"title-text",children:c.title})})]}):(0,yt.jsx)("div",{className:"notebook-header "}),(0,yt.jsx)("div",{className:"notebook-body",children:(()=>{if(!c)return(0,yt.jsx)("div",{className:"notebook-body"});switch(c.category){case u:return(0,yt.jsx)(Ea,{encounterInfo:c.content});case m:return(0,yt.jsx)(Sa,{characterInfo:c.content});case h:return(0,yt.jsx)(Na,{locationInfo:c.content});case g:return(0,yt.jsx)(Ta,{playerInfo:c.content,singleColumn:a,clickChar:e=>{l(e+1)}});case p:return(0,yt.jsx)("div",{className:"notebook-category-message",children:(0,yt.jsx)("div",{className:"notebook-message-text",children:c.content.message})});case v:return(0,yt.jsx)("div",{});case y:return(0,yt.jsx)(xa,{groupInfo:c.content});case f:return(0,yt.jsx)(Ca,{tutorialInfo:c.content})}})()})]})]}),a&&(0,yt.jsx)("div",{className:"group-schedule-holder",children:(0,yt.jsx)(Aa,{})})]}):(0,yt.jsx)("div",{className:"notebook-modal"})},wa=e=>{let{buttonList:t,highlight:a}=e;const n=qt(),r=e=>{switch(e){case E:n.state=aa.PLAYER_RECRUITMENT;break;case S:n.state=aa.CHARACTER_CREATION;break;case b:n.state=aa.CAMPAIGN_SETUP;break;default:console.log("No entry")}};return(0,yt.jsx)("div",{className:"nav-bar-container",children:t.map((e=>(e=>{let t=e===a?"highlight":"";switch(e){case E:return(0,yt.jsx)("button",{className:`nav-button player ${t}`,onClick:()=>r(e),children:"Player Recruitment"},e);case S:return(0,yt.jsx)("button",{className:`nav-button character ${t}`,onClick:()=>r(e),children:"Character Assignment"},e);case b:return(0,yt.jsx)("button",{className:`nav-button campaign ${t}`,onClick:()=>r(e),children:"Campaign Select"},e);default:return null}})(e)))})},Ra=e=>{let{appManager:t,playerManager:a}=e;const[r,s]=(0,n.useState)(a.getSelectedPlayerIds()),[i,l]=(0,n.useState)([]),o=(null===a||void 0===a?void 0:a.getRecruitablePlayers())||[],c=ta(),d=r.length;a.aggregateSchedule();return(0,n.useEffect)((()=>{a.setSelectedPlayers(r),l((e=>{let t,n="",r=[];t={players:e.map((e=>a.getRecruitablePlayers()[e]))},n="Group Info",t.players.forEach((e=>{r.push({category:g,content:{player:e},title:e.name.split(" ").map((e=>e[0])).join("")})}));return[{category:y,content:t,title:"Group Info"},...r]})(r))}),[a,r]),(0,n.useEffect)((()=>{const e=e=>{s((t=>{const n=Array.from(t),r=n.indexOf(e.id);return r>-1&&n.splice(r,1),a.setSelectedPlayers(n),n}))};return c.on("removePlayer",e),()=>{c.off("removePlayer",e)}}),[]),(0,yt.jsxs)("div",{className:"player-recruitment-mode",children:[(0,yt.jsxs)("div",{className:"player-status-container",children:[(0,yt.jsx)("div",{className:"player-recruitment-left-container",children:(0,yt.jsx)(Ma,{notebookPages:i,singleColumn:!0})}),(0,yt.jsx)(wa,{buttonList:[b,S],highlight:S})]}),(0,yt.jsxs)("div",{className:"player-grid-container",children:[(0,yt.jsx)("div",{className:"player-recruitment-status",children:0===d?"Select players to recruit":'Click "Accept Group" to continue'}),(0,yt.jsx)("div",{className:"player-grid",children:o.map((e=>(0,yt.jsx)(ya,{player:e,isSelected:r.includes(e.id),onSelect:()=>{return t=e.id,s((e=>{const n=Array.from(e),r=n.indexOf(t);return r>-1?n.splice(r,1):n.push(t),a.setSelectedPlayers(n),n})),void a.getRecruitablePlayers()[t];var t},showSchedule:!0,showPreferences:!0},e.id)))})]})]})},ka=e=>{let{}=e;const t=Jt(),a=Zt(),[r,s]=(qt(),(0,n.useState)(null)),[i,l]=(0,n.useState)(t.getPlayers()),[o,c]=(0,n.useState)(a.getCharacterReferences()),[d,u]=(0,n.useState)(!1);(0,n.useEffect)((()=>{!r&&i.length&&s(i[0])}),[i]);const h=()=>{u(!d)},m=e=>i.some((t=>t.id!==(null===r||void 0===r?void 0:r.id)&&t.characters.includes(e)));return(0,yt.jsxs)("div",{className:"character-creation-container",children:[(0,yt.jsxs)("div",{className:"character-creation-left-container",children:[(0,yt.jsx)(wa,{buttonList:[E,b],highlight:b}),(0,yt.jsx)("div",{className:"player-list-container",children:(0,yt.jsx)("div",{className:"player-list",children:i.map((e=>(0,yt.jsx)(ya,{player:e,isSelected:(null===r||void 0===r?void 0:r.id)===e.id,onSelect:()=>(e=>{s(e)})(e),showSchedule:!1,showCharacters:!0,parentUpdate:h},e.id)))})})]}),(0,yt.jsx)("div",{className:"character-creation-right-container",children:(0,yt.jsx)("div",{className:"character-grid",children:o.map((e=>{var a;return(0,yt.jsx)(ha,{character:e,isSelected:null!==(a=null===r||void 0===r?void 0:r.characters.includes(e))&&void 0!==a&&a,onSelect:()=>(e=>{m(e)||r&&(r.characters.includes(e)?t.removeCharacterFromPlayer(r,e):r.characters.length<4&&t.assignCharactersToPlayer(r,[e]),l([...t.getPlayers()]))})(e),showAbilities:!0,isAssigned:null===r||void 0===r?void 0:r.characters.includes(e),isAssignedToOther:m(e)},e.id)}))})})]})},ja=e=>{let{encounter:t}=e;const a=ta();return(0,yt.jsxs)("div",{className:`encounter-display ${t.location.themes[0]}`,onClick:()=>{a.showBasicNotebook(u,t)},children:[(0,yt.jsx)("div",{className:"encounter-name",children:t.name}),(0,yt.jsx)("div",{className:"encounter-event-icons",children:t.events.map(((e,t)=>(0,yt.jsx)("div",{className:"encounter-event-icon",children:(0,yt.jsx)(Et,{imageId:a.getEventIcon(e.type)})},t)))})]})},Oa=e=>{let{processedEncounters:t}=e;return t?(0,yt.jsx)("div",{className:"campaign-display-body",children:t.map(((e,t)=>(0,yt.jsx)("div",{className:"encounter-row",children:e.map(((e,t)=>(0,yt.jsx)(ja,{encounter:e},t)))},t)))}):(0,yt.jsx)("div",{children:"No encounters!"})},Ia=e=>{let{campaign:t}=e;return(0,yt.jsxs)("div",{className:"campaign-display-header",children:[(0,yt.jsx)("div",{className:"campaign-icon",children:(0,yt.jsx)(Et,{imageId:t.icon})}),(0,yt.jsxs)("div",{className:"campaign-info",children:[(0,yt.jsx)("div",{className:"campaign-name",children:(0,yt.jsx)("strong",{children:t.name})}),(0,yt.jsx)("div",{className:"campaign-description",children:t.description})]}),(0,yt.jsxs)("div",{className:"campaign-extra",children:[(0,yt.jsxs)("div",{children:[t.nbCharacters[0]," - ",t.nbCharacters[1]," characters"]}),(0,yt.jsxs)("div",{children:[t.nbSessions[0]," - ",t.nbSessions[1]," sessions"]})]})]})},La=e=>{let{campaign:t,onSelect:a,collapsed:n,iconOnly:r,onAccept:s,onCancel:i,acceptText:l="ACCEPT"}=e;return(0,yt.jsx)(yt.Fragment,{children:r?(0,yt.jsxs)("div",{className:`campaign-display ${t.theme||""} icon-only`,onClick:a,children:[(0,yt.jsx)("div",{className:"campaign-name",children:t.name}),(0,yt.jsx)("div",{className:"campaign-icon solo",children:(0,yt.jsx)(Et,{imageId:t.icon})})]}):n?(0,yt.jsx)("div",{className:`campaign-display ${t.theme||""} collapsed pill-shaped`,onClick:a,children:(0,yt.jsx)(Ia,{campaign:t})}):(0,yt.jsxs)("div",{className:`campaign-display ${t.theme||""} full`,children:[(0,yt.jsx)(Ia,{campaign:t}),(0,yt.jsx)(Oa,{processedEncounters:t.processedEncounters}),(0,yt.jsx)("div",{className:"campaign-display-footer",children:(0,yt.jsxs)("div",{className:"ui-actions",children:[(0,yt.jsx)("button",{className:"campaign-button cancel "+(i?"":" hidden"),onClick:i,children:"Cancel"}),(0,yt.jsx)("button",{className:"campaign-button accept",onClick:s,children:l})]})})]})})},Pa=e=>{let{openCampaign:t}=e;const a=Jt(),r=qt(),s=$t(),[i]=(0,n.useState)(s.getAvailableCampaigns()),[l,o]=(0,n.useState)(t),[c]=(0,n.useState)(a.getPlayers());return(0,n.useEffect)((()=>{}),[l]),(0,yt.jsxs)("div",{className:"campaign-setup-container",children:[(0,yt.jsxs)("div",{className:"player-list-container",children:[(0,yt.jsx)(wa,{buttonList:[E,S]}),(0,yt.jsx)("div",{className:"player-list",children:c.map((e=>(0,yt.jsx)(ya,{player:e,isSelected:!1,onSelect:()=>{},showCharacters:!0,showSchedule:!1},e.id)))})]}),(0,yt.jsx)("div",{className:"campaign-display-container",children:(0,yt.jsx)("div",{className:"campaign-list-container",children:(0,yt.jsx)("div",{className:"campaign-list",children:i.map(((e,t)=>(0,yt.jsx)(La,{collapsed:l!==t,campaign:e,onSelect:()=>(e=>{o(e)})(t),onAccept:()=>{return e=t,s.startCampaign(e),void(a.readyForGame()&&(r.state=aa.SESSION));var e},onCancel:()=>{o(void 0)}},t)))})})})]})},_a={RACE:{HUMANS:{name:"humans",preference:i.MAIN,friendly:!0},ELVES:{name:"elves",preference:i.MAIN,friendly:!0},DWARVES:{name:"dwarves",preference:i.MAIN,friendly:!0},ORCS:{name:"orcs",preference:i.MAIN,friendly:!0},HALFLINGS:{name:"halflings",preference:i.MAIN,friendly:!0},HALF_ORCS:{name:"half-orcs",preference:i.MAIN,friendly:!0},HALF_ELVES:{name:"half-elves",preference:i.MAIN,friendly:!0},HUNTERS:{name:"hunters",friendly:!0}},MONSTERS:{GOBLINS:{name:"goblins",enemy:!0},GNOMES:{name:"gnomes",enemy:!0},DRAGONS:{name:"dragons",enemy:!0},UNDEAD:{name:"undead",preference:i.MAIN,enemy:!0},BEASTS:{name:"beasts",enemy:!0},CULTISTS:{name:"cultists",enemy:!0},BANDITS:{name:"bandits",enemy:!0},MONSTERS:{name:"monsters",enemy:!0}},GAME:{EXPOSITION:{name:"exposition"},FIGHTING:{name:"fighting",preference:i.MAIN},PUZZLES:{name:"puzzles",preference:i.MAIN},SOCIALIZING:{name:"socializing"},STRATEGY:{name:"strategy"},TOWN:{name:"town",preference:i.START},EXPLORATION:{name:"exploration"},TREASURE_HUNTING:{name:"treasure hunting"},POLITICS:{name:"politics"},SCARY:{name:"scary"},MAGIC:{name:"magic",preference:i.START},TOOLS:{name:"tools"},TECHNOLOGY:{name:"technology"},RELIGION:{name:"religion"},ECONOMICS:{name:"economics"},CRAFTING:{name:"crafting"},TRADING:{name:"trading"},FARMING:{name:"farming"},TRAVEL:{name:"travel",preference:i.START},BORING_THINGS:{name:"boring things"},GOSSIP:{name:"gossip"},HEALING:{name:"healing"},CURSE:{name:"curse"},ARCHERY:{name:"archery"},EVIL:{name:"evil"},MACHINES:{name:"machines"},TRAPS:{name:"traps"},MYSTERY:{name:"mystery"}},TREASURE:{TREASURE:{name:"treasure"},WEAPONS:{name:"weapons"},ARMOR:{name:"armor"},KNOWLEDGE:{name:"knowledge"},SPELLS:{name:"spells"},GLORY:{name:"glory"},GOLD:{name:"gold"}},LOCATION:{DUNGEON:{name:"dungeons"},CITIES:{name:"cities"},WILDERNESS:{name:"the wilderness"},UNDERGROUND:{name:"underground",preference:i.START},MOUNTAINS:{name:"mountains"},FORESTS:{name:"forests",preference:i.START},DESERTS:{name:"deserts"},SWAMPS:{name:"swamps"},OCEANS:{name:"oceans"},ISLANDS:{name:"islands"},VILLAGES:{name:"villages"},RUINS:{name:"ruins",preference:i.START},CASTLES:{name:"castles",preference:i.START},CAVE:{name:"caves",preference:i.START},PLAINS:{name:"plains"},TAVERNS:{name:"taverns"},BEACHES:{name:"beaches"},BRIDGES:{name:"bridges"},BUILDINGS:{name:"buildings"},CAMP:{name:"camp"},TOWER:{name:"tower"},CABIN:{name:"cabin"}},TRAVEL:{SHIPS:{name:"ships"},ROADS:{name:"roads"},HORSES:{name:"horses"}},PROPS:{FURNITURE:{name:"furniture",attributeDefault:"furniture"},BARRELS:{name:"barrels",attributeDefault:"furniture"},BOOKS:{name:"books",attributeDefault:"furniture"},CANDLES:{name:"candles",attributeDefault:"furniture"},FOOD:{name:"food",attributeDefault:"food"},DRINKS:{name:"drinks",attributeDefault:"food"},BEER:{name:"beer",attributeDefault:"food"},WINE:{name:"wine",attributeDefault:"food"},BELL:{name:"bell",attributeDefault:"furniture"},COULDRON:{name:"couldron",attributeDefault:"furniture"},ROPE:{name:"rope",attributeDefault:"furniture"},STATUES:{name:"statues"},RUNES:{name:"runes"}},EVENTS:{FESTIVALS:{name:"festivals"},BATTLES:{name:"battles"},TOURNAMENTS:{name:"tournaments"},QUESTS:{name:"quests",preference:i.START},MYSTERIES:{name:"mysteries"},DISASTERS:{name:"disasters"},CELEBRATIONS:{name:"celebrations"},RITUALS:{name:"rituals"},NOBILITY:{name:"nobility"}},ELEMENTS:{FIRE:{name:"fire"},DARKNESS:{name:"darkness"},WATER:{name:"water"},FOLIAGE:{name:"foliage"},FOG:{name:"fog"},SMOKE:{name:"smoke"}},SCENERY:{TREES:{name:"trees"},MOUNTAINS:{name:"mountains"},RIVERS:{name:"rivers"},LAKES:{name:"lakes"},CAVES:{name:"caves"},BOULDERS:{name:"boulders"}},ANIMALS:{CHICKENS:{name:"chickens"},COWS:{name:"cows"},DEER:{name:"deer"},BEARS:{name:"bears"}},SOUNDS:{CLICKING:{name:"clicking"}}},Da="town",Ba="tavern",Fa="building",Ua="dungeon",Ha="water",Ga="forest",Wa="mountain",Ka="cave",za={COMBAT:{name:"Combat",type:At.COMBAT},ROLEPLAY:{name:"Roleplay",type:At.ROLEPLAY},EXPLORATION:{name:"Exploration",type:At.EXPLORATION},PUZZLE:{name:"Puzzle",type:At.PUZZLE},PERCEPTION:{name:"Perception Check",type:At.PERCEPTION},TOWN:{name:"Town",type:At.TOWN},TRAVEL:{name:"Travel",type:At.TRAVEL},CHALLENGE:{name:"Challenge",type:At.CHALLENGE},TRAP:{name:"Trap",type:At.TRAP},CHARACTER_BACKSTORY:{name:"Character Backstory",type:At.CHARACTER_BACKSTORY},STORY:{name:"Story",type:At.STORY},EXPOSITION:{name:"Exposition",type:At.EXPOSITION}},Va={BREWER_KEVIN:{name:"Kevin the Brewer"},KIDNAPPING:{name:"Kidnapping"},OLD_LAKE:{name:"Old Lake"},CULT_LEADER:{name:"Cult Leader"}},Ya={TEMPLE:{name:"Sagewood Temple",type:k.TEMPLE,description:"Heal wounds, or resurrect fallen heroes.",tags:[Va.CULT_LEADER,_a.GAME.RELIGION],nbTags:1,effects:[{type:R.HEAL,value:99},{type:R.RESURRECT,value:1}]},SHOP:{name:"Ricky's Shop",type:k.SHOP,description:"Magic items, goods, and an attitude...",tags:[_a.TREASURE.ARMOR,_a.TREASURE.WEAPONS],allowMagicItems:!0,nbTags:3,effects:[{type:R.REPLENISH_TOOLS,value:1},{type:R.ADD_TENSION,value:5}]},MARKETPLACE:{name:"Marketplace",type:k.SHOP,description:"Replenish tools and talk with townsfolk.",tags:[_a.GAME.TOOLS],addFriendlyTags:!0,effects:[{type:R.REPLENISH_TOOLS,value:99}]},TAVERN:{name:"Tavern",type:k.TAVERN,description:"Gossip, rumors, and conversation.",tags:[_a.PROPS.DRINKS,_a.PROPS.BARRELS,_a.RACE.HUMANS,_a.RACE.HALFLINGS],addFriendlyTags:!0,effects:[{type:R.ADD_ENJOYMENT,value:1}]},GUILD_HALL:{name:"Adventurer's Guild",type:k.GUILD_HALL,description:"Replenish Magic, Level Up, and find magic items.",tags:[_a.GAME.LEVEL_UP],allowMagicItems:!0,nbTags:3,addFriendlyTags:!0,effects:[{type:R.REPLENISH_MAGIC,value:99}]},CONFRONTATION:{name:"Tense Standoff",type:k.CONFRONTATION,description:"Hostile strangers walk the streets of Sagewood... ",tags:[_a.MONSTERS.CULTISTS,Va.CULT_LEADER],nbTags:1,effects:[{type:R.ADD_TENSION,value:10}]},CONFRONTATION2:{name:"Slums",type:k.CONFRONTATION,description:"The heroes stumble into a bad part of town... ",tags:[],nbTags:0,effects:[{type:R.ADD_TENSION,value:10}]}},Qa={SAGEWOOD_TAVERN:{name:"Sagewood Tavern",description:"A cozy tavern in the heart of Sagewood. Two halfling barmids serve drinks to a variety of customers. Locals gossip and are usually up for a friendly game of dice or a dance with outsiders. A fire crackles on the hearth.",icon:"cd_l_sagewoodtavern",tags:[_a.PROPS.BARRELS,_a.ELEMENTS.FIRE,_a.RACE.HUMANS,_a.RACE.HALFLINGS,_a.PROPS.DRINKS],themes:[Da,Ba]},UNDER_THE_WELL:{name:"Under the Well",description:"A huge underground cavern with a deep pool in the center. The opening to the town well looms above.",icon:"cd_l_underthewell",tags:[_a.LOCATION.DUNGEON,_a.GAME.SCARY],themes:[Ua,Ha]},LAKESIDE_BREWERY:{name:"Lakeside Brewery",description:"A small brewery on the edge of the lake. Something sinister has happened here.",icon:"cd_l_sagewoodbrewery",tags:[_a.PROPS.BEER,_a.ELEMENTS.WATER,_a.PROPS.BARRELS],themes:[Da]},LAKESIDE:{name:"Lakeside",description:"A forested area along a quiet lake. The water is dark and still.",icon:"cd_l_lakeside",tags:[_a.LOCATION.WILDERNESS,_a.ELEMENTS.WATER,_a.ELEMENTS.FOLIAGE],themes:[Ga]},LAKESIDE_CLIFFS:{name:"Lakeside Cliffs",description:"A series of cliffs overlooking the lake. Signs of Goblins are about.",icon:"cd_l_lakesidecliffs",tags:[_a.LOCATION.CAVE,_a.MONSTERS.GOBLINS,_a.ELEMENTS.WATER,_a.ELEMENTS.FOLIAGE],themes:[Wa,Ga]}},Xa={SAGEWOOD:{id:1,name:"Cultist Conspiracy",description:"The party arrives at a tavern on the ouskirts of Sagewood just as the sun sets. They each have their own reasons for being there, but for this evening they all have one thing in common... they are the only strangers in the tavern. Some locals seem friendly, while others gather in small clusters around the smoky common room and glare at the party. The barmaids offer the party drinks and food. The party may overhear gossip about Kevin the Brewer, or notice strange tattoos on some of the locals. They may uncover clues to a mysterious goblin treasure by the old lake, or discover that several townspeople have gone missing recently. The party may take part in a dance competition with the locals if they like. A group of the locals with odd tattoos will use any excuse to start a fight with the party. ",icon:"cd_e_sagewoodtavern",location:Qa.SAGEWOOD_TAVERN,tags:[_a.EVENTS.MYSTERIES,_a.MONSTERS.CULTISTS,Va.BREWER_KEVIN,Va.KIDNAPPING],branches:[],events:[{name:"Gossip and Rumors",type:At.ROLEPLAY,flavorText:"The party chats with locals in the tavern. They may hear interesting rumors."},{name:"Dance Competition",type:At.CHALLENGE,flavorText:"The party is challenged to a danceoff. Maybe they'll notice something strange about the locals...",tags:[_a.RACE.HALFLINGS,_a.RACE.HUMANS]},{name:"Tavern Brawl",type:At.COMBAT,flavorText:"The party is ambushed in the tavern."},za.PERCEPTION,{name:"Sagewood",type:At.TOWN,flavorText:"Shop, rest, and gather information in the town of Sagewood."}],combat:[{name:"Bar Brawl",description:"Things get out of hand in the Sagewood Tavern.",enemy:_a.MONSTERS.CULTISTS,nbEnemies:2}],challenge:[{name:"Dance-off in the Tavern",description:"The party is challenged to a dance-off by some of the locals. The winner gets a free drink."}],town:[{buildings:[Ya.TAVERN,Ya.SHOP,Ya.GUILD_HALL,Ya.MARKETPLACE,Ya.TEMPLE,Ya.CONFRONTATION,Ya.CONFRONTATION2],nbBuildings:[5,6]}]},UNDER_THE_WELL:{id:2,name:"Fishy Finale!",description:"The heroes stumble into the Cultists Lair. They were set up under the old well in the center of town all along. Their fish-based magic will be put to the test during this long combat-based finale!.",icon:"cd_e_underthewell",location:Qa.UNDER_THE_WELL,tags:[_a.GAME.FIGHTING,_a.GAME.SCARY,_a.MONSTERS.CULTISTS,_a.MONSTERS.MONSTERS],branches:[],events:[]},BREWERY_FIGHT:{id:3,name:"Brewery Battle",description:"The party investigates a local brewery. The Brewer, Kevin, hasn't been seen in town recently and barrel deliveries to the local tavern have been ...off. The party may be aware of a cult hiding in the brewery, so be sure to adjust the difficulty if the party takes the time to examine thier surroundings to see how best to approach. In any case, the Cult Leaders will attack when they notice the party. While in the brewery, characters may notice a tunnel leading underground towards the old lake and they might even discover signs that indicate some of the kidnapped townspeople had been taken that direction. ",icon:"cd_e_sagewoodbrewery",location:Qa.LAKESIDE_BREWERY,tags:[_a.GAME.FIGHTING,Va.CULT_LEADER,_a.PROPS.BEER],branches:[],events:[{name:"Interrogation",type:At.ROLEPLAY,flavorText:"The party corners a scared cultist and demands some information...."},{name:"Drinking Competition",type:At.CHALLENGE,flavorText:"While we are here...",tags:[_a.PROPS.BEER]},{name:"Cult, Culter, Cultist",type:At.COMBAT,flavorText:"The party confronts the Cult Leader and his followers."},za.PERCEPTION,za.EXPOSITION],combat:[{name:"Bar Brawl",description:"Things get out of hand in the Sagewood Tavern.",enemy:_a.MONSTERS.CULTISTS,nbEnemies:2}],challenge:[{name:"Dance-off in the Tavern",description:"The party is challenged to a dance-off by some of the locals. The winner gets a free drink."}]},BREWERY_EXPLORATION:{id:4,name:"Brewery Exploration",description:"The party investigates the Lakeside Brewery and finds evidence of the cult\u2019s activities.",icon:"cd_e_breweryexploration",location:Qa.LAKESIDE_BREWERY,tags:[_a.GAME.EXPLORATION,_a.EVENTS.MYSTERIES],branches:[],events:[]},BY_THE_LAKE:{id:5,name:"By the Lake",description:"The party discovers signs of goblins by the lake.",icon:"cd_e_bythelake",location:Qa.LAKESIDE,tags:[_a.TREASURE.TREASURE,_a.MONSTERS.GOBLINS,_a.GAME.RELIGION],branches:[],events:[{name:"Explore the Forest",type:At.PERCEPTION,flavorText:"The party checks in the forest near the lake..."},{name:"Explore the Lakeshore",type:At.PERCEPTION,flavorText:"The party checks the lakeshore..."},{name:"What's in that tree?!",type:At.CHALLENGE,flavorText:"A creepy totem hangs in a clearing. The players attempt to cut it down."},{name:"Now where is that treasure?!",type:At.CHALLENGE,flavorText:"The party search for the hidden treasure."},{name:"Goblin Ambush",type:At.COMBAT,flavorText:"Goblins rush from the forest and attack!"}],combat:[{name:"Goblin Ambush",description:"Goblins rush from the trees!",enemy:_a.MONSTERS.GOBLINS,nbEnemies:2}],challenge:[{name:"Cut down creepy totem",description:"An ominous, and magial feeling eminates from a totem hanging from a tree. It will take some thought and some care to cut it down."}]},LAKESIDE_CLIFFS:{id:6,name:"Cliff Catastrophe",description:"The party encounters a crazy goblin shaman in the Lakeside Cliffs.",icon:"cd_e_lakesidecliffs",location:Qa.LAKESIDE_CLIFFS,tags:[_a.GAME.FIGHTING,_a.MONSTERS.GOBLINS],branches:[],events:[]}};Xa.SAGEWOOD.branches.push(Xa.BREWERY_FIGHT),Xa.SAGEWOOD.branches.push(Xa.BY_THE_LAKE),Xa.BREWERY_FIGHT.branches.push(Xa.BREWERY_EXPLORATION),Xa.BREWERY_FIGHT.branches.push(Xa.BY_THE_LAKE),Xa.BY_THE_LAKE.branches.push(Xa.LAKESIDE_CLIFFS),Xa.LAKESIDE_CLIFFS.branches.push(Xa.UNDER_THE_WELL);const Za=[[Xa.SAGEWOOD],[Xa.BREWERY_FIGHT,Xa.BY_THE_LAKE],[Xa.BREWERY_EXPLORATION,Xa.LAKESIDE_CLIFFS],[Xa.UNDER_THE_WELL]],Ja={name:"Cult of the Deep",id:0,description:"Townsfolk are acting strange. Something is moving in the lake. The Cult of the Deep is rising.",icon:"cult_of_the_deep_1",startingEncounter:Xa.SAGEWOOD,finaleEncounter:Xa.UNDER_THE_WELL,theme:"dark",nbCharacters:[2,4],nbSessions:[2,3],encounters:Object.values(Xa),processedEncounters:Za,plotHooks:["The party finds fish 1","The party figures out the cultists and goblins are connected","The party discovers the cultists are kidnapping people","The party learns of a crab-monster eating people"],tooltipTags:{[Xa.SAGEWOOD.name]:{[_a.MONSTERS.CULTISTS.name]:"mention the group of weirdos in the corner",[_a.EVENTS.MYSTERIES.name]:"hint at an overheard secret",[_a.MONSTERS.GOBLINS.name]:"mention goblins by the lake",[Va.BREWER_KEVIN.name]:"there's a rumor about Kevin",[Va.KIDNAPPING.name]:"someone mentions a recent kidnapping",[_a.PROPS.DRINKS.name]:"describe the beer",[Va.OLD_LAKE.name]:"A rumor about a nearby lake",[_a.ELEMENTS.FIRE.name]:"The fireplace comes up",[_a.PROPS.BARRELS.name]:"a player notices an ale barrel",[_a.RACE.HALFLINGS.name]:"mention the halfling barmaids",[_a.RACE.HUMANS.name]:"describe the human patrons",[_a.PROPS.BEER.name]:"converse about beer",[_a.TREASURE.TREASURE.name]:"mention the treasure",[_a.GAME.RELIGION.name]:"mention the goblins religion",[_a.GAME.FIGHTING.name]:"make sure they realize there will be combat at the brewery"}},chatTriggers:{[Xa.SAGEWOOD.name]:{[_a.MONSTERS.CULTISTS.name]:"You notice a group of humans in red robes and with a strange octopus tattoo. They seem to be eyeing you suspiciously.",[_a.EVENTS.MYSTERIES.name]:"You overhear someone speak about a goblin treasure. Someone else interrupts and claims that they saw a goblin camp near the old lake.",[_a.MONSTERS.GOBLINS.name]:"A table of townspeople loudly argue nearby. They seem to be discussing goblins, but quiet down when they notice you listening.",[Va.BREWER_KEVIN.name]:"The bartender mentions that Kevin the Brewer hasn't been seen in days and that strange people have been delivering the beer.",[Va.KIDNAPPING.name]:"A man says he doesn't recognize you and cautions you to be careful. He goes on to explain that several people have gone missing recently.",[Va.CULT_LEADER.name]:{message:"With all these cultists, I bet there's a cult LEADER around... maybe at the brewery!",speaker:{type:N.PLAYER,id:1}},[_a.PROPS.DRINKS.name]:"The beer is supposed to be the best in the region, but it tastes awful. When you ask the barmaid about it she says you should complain to Kevin at the Brewery",[Va.OLD_LAKE.name]:"A young couple loudly complain to some friends, they are trying to find a place to picnic but they indicate that the old lake is now teeming with goblins.",[_a.PROPS.BARRELS.name]:{message:"Hey look at this ale-barrel! It's got an octopus symbol on it. Octobrew..?",speaker:{type:N.CHARACTER,id:1}},[_a.ELEMENTS.FIRE.name]:{message:"I walk to the fire and warm my frigid digits. Fridgits.",speaker:{type:N.CHARACTER,id:0}},[_a.RACE.HALFLINGS.name]:{message:"I want to chat with the halfling barmaids. See if they know what's good to eat here.",speaker:{type:N.CHARACTER,id:2}},[_a.RACE.HUMANS.name]:"Most of the locals are humans. Some seem friendly but others are clearly hostile.",[_a.PROPS.BEER.name]:"Some of the locals say that if you want decent beer you should go to the brewery by the lake.",[_a.TREASURE.TREASURE.name]:"The bartender says some adventurers came through recently and said he overheard them talking about a treasure they had buried out by the old lake.",[_a.GAME.RELIGION.name]:"The party asks a priest about the local religious customs. He describes normal enough things, but says a goblin religion seems to have become popular in town...they worship a strange fish god in the nearby lake.",[_a.GAME.FIGHTING.name]:{message:'Hey guys, I can see the DM notes that say "Brewery Battle". I think we can expect combat if we go there...I\'m just getting that vibe.',speaker:{type:N.PLAYER,id:0}}}}},qa={OLD_MILL:{name:"The Old Mill",description:"An old family-owned mill on the edge of town.",icon:"mm_l_oldMill",tags:[_a.LOCATION.STARTING_LOCATION,_a.GAME.TOWN],themes:[Da]},QUARRY:{name:"The Quarry",description:"A large quarry where stone is mined.",icon:"mm_l_quarry",tags:[_a.LOCATION.WILDERNESS],themes:[Wa]},ROAD:{name:"Road",description:"A long wide road",icon:"mm_l_road",tags:[_a.LOCATION.ROAD,_a.GAME.TRAVEL],themes:[Da]},UNDER_THE_MOUNTAIN:{name:"Under the Mountain",description:"A hidden entrance leads into the gnomish mines.",icon:"mm_l_entrance",tags:[_a.LOCATION.CAVE],themes:[Wa]},TUNNELS:{name:"Gnome Tunnels",description:"Cramped tunnels deep underground.",icon:"mm_l_tunnel",tags:[_a.LOCATION.CAVE,_a.GAME.TRAVEL],themes:[Wa]},BRIDGE:{name:"The Old Bridge",description:"A rickety old bridge over a deep chasm.",icon:"mm_l_bridge",tags:[_a.LOCATION.WILDERNESS],themes:[Ga]},BEACH:{name:"The Beach",description:"A long stretch of beach.",icon:"mm_l_beach",tags:[_a.LOCATION.BEACH,_a.GAME.TRAVEL],themes:[Ha]},TOWNVILLE:{name:"TOWNVILLE",description:"A mid-sized village.",icon:"mm_l_townville",tags:[_a.GAME.TOWN,_a.LOCATION.STARTING_LOCATION,_a.LOCATION.FINALE_LOCATION,_a.RACE.HUMANS],themes:[Da]}},$a={INTRO_IN_TOWN:{id:0,name:"Intro in Townville",description:"It's a peaceful day in Townville. The Heroes can spend some time buying Gear or Roleplaying. Suddenly the alarm sounds! The Miller has run all the way from the old mill shouting about thieves!",icon:"mm_e_townville",location:qa.TOWNVILLE,tags:[_a.RACE.HUMANS,_a.EVENTS.MYSTERIES,_a.GAME.SOCIAL],branches:[],events:[]},INTRO_AT_MILL:{id:1,name:"Missing Millstone",description:"The Millstone is missing. The Miller hires the Heroes to travel to the old quarry and transport a new one. There are also some clues around the Old Mill which may reveal more about what happened. This could be the sarting Encounter if you want to shorten the campaign, or to avoid Town.",icon:"mm_e_millstone",location:qa.OLD_MILL,tags:[_a.RACE.HUMANS,_a.EVENTS.MYSTERIES,_a.GAME.SOCIAL],branches:[],events:[]},ROAD_TO_QUARRY:{id:2,name:"Road to Quarry",description:"A long boring trek to the Quarry.",icon:"mm_e_road",location:qa.ROAD,tags:[_a.GAME.TRAVEL,_a.GAME.BORING],branches:[],events:[]},QUARRY_INVESTIGATION:{id:2,name:"Quarry",description:"A large quarry where stone is mined. The millstone might be here.",icon:"mm_e_quarry",location:qa.QUARRY,tags:[_a.RACE.HUMANS,_a.GAME.SOCIAL,_a.MONSTERS.GNOMES],branches:[],events:[]},MOUNTAIN_ENTRANCE:{id:3,name:"Cave Entrance",description:"A hidden entrance in the wall of the quarry leads into the gnomish mines.",icon:"mm_e_cave",location:qa.UNDER_THE_MOUNTAIN,tags:[_a.MONSTERS.GNOMES,_a.GAME.COMBAT,_a.GAME.EXPLORATION],branches:[],events:[]},EXPLORING_THE_TUNNELS:{id:4,name:"Gnomish Tunnel Exploration",description:"Tunnels leading to the South. Towards townville?",icon:"mm_e_tunnels",tags:[_a.MONSTERS.GNOMES,_a.GAME.TRAVEL],location:qa.TUNNELS,branches:[],events:[]},BANDITS_ON_THE_BRIDGE:{id:5,name:"Bridge Bandits",description:"Bandits guard the far end. They demand payment!",icon:"mm_e_bandits",tags:[_a.RACE.HUMANS,_a.GAME.COMBAT,_a.GAME.ROLEPLAY],location:qa.BRIDGE,branches:[],events:[]},BEACH_TRAVEL:{id:6,name:"Beach Travel",description:"Traveling along the beach",icon:"mm_e_beach",tags:[_a.GAME.TRAVEL],location:qa.BEACH,branches:[],events:[]},EXPLORE_SHIPWRECK:{id:7,name:"SHIPWRECK",description:"A ship. Has wrecked! Someone is looting it!",icon:"mm_e_shipwreck",tags:[_a.RACE.HUMANS,_a.GAME.COMBAT,_a.GAME.EXPLORATION],location:qa.BEACH,branches:[],events:[]},TOWNVILLE_FIRE:{id:8,name:"Townville Fire",description:"The town of townville is on fire!",icon:"mm_e_fire",tags:[_a.RACE.HUMANS,_a.EVENTS.DISASTERS,_a.ELEMENTS.FIRE],location:qa.TOWNVILLE,branches:[],events:[]}};$a.INTRO_IN_TOWN.branches.push($a.INTRO_AT_MILL),$a.INTRO_AT_MILL.branches.push($a.ROAD_TO_QUARRY),$a.ROAD_TO_QUARRY.branches.push($a.QUARRY_INVESTIGATION),$a.QUARRY_INVESTIGATION.branches.push($a.MOUNTAIN_ENTRANCE),$a.QUARRY_INVESTIGATION.branches.push($a.BEACH_TRAVEL),$a.QUARRY_INVESTIGATION.branches.push($a.BANDITS_ON_THE_BRIDGE),$a.MOUNTAIN_ENTRANCE.branches.push($a.EXPLORING_THE_TUNNELS),$a.EXPLORING_THE_TUNNELS.branches.push($a.TOWNVILLE_FIRE),$a.BEACH_TRAVEL.branches.push($a.EXPLORE_SHIPWRECK),$a.EXPLORE_SHIPWRECK.branches.push($a.TOWNVILLE_FIRE),$a.BANDITS_ON_THE_BRIDGE.branches.push($a.TOWNVILLE_FIRE);const en=[[$a.INTRO_IN_TOWN],[$a.INTRO_AT_MILL],[$a.ROAD_TO_QUARRY],[$a.QUARRY_INVESTIGATION],[$a.MOUNTAIN_ENTRANCE,$a.BEACH_TRAVEL,$a.BANDITS_ON_THE_BRIDGE],[$a.EXPLORING_THE_TUNNELS,$a.EXPLORE_SHIPWRECK],[$a.TOWNVILLE_FIRE]],tn={name:"Millstone Mystery",id:0,description:"The Millstone has mysteriously gone missing! While investigating what happened, the heroes may be delving into gnomish caves, or fighting scavengers along the beach.",icon:"millstone_mystery_1",theme:"adventure",nbCharacters:[2,4],nbSessions:[4,6],startingEncounter:$a.INTRO_IN_TOWN,finaleEncounter:$a.TOWNVILLE_FIRE,encounters:Object.values($a),processedEncounters:en},an={VILLAGE_ELDER:{name:"Village Elder"},DANCING:{name:"Dancing"},ELVEN_PRIEST:{name:"Elven Priest"}},nn={ELDERS_HOME:{name:"Elder Rose's Hut",type:k.TEMPLE,description:"Heal wounds, or resurrect fallen heroes.",tags:[an.VILLAGE_ELDER],nbTags:2,effects:[{type:R.HEAL,value:99},{type:R.RESURRECT,value:1}]},SHOP:{name:"Vilage Goods",type:k.SHOP,description:"Basic goods and supplies.",tags:[_a.GAME.TOOLS],addFriendlyTags:!0,nbTags:3,effects:[{type:R.REPLENISH_TOOLS,value:99}]},SPECIAL_SHOP:{name:"Adventuring Goods",type:k.SHOP,description:"Replenish tools and talk with townsfolk.",tags:[_a.TREASURE.ARMOR,_a.TREASURE.WEAPONS],effects:[{type:R.REPLENISH_TOOLS,value:99}],allowMagicItems:!0},TAVERN:{name:"Tavern",type:k.TAVERN,description:"Drinks, food, and gossip.",tags:[_a.ELEMENTS.FOG,_a.RACE.HUMANS,_a.RACE.HALFLINGS,_a.PROPS.BEER],addFriendlyTags:!0,effects:[{type:R.ADD_ENJOYMENT,value:1}]},CONFRONTATION:{name:"Fog Peril",type:k.CONFRONTATION,description:"Tendrils of fog seem to follow the hero...they are unsettling ",tags:[_a.ELEMENTS.FOG],nbTags:1,effects:[{type:R.ADD_TENSION,value:10}]},CONFRONTATION2:{name:"Haggle",type:k.CONFRONTATION,description:"The heroes waste time trying to get a better price...cmon! ",tags:[],nbTags:0,effects:[{type:R.ADD_INVOLVEMENT,value:-1}]},ELVEN_TEMPLE:{name:"Grand Temple",type:k.TEMPLE,description:"Heal wounds, or resurrect fallen heroes.",tags:[an.ELVEN_PRIEST],nbTags:2,effects:[{type:R.HEAL,value:99},{type:R.RESURRECT,value:1}]},ELVEN_SHOP:{name:"Elven Goods",type:k.SHOP,description:"Normal goods, but pointier.",tags:[_a.GAME.TOOLS],addFriendlyTags:!0,nbTags:3,effects:[{type:R.REPLENISH_TOOLS,value:99}],allowMagicItems:!0},MASSAGE:{name:"Treetop Spa",type:k.TAVERN,description:"Massage, healing, and luxury.",tags:[],addFriendlyTags:!0,nbTags:2,effects:[{type:R.REPLENISH_MAGIC,value:99},{type:R.ADD_ENJOYMENT,value:1},{type:R.HEAL,value:1}]},GATHERING_AREA:{name:"Suspended Plaza",type:k.MARKETPLACE,description:"Shaded outdoor lounge with magic vendors.",tags:[],addFriendlyTags:!0,allowMagicItems:!0,nbTags:2,effects:[]},NASTY_FALL:{name:"Nasty Fall",type:k.CONFRONTATION,description:"The treetop bridges are narrow and falls are always a danger...",tags:[_a.SCENERY.TREES],nbTags:1,effects:[{type:R.INJURE,value:1}]},SLUMS:{name:"Elven Slums",type:k.CONFRONTATION,description:"The heroes wander into a bad tree...",tags:[_a.RACE.ELVES],nbTags:1,effects:[{type:R.ADD_TENSION,value:10}]}},rn={FAIRLIGHT:{name:"Fairlight Village",description:"A cozy village nestled at the base of the Windy Mountains. Known for it's annual Fairlight Festival and nothing else, this village is mainly just a hangout for peasants, chickens, cows, and the occasional adventurer setting out on a quest into the mountains.",icon:"mm_l_fairlight",tags:[_a.RACE.HUMANS,_a.RACE.HALFLINGS,_a.ANIMALS.CHICKENS,_a.LOCATION.BUILDINGS,_a.ELEMENTS.FOG],themes:[Da]},WINDY_MOUNTAIN_PATH:{name:"Up the Windy Mountain",description:"A long and widing path up the Windy Mountains. Beginning in the small village of Fairlight, the path leads up the Windy Mountains through dense forest and is known to be dangerous, but also mysterious.",icon:"mm_l_mountain_camp",tags:[_a.SCENERY.TREES,_a.SCENERY.BOULDERS,_a.RACE.HUNTERS,_a.TRAVEL.ROADS,_a.ELEMENTS.FOG],themes:[Wa]},ELVEN_VILLAGE:{name:"Elven Tree-Village",description:"A beautiful village in and amongst the trees. Rope-bridges share the canopy with the vines and birds as Elves go about their daily business. The only part of the village that stands out is the Temple, a huge tree with ornate doors and windows growing directly from the bark.",icon:"mm_l_elven_town",tags:[_a.SCENERY.TREES,_a.RACE.ELVES,_a.LOCATION.BUILDINGS,_a.ELEMENTS.FOG],themes:[Ga]},WITCH_CABIN:{name:"Witch's Cabin",description:"A small stone cabin on the side of the mountain in the midst of a dense forest. The cabin is spewing out thick, almost-purple smoke. Inside, a couldron bubbles over a smoky fire, an imp in a cage chatters, and a pentagram inscribed on the floor glows eerily.",icon:"mm_e_cabin",tags:[_a.ELEMENTS.FOG,_a.LOCATION.CABIN,_a.PROPS.COULDRON,_a.PROPS.BOOKS,_a.GAME.MAGIC,_a.ELEMENTS.SMOKE],themes:[Fa]},DWARVEN_TUNNEL:{name:"Tunnel 23",description:"An unassuming door in the side of the mountain leads to a small, but well-constructed corridor which feeds into an impressively huge tunnel with a wide paved road and lined by shops and homes.",icon:"mm_l_tunnel",tags:[_a.ELEMENTS.FOG,_a.PROPS.RUNES,_a.RACE.DWARVES],themes:[Ua]},SMOKEY_CAVE:{name:"Smokey Cave",description:"A dark and smokey cave. The fog clings to the walls and reaches out with evil tenticles. The ground is littered with bones of recently slain dwarves, and a clicking sound can be heard throught.",icon:"cd_l_underthewell",tags:[_a.ELEMENTS.FOG,_a.RACE.DWARVES],themes:[Ka]}},sn={FAIRLIGHT_FESTIVAL:{id:1,name:"Fairlight Festival",description:"The annual Fairlight Festival in the village of Fairlight is a week-long celebration of the harvest. The Mourning Mountain seems to loom above the town, and some hunters from the mountain have come to take part in the festivities. There are dancing competitions, archery contests, and plenty of drinking. All is not perfect, however, as recently an evil, poisonous fog has been spreading down from the mountain and is now even coming close to the town! The Village Elder, Rose will ask the heroes to assist.",icon:"mm_l_fairlight",location:rn.FAIRLIGHT,tags:[_a.EVENTS.FESTIVALS,_a.GAME.CURSE,an.VILLAGE_ELDER,_a.GAME.GOSSIP],branches:[],events:[{name:"Gossip and Rumors",type:At.ROLEPLAY,flavorText:"The party can mingle with the townfolk, listen to gossip, and take part in some games."},{name:"Festival Games",type:At.CHALLENGE,flavorText:"The festival games are open to all, the heroes can try any number of games.",tags:[an.DANCING,_a.GAME.ARCHERY,_a.GAME.CRAFTING]},{name:"Farm Country Travel",type:At.TRAVEL,flavorText:"Chickens? Check. Horses? Check. Corn? Check. Wheat? Chex."},za.PERCEPTION,{name:"Fairlight",type:At.TOWN,flavorText:"Shop, rest, and gather information in the village of Fairlight ."}],town:[{buildings:[nn.ELDERS_HOME,nn.SHOP,nn.SPECIAL_SHOP,nn.TAVERN,nn.CONFRONTATION,nn.CONFRONTATION2],nbBuildings:[4,5]}],challenge:[{name:"Fesitvalname",description:"festivalscription"}]},UP_THE_MOUNTAIN:{id:2,name:"Mountain Path",description:"blah blah, fog. hunters",icon:"mm_e_up_the_mountain",location:rn.WINDY_MOUNTAIN_PATH,tags:[_a.LOCATION.CAMP,_a.ANIMALS.DEER,_a.ANIMALS.BEARS],branches:[],events:[{name:"Hunter Chatterers",type:At.ROLEPLAY,flavorText:"The party chats with some hunters and share a meal at their camp."},za.PERCEPTION,{name:"Deerfight",type:At.COMBAT,flavorText:"Some deer step out of the fog...but they seem somehow evil. They attack the party!"},{name:"Bearfight",type:At.COMBAT,flavorText:"A huge ugly bear with fog streaming from it's head rears up!"},{name:"Up up up the road",type:At.TRAVEL,flavorText:"The way up the road is long."}],combat:[{name:"Deerfighter",description:"Deerscription",enemy:_a.ANIMALS.DEER,nbEnemies:2},{name:"Bearfighter",description:"Bearrrrrscription",enemy:_a.ANIMALS.BEAR,nbEnemies:1}]},POINTED_CONVERSATIONS:{id:3,name:"Pointed Conversations",description:"blah blah, fog. elves",icon:"mm_e_pointed",location:rn.ELVEN_VILLAGE,tags:[_a.LOCATION.TOWER,an.ELVEN_PRIEST,_a.PROPS.WINE],branches:[],events:[{name:"Treetop Town",type:At.TOWN,flavorText:"The party corners a scared cultist and demands some information...."},{name:"Wine Competition",type:At.CHALLENGE,flavorText:"Elven wine is some of the winey-est wine. The party can try to win a wine competition.",tags:[_a.PROPS.WINE,_a.RACE.ELVES]},{name:"Priest Chat",type:At.ROLEPLAY,flavorText:"The party has a conversation with the Elven Priest."},za.PERCEPTION],town:[{buildings:[nn.ELVEN_TEMPLE,nn.ELVEN_SHOP,nn.MASSAGE,nn.GATHERING_AREA,nn.NASTY_FALL,nn.SLUMS],nbBuildings:[4,5]}]},BELL_SMOKE:{id:4,name:"Bells and Smoke",description:"As the players approach the Witch's Cabin, they will notice that the fog appears to avoid a species of tree growing near the cabin. The owner of the cabin, Fred Witch, is a friendly and relaxed gnome with a traditional red hat and a green thumb. He is proud of his garden and is happy to chat about the fog. He will lead the party to the Dwarven Tunnel if they ask. There is a bell inside the cabin which he seems completely unaware of but which is making a regular deep ringing. Each time it tolls, the characters will become confused. Kevin may ask the party to help with a _____ PUZZLE OF SOME KIND.",icon:"mm_l_witch",location:rn.WITCH_CABIN,tags:[_a.SCENERY.TREES,_a.PROPS.BELL,_a.ELEMENTS.SMOKE],branches:[],events:[{name:"Approach the Bell",type:At.CHALLENGE,flavorText:"Disable, or silence the bell to clear your head.",tags:[_a.GAME.MAGIC,_a.PROPS.BELL,_a.PROPS.ROPE]},{name:"Kevin Witch",type:At.ROLEPLAY,flavorText:'"The Witch" is Kevin Witch, a gardener-gnome'},{name:"Cabin Snares",type:At.TRAP,flavorText:"The area around the cabin is full of traps."},{name:"Witch book is witch?",type:At.PUZZLE,flavorText:"Kevin asks for a hand with something..."},za.PERCEPTION]},TUNNEL_23:{id:5,name:"Dwarven Tunnel",description:"The entrance to the Dwarven Tunnel lies along a path up the mountain into a cleft in the rock and then deep into the mountain itself. The entrance is lined with statues and traps. It appears to be recently abandoned and no signs of life can be seen. The fog appears to billow out from deep within the mountain. This clearly leads to it's source.",icon:"mm_e_dwarves",location:rn.DWARVEN_TUNNEL,tags:[_a.GAME.TRAPS,_a.PROPS.STATUES,_a.GAME.MYSTERY],branches:[],events:[{name:"Trap1",type:At.TRAP,flavorText:"trap1."},{name:"Trap2",type:At.TRAP,flavorText:"trap2."},za.PERCEPTION,{name:"Skill Challenge",type:At.CHALLENGE,flavorText:""}]},SMOKEY:{id:6,name:"Source of Evil",description:"blah blah, fog. Crabs",icon:"cd_l_underthewell",location:rn.SMOKEY_CAVE,tags:[_a.MONSTERS.MONSTERS,_a.SOUNDS.CLICKING,_a.GAME.EVIL],branches:[],events:[{name:"Finale",type:At.FINALE,flavorText:"Finale."}]}};sn.FAIRLIGHT_FESTIVAL.branches.push(sn.UP_THE_MOUNTAIN),sn.UP_THE_MOUNTAIN.branches.push(sn.POINTED_CONVERSATIONS),sn.UP_THE_MOUNTAIN.branches.push(sn.BELL_SMOKE),sn.POINTED_CONVERSATIONS.branches.push(sn.TUNNEL_23),sn.BELL_SMOKE.branches.push(sn.TUNNEL_23),sn.TUNNEL_23.branches.push(sn.SMOKEY);const ln=[[sn.FAIRLIGHT_FESTIVAL],[sn.UP_THE_MOUNTAIN],[sn.POINTED_CONVERSATIONS,sn.BELL_SMOKE],[sn.TUNNEL_23],[sn.SMOKEY]],on=[{name:"Dragonsbreath Quest",id:623,description:"blah blah fog",icon:"missing_icon",startingEncounter:sn.FAIRLIGHT_FESTIVAL,finaleEncounter:sn.BELL_SMOKE,theme:"dark",nbCharacters:[2,4],nbSessions:[2,3],encounters:Object.values(sn),processedEncounters:ln,plotHooks:["PLOT HOOK FLAVOR TEXT 1","PLOT HOOK FLAVOR TEXT 2","PLOT HOOK FLAVOR TEXT 3","PLOT HOOK FLAVOR TEXT 4"],tooltipTags:{[sn.FAIRLIGHT_FESTIVAL.name]:{[an.VILLAGE_ELDER.name]:"the village elder appears to be waiting to speak with the party",[_a.RACE.HUMANS.name]:"describe the humans in the village",[_a.RACE.HALFLINGS.name]:"mention the halflings",[_a.ELEMENTS.FOG.name]:"Talk about the fog!",[_a.ANIMALS.CHICKENS.name]:"go into great detail about some chichens",[_a.LOCATION.BUILDINGS.name]:"describe the village huts",[_a.ANIMALS.DEER.name]:"bring up the deer in the forest",[_a.ANIMALS.BEARS.name]:"bring up the story about the bear...",[_a.LOCATION.CAMP.name]:"mention the hunter's camp",[_a.RACE.HUNTERS.name]:"Bring up the hunters",[_a.GAME.CURSE.name]:"mention the curse...",[_a.GAME.GOSSIP.name]:"the party wants to listen in on some gossip"},[sn.UP_THE_MOUNTAIN.name]:{[_a.RACE.HUNTERS.name]:"See what the hunters have to say...",[_a.ELEMENTS.FOG.name]:'Maybe the players are curious about the fog?"',[_a.ANIMALS.DEER.name]:"Describe the creepy weirdo horrible deer",[_a.ANIMALS.BEARS.name]:"The players ask about the Bear that might be on the mountain...",[_a.LOCATION.CAMP.name]:"Bring up the hunters camp...",[_a.RACE.HUNTERS.name]:"Focus on one specific hunter...",[_a.SCENERY.BOULDERS.name]:"Talk about the boulders",[_a.TRAVEL.ROADS.name]:"Describe the road...",[_a.SCENERY.TREES.name]:"It's a forest after all....but there is something to be mentioned about the trees...",[_a.LOCATION.TOWER.name]:"Talk about the tower in the distance...",[an.ELVEN_PRIEST.name]:"Reference the priest that was recently in the area...",[_a.PROPS.WINE.name]:"everyone loves chatting about wine",[_a.PROPS.BELL.name]:"Describe the bell which keeps ringing in the distance...",[_a.ELEMENTS.SMOKE.name]:"there is a lot of smoke that appears distinct from the fog..."},[sn.BELL_SMOKE.name]:{[_a.ELEMENTS.FOG.name]:"...of course we need to bring up the fog...",[_a.PROPS.BELL.name]:"Describe the Bell",[_a.ELEMENTS.SMOKE.name]:"Talk about the smoke",[_a.LOCATION.CABIN.name]:"Give details about the cabin",[_a.PROPS.COULDRON.name]:"Bring up the couldron",[_a.PROPS.BOOKS.name]:"Describe the bookshelf",[_a.GAME.MAGIC.name]:"Magic is evident everywhere...",[_a.SCENERY.TREES.name]:"The trees are different here..."},[sn.POINTED_CONVERSATIONS.name]:{[_a.LOCATION.TOWER.name]:"Describe the Elven Temple's Spire",[an.ELVEN_PRIEST.name]:"Remind the Players about the Elven Priest...",[_a.PROPS.WINE.name]:"perhaps the players are cusrious about the wine?",[_a.SCENERY.TREES.name]:"talk about the trees",[_a.RACE.ELVES.name]:"describe some basic elves in the village",[_a.LOCATION.BUILDINGS.name]:"bring up how the buildings are trees",[_a.ELEMENTS.FOG.name]:"continue to remind about the whole fog sitch"},[sn.SMOKEY.name]:{[_a.MONSTERS.MONSTERS.name]:"",[_a.SOUNDS.CLICKING.name]:"",[_a.GAME.EVIL.name]:"",[_a.ELEMENTS.FOG.name]:"",[_a.RACE.DWARVES.name]:"",[_a.ELEMENTS.FOG.name]:"",[_a.RACE.DWARVES.name]:""}},chatTriggers:{[sn.FAIRLIGHT_FESTIVAL.name]:{[an.VILLAGE_ELDER.name]:[{message:"The Village Elder is waiting to speak with the party...",speaker:{type:N.DM,id:0}},{message:"Let's not keep her waiting!",speaker:{type:N.PLAYER,id:0}},{message:"She asks the party to investigate the fog and its source in the mountains. It will require journeying up the mountain...",speaker:{type:N.DM,id:0}},{message:"Sounds like we have an adventure on our hands!",speaker:{type:N.PLAYER,id:1}}],[_a.EVENTS.FESTIVALS.name]:[{message:"The Fairlight Festival is a day-long celebration of the village's harvest season.",speaker:{type:N.DM,id:0}},{message:"Isn't this place being attacked by demon fog or someting? Are they really celebrating still?",speaker:{type:N.PLAYER,id:0}},{message:"Despite the fog, the Village Elder - Elder Rose, has decided to go ahead with the festival. You hear she wants to speak with the party.",speaker:{type:N.DM,id:0}}],[_a.ANIMALS.CHICKENS.name]:[{message:"You watch as a chicken scratches around in the dirt. Nearby a tentacle of fog stretches out and almost touches it.",speaker:{type:N.DM,id:0}},{message:"Noooo! Chicky!",speaker:{type:N.CHARACTER,id:0}},{message:"The chicken is startled by your yell and notices the fog. It runs away",speaker:{type:N.DM,id:0}}],[_a.GAME.CURSE.name]:"A smith in town complains that the village is cursed. An Evil Fog has been spreading from the mountains lately...",[_a.GAME.GOSSIP.name]:"All the townsfolk talk about is the fog. Some mention their dying pets or crops. Some wonder if they will have to move.",[_a.RACE.HUMANS.name]:"The townfolk are mainly humans, but a few halflings live here as well.",[_a.RACE.HALFLINGS.name]:"Making up about a quarter of the town's population, the halflings are well-represented at the festival, particularly the dancing contest.",[_a.LOCATION.BUILDINGS.name]:"The village has a few buildings, most prominently the tavern and the bakery. ",[_a.ANIMALS.DEER.name]:"Some villagers mention that they saw evil-looking deer up the mountain path.",[_a.ANIMALS.BEARS.name]:"A huge bear has been seen up the mountain. It appears to be hiding in the fog.",[_a.LOCATION.CAMP.name]:"The party learns of a Hunters Camp up the mountain. It may be a good place to rest and get information about the mountain.",[_a.RACE.HUNTERS.name]:"A hunter is in town for the festival. He invites the party to the camp up the mountain. ",[_a.GAME.ARCHERY.name]:"Archery is a pretty popular sport in town, so its no surprise that there is an archery ompetition at the fair.",[_a.GAME.CRAFTING.name]:"Basket Weaving, Pottery, and Carving competitions are all part of the festival. ",[an.DANCING.name]:"You aren't sure how these things are judged, but it's fun to dance with some of the locals anyways. ",[_a.ELEMENTS.FOG.name]:[{message:"The festival is going well. People are laughing, and enjoying the games. Suddenly the games, laughter, and chatter stop as an ear-splitting scream stills the crowd.",speaker:{type:N.DM,id:0}},{message:'"What\'s happened?!" I\'ll shout heorically and run towards the source of the scream and pull my weapon. "Out of the way, you fithly peasants!"',speaker:{type:N.CHARACTER,id:0}},{message:"The crowd parts for you, though you get some odd looks for your rudeness. Ahead a woman is pulling an unconsious child from a bank of low-hanging fog.",speaker:{type:N.DM,id:0}},{message:"As a pair of halflings help the woman take her child away, some of the townsfolk explain that a poisonous fog has recently been seen in the town. Sometimes it almost seems alive.",speaker:{type:N.DM,id:0}}]},[sn.UP_THE_MOUNTAIN.name]:{[_a.ELEMENTS.FOG.name]:"The fog appears to be thicker as you climb the mountain. The tendrils seem more and more dangerous and feel thicker and more substantial. You sometimes see shapes moving in the fog...",[_a.ANIMALS.DEER.name]:"The deer dart in and out out of the fog and even appear to be playing in it. Occasionally though, you see one glaring at you with evil intent...it's only a matter of time before they attack!",[_a.ANIMALS.BEARS.name]:"In the fog you see an enormous shape lumbering towards you. A huge head resolves out of the fog and the bear exhales a long clous of mist. It looks angry...",[_a.LOCATION.CAMP.name]:"The hunters camp is a well-established mountain base. There are some servicable tents, a firepit, and a few hunters. They are willing to chat but seem to be on edge due to the fog.",[_a.RACE.HUNTERS.name]:"You talk with some hunters on the mountain near the camp. They say the Fog has been getting worse and worse. They think it is coming from the mountain itself!",[_a.SCENERY.BOULDERS.name]:"The area is littered with large boulders",[_a.TRAVEL.ROADS.name]:"The mountain road is a well-beaten path but occasionally dwindwles to a narrow trail. You doubt a cart could make it up here.",[_a.SCENERY.TREES.name]:'The trees and foliage here is thick and green, but some darker...almost "stickier" looking species of shrub can be found. The forest to the east appears to contain more and more of these. The hunters say they were planted by "some Witch"',[_a.LOCATION.TOWER.name]:"A tower can be seen above the trees. The local hunters say it is the spire of a temple from an Elven Village farther up the mountain. They say the village is friendly and a Priest there is known to be wise. Perhaps they will know about this fog",[an.ELVEN_PRIEST.name]:"The hunters say that there is an Elven Village up the mountain. Some of the fog is coming from that direction...there is a prominane Elven Priest there...perhpas he will have some answers.",[_a.PROPS.WINE.name]:"Hunters along the trail share some amazing wine. They say they got it from the Elven Village farther along the path.",[_a.PROPS.BELL.name]:"There has been a bell ringing in the distance for a while now. The party finally determines that the direction is coming from the same direction as a Witch's Cabin that the hunters mentioned...",[_a.ELEMENTS.SMOKE.name]:"Mixed with the fog is a thick, almost purple smoke. It appears to have similar poperties to the fog and its curling tenticles seem to beckon the party in a certain direction..."},[sn.BELL_SMOKE.name]:{[_a.ELEMENTS.FOG.name]:"The fog appears to be much thinner as you approach the cabin. However, instead of the fog, the air here is thick with smoke coming from the cabin..",[_a.PROPS.BELL.name]:[{message:"There is a large bell hanging from a thick purple rope. It's ringing regularly and makes you feel odd for a moment each time it tolls.",speaker:{type:N.DM,id:0}},{message:"What is causing it to ring?",speaker:{type:N.PLAYER,id:6}},{message:'And what do you mean "odd"?',speaker:{type:N.PLAYER,id:1}},{message:"It's not clear what is causing the bell to ring, it is likely magical. Every time it rings it makes your head foggy for a moment. The effect gets worse the closer you get.",speaker:{type:N.DM,id:0}},{message:"Dungggggg... Dunggggg... Dungggggg...",speaker:{type:N.CHARACTER,id:2}}],[_a.ELEMENTS.SMOKE.name]:"As you approach the cabin it is impossible to miss the smoke. It is pouring from the chimney of the cabin, but insteads of rising into the air it seems to spill out of the chimney and cascades to the ground where it sits in smoky clumps",[_a.LOCATION.CABIN.name]:"The cabin is made of stone and sits on the side of the mountain. Thick purplish smoke pours from the chimney. It's not clearly occupied...",[_a.PROPS.COULDRON.name]:"A bubbling couldron sits in the center of the cabin. A large bell-like hood covers it and seems to direct the smoke to the chinmey stack.",[_a.PROPS.BOOKS.name]:"An ornate bookshelf sits on one wall, a glass door covers the shelves. A strange locking mechanism is evident on the door.",[_a.GAME.MAGIC.name]:"Everything about this area has at least a subtle hint of magic. Some things more than others...",[_a.SCENERY.TREES.name]:[{message:"The trees around the cabin nestled here in the mountain give way to what appear to be cultivated shrubs. They give off a slight not-unpleasant odor - and the fog appears to avoid them.",speaker:{type:N.DM,id:0}},{message:"...I'll collect a few of them. They may come in handy later.",speaker:{type:N.CHARACTER,id:0}}]},[sn.POINTED_CONVERSATIONS.name]:{[an.ELVEN_PRIEST.name]:[{message:"You speak with the Elven Priest. He says that the fog arrived at the same time that he began to sense a great evil presense deep within the mountain. ",speaker:{type:N.DM,id:0}},{message:"Is he about to blame the dwarves? I bet he is. That seems a little...",speaker:{type:N.CHARACTER,id:0}},{message:"cliche?",speaker:{type:N.DM,id:1}},{message:"..racist",speaker:{type:N.CHARACTER,id:0}},{message:"The elven priest ignores your rudeness and continues to explain that while the Dwarves are probably not personally involved, they have a tunnel nearby that may lead the heroes to the source of this evil and fog.",speaker:{type:N.DM,id:0}}],[_a.LOCATION.TOWER.name]:"The Grand Temple's Tower is a glittering spire rising high above the trees. The Elven Priest has been informed of the party's arrival, and has asked to chat. He has a stern demeanor, and an odd lisp which makes him hard to understand.",[_a.PROPS.WINE.name]:"You have arrived just at the time of year for the Elven Wine Festival. They invite you to partake and maybe even help judge the competition?",[_a.SCENERY.TREES.name]:"The trees in this part of the mountain grow tall and wide along a deep ravine. The trees act as vertical homes and temples for the Elves, with winding rope bridges leading high up into the boughs.",[_a.RACE.ELVES.name]:"The Elves rarely see outsiders and they are firendly - if perhaps over-curious about the party. Elves of all ages and persuasions can be seen among the trees, doing Elvish stuff.",[_a.LOCATION.BUILDINGS.name]:[{message:'The Elves use the trees as their "buildings" and mostly live high above the forest floor.',speaker:{type:N.DM,id:0}},{message:"Notable structures include the Grand Temple, and a beautiful plaza suspended high in the trees that looks ideal for a rest...",speaker:{type:N.DM,id:0}},{message:'...what do they use for bathrooms up there? Do they have "treetop treepotties"? ',speaker:{type:N.PLAYER,id:0}},{message:"...",speaker:{type:N.DM,id:0}}],[_a.ELEMENTS.FOG.name]:"Even in the Elven Village the fog is present, but lies close to the ground and so the Elves don't seem much bothered by it. Those who venture onto the ground seem to have holy-charms which ward it off...",[_a.GAME.MYSTERY.name]:[{message:"",speaker:{type:N.DM,id:1}},{message:"Well too bad. There aren't any Dwarves here in this Dwarven tunnel.",speaker:{type:N.DM,id:0}},{message:"Haha. Oh you are serious. No Dwarves? Well... why not?! What happened to the Dwarves?",speaker:{type:N.PLAYER,id:0}},{message:"It's not clear. The homes lining the tunnel appear to be abandoned, but valuables and goods are clearly visible in shops and forges.",speaker:{type:N.DM,id:0}}]},[sn.TUNNEL_23.name]:{[_a.GAME.TRAPS.name]:"The road leading into the tunnel is paved with large stones and lined with statues. As one of you steps forward, a stone depresses slightly and a large axe swings from the wall. Runes on statues glow menacingly. It is clear there are traps around...",[_a.RACE.DWARVES.name]:"Though the tunnel is lined with shops, forges, and Dwarf-Sized homes, there are no Dwarves to be seen. The tunnel appears to be abandoned.",[_a.GAME.MYSTERY.name]:[{message:"I'm looking forward to talking with some Dwarves.",speaker:{type:N.CHARACTER,id:1}},{message:"Well too bad. There aren't any Dwarves here in this Dwarven tunnel.",speaker:{type:N.DM,id:0}},{message:"Haha. Oh you are serious. No Dwarves? Well... why not?! What happened to the Dwarves?",speaker:{type:N.PLAYER,id:0}},{message:"It's not clear. The homes lining the tunnel appear to be abandoned, but valuables and goods are clearly visible in shops and forges.",speaker:{type:N.DM,id:0}}],[_a.ELEMENTS.FOG.name]:"The fog trails in a clear stream from farther along the tunnel. It's clearly coming from inside the mountain via whatever is deeper along the tunnel. You must cover your mouths to keep from breathing it in.",[_a.PROPS.STATUES.name]:"The boulevard, tunnel, road...whatever you want to call it is lined with tall statues of Dwarven Heroes. Indecipherable Runes can be seen on the base of each statue, although something tells you that you shouldn't get too close...",[_a.PROPS.RUNES.name]:[{message:"The runes on the statues glow faintly as you approach. They a-",speaker:{type:N.DM,id:0}},{message:"I poke one with a stick!",speaker:{type:N.PLAYER,id:2}},{message:"Stop it! No we dont do anything...",speaker:{type:N.PLAYER,id:1}},{message:"Ok fine. I cautiously approach it...holding a stick still but ready to poke",speaker:{type:N.PLAYER,id:2}},{message:"The runes glow as you approach. If you had to guess, they list the names and titles of the Dwarves on the statues. However, as you lean in to examine one closer there is a mechanical click and the statues axe swings down swiftly. You narrowly avoid being split in twain!",speaker:{type:N.DM,id:0}}],[_a.GAME.EVIL.name]:[{message:"The door to a large meeting-hall is open and you can see a large map on the wall inside...",speaker:{type:N.DM,id:0}},{message:"Let's go in. I'm going in.",speaker:{type:N.PLAYER,id:2}},{message:"In Character please...",speaker:{type:N.DM,id:0}},{message:"What have we here then? Some sort of ye-olde mappe? Let us hither to better espy it-",speaker:{type:N.CHARACTER,id:2}},{message:"Better. You enter the hall cautiously, but it is clearly not occupied or trapped. The map on the wall appears to be a map of the tunnels just ahead in the mountain. One branch near the entrance has a large black X and a word newly-scribbled in coal: EVIL! ",speaker:{type:N.DM,id:0}}],[_a.SOUNDS.CLICKING.name]:"There's a moment in when the wind in the tunnel dies down and there is a period of relative silence. Thats when you hear it. From somewhere deep ahead in the dark tunnel...a rhythmic clicking sound! Click! Cli-Click!",[_a.MONSTERS.MONSTERS.name]:[{message:"You see a dead dwarf lying slumped with his back to a fountain...",speaker:{type:N.DM,id:0}},{message:"Ew",speaker:{type:N.PLAYER,id:0}},{message:"...as you approach-",speaker:{type:N.DM,id:0}},{message:"WHY WOULD WE APPROACH?! ... Ok sorry. We approach him. Go on. Sorry.",speaker:{type:N.CHARACTER,id:2}},{message:'As you approach, you realize that he is still alive - but barely. He weakly lifts his head when you approach and beckons you over with a nod. With a shaky hand he points down the tunnel and whispers... "MONSTERS!"',speaker:{type:N.DM,id:0}}]},[sn.SMOKEY.name]:{[_a.MONSTERS.MONSTERS.name]:"",[_a.SOUNDS.CLICKING.name]:"",[_a.GAME.EVIL.name]:"",[_a.ELEMENTS.FOG.name]:"",[_a.RACE.DWARVES.name]:""}}},Ja,tn],cn=()=>{const e=$t(),t=ta(),[a,r]=(0,n.useState)(e.getCurrentEncounter()),[s,i]=(0,n.useState)(e.getExpectedEncounterTags()),[l,o]=(0,n.useState)(e.getResolvedTagsForBranch()),[c,d]=(0,n.useState)(e.getWeightedLocationTagsEstablished()),[h,m]=(0,n.useState)(e.getEncounterLocationTags()),[g,p]=(0,n.useState)(e.getCompletedEvents()),[f,v]=(0,n.useState)(!1),[y,b]=(0,n.useState)(e.canTakeBreak()),[E,S]=(0,n.useState)(e.getCampaignScore()),N=(0,n.useMemo)((()=>(null===a||void 0===a?void 0:a.location.tags.sort())||[]),[null===a||void 0===a?void 0:a.location.tags]);(0,n.useEffect)((()=>{const t=()=>{p(e.getCompletedEvents()),i(e.getExpectedEncounterTags()),o(e.getResolvedTagsForBranch()),m(e.getEncounterLocationTags()),d(e.getWeightedLocationTagsEstablished()),b(e.canTakeBreak()),r(e.getCurrentEncounter())};return e.on("encounterUpdated",t),()=>{e.off("updateEncounterState",t)}}),[a]);const T=(0,n.useMemo)((()=>[...N].sort(((e,t)=>e.name.localeCompare(t.name)))),[N]);if(!a)return(0,yt.jsx)("div",{className:"encounter-overview-container",children:"No Encounter"});const x=Array.from(new Set(a.events.map((e=>e.type)))),A=a.location.themes[0],C=(e.getTagsForEncounter(a),e=>{switch(e){case At.COMBAT:return"Combat";case At.ROLEPLAY:return"Roleplaying";case At.PUZZLE:return"Puzzle";case At.PERCEPTION:return"Perception Check";case At.TOWN:return"Town Stuff";case At.TRAVEL:return"Travel";case At.CHALLENGE:return"Skill Challenge";case At.TRAP:return"Trap";case At.CHARACTER_BACKSTORY:return"Backstory";case At.STORY:return"Story";case At.EXPLORATION:return"Exploration"}});return(0,yt.jsxs)("div",{className:"encounter-overview-container",children:[(0,yt.jsx)("div",{className:"encounter-icon-container",children:(0,yt.jsx)(Et,{imageId:a.icon})}),!f&&(0,yt.jsxs)("div",{className:"encounter-overview-nonmodal ",children:[(0,yt.jsxs)("div",{className:"encounter-overview-exposition-button",onClick:()=>e.handleExpositionClicked(),children:[(0,yt.jsx)("div",{className:"encounter-overview-exposition-label",children:"EXPOSITION"}),(0,yt.jsx)("div",{className:"encounter-overview-exposition-effect",children:e.getEncounterExpositionText()})]}),(0,yt.jsxs)("div",{className:"encounter-overview-break "+(y?"":" hidden"),onClick:()=>{e.useBreak(),b(!1)},children:[(0,yt.jsx)("div",{className:"encounter-overview-break-label",children:"BREAK"}),(0,yt.jsx)("div",{className:"encounter-overview-break-effect",children:"Reduce exhaustion, tension, attention"})]}),(0,yt.jsx)("div",{className:"session-control-campaign",children:(0,yt.jsxs)("div",{className:`campaign-display header ${on[e.getCurrentCampaign()||0].theme} icon-only`,onClick:()=>v(!0),children:[(0,yt.jsxs)("div",{className:"campaign-score-info overview",children:[(0,yt.jsx)("div",{className:"score-label",children:"CAMPAIGN SCORE"}),(0,yt.jsx)("div",{className:"score-value",children:E})]}),(0,yt.jsxs)("div",{className:"campaign-info left",children:[(0,yt.jsx)("div",{className:"campaign-info",children:on[e.getCurrentCampaign()||0].name}),(0,yt.jsx)("div",{className:"campaign-info hooks",children:"PLOT HOOKS"}),(0,yt.jsx)("div",{className:"circle-display",children:Array.from({length:4},((t,a)=>(0,yt.jsx)("div",{className:"circle "+(a<e.getCampaignProgress()?"filled":"")},a+"circle")))})]}),(0,yt.jsx)("div",{className:"campaign-icon solo",children:(0,yt.jsx)(Et,{imageId:on[e.getCurrentCampaign()||0].icon})})]})}),(0,yt.jsxs)("div",{className:"encounter-overview-contents",children:[(0,yt.jsx)("div",{className:"encounter-overview-info-column",children:(0,yt.jsxs)("div",{className:"encounter-overview-encounter-info",children:[(0,yt.jsxs)("div",{className:"encounter-header",children:[(0,yt.jsx)(It,{callback:()=>t.showBasicNotebook(u,a),classname:"encounter"}),a.name]}),(0,yt.jsx)(ma,{totalSegments:l.length+s.length,filledSegments:l.length,theme:A,label:"encounter elements"}),(0,yt.jsxs)("div",{className:"encounter-overview-encounter-info-tags-row",children:[(0,yt.jsx)("div",{className:"encounter-overview-encounter-info-tags",children:l.map(((e,t)=>(0,yt.jsx)("div",{className:"encounter-flavor-tag text-pill type-location",children:e.name},`established-${t}`)))}),(0,yt.jsx)("div",{className:"encounter-overview-encounter-info-tags",children:s.map(((e,t)=>(0,yt.jsx)("div",{className:"encounter-flavor-tag text-pill",children:e.name},`expected-${t}`)))})]})]})}),(0,yt.jsx)("div",{className:"encounter-overview-info-column",children:(0,yt.jsxs)("div",{className:"encounter-overview-encounter-info",children:[(0,yt.jsxs)("div",{className:"encounter-header",children:[(0,yt.jsx)(It,{callback:()=>t.showBasicNotebook(u,a),classname:"location"}),a.location.name]}),(0,yt.jsxs)("div",{className:"encounter-overview-encounter-info",children:[(0,yt.jsx)(ma,{totalSegments:h.length,filledSegments:c,theme:A,label:"LOCATION ELEMENTS"}),(0,yt.jsx)("div",{className:"encounter-overview-encounter-info-tags-row",children:(0,yt.jsx)("div",{className:"encounter-overview-encounter-info-tags",children:T.map(((t,a)=>(0,yt.jsx)("div",{className:"encounter-flavor-tag text-pill  "+(e.getCollectedLocationTags().includes(t)?"type-location":""),children:t.name},a)))})})]})]})})]}),(0,yt.jsxs)("div",{className:"encounter-overview-events-container",children:[(0,yt.jsx)("div",{className:"encounter-overview-event-header",children:"ENCOUNTER EVENTS"}),(0,yt.jsxs)("div",{className:"encounter-overview-events-row",children:[(0,yt.jsx)("div",{className:"encounter-overview-legend",children:x.map(((e,a)=>(0,yt.jsxs)("div",{className:"event-legend-entry",children:[(0,yt.jsx)("div",{className:"event-icon",children:(0,yt.jsx)(Et,{imageId:t.getEventIcon(e)})}),(0,yt.jsx)("div",{className:"event-name",children:C(e)})]},a)))}),0===a.events.length?null:(0,yt.jsx)("div",{className:"encounter-eventlist",children:a.events.map(((a,n)=>(0,yt.jsxs)("div",{className:`event-entry ${a.type} ${g.includes(n)?"completed":""}`,onClick:()=>(t=>{e.encounterEventSelected(t),g.push(t),p([...g])})(n),children:[(0,yt.jsx)("div",{className:"event-icon",children:(0,yt.jsx)(Et,{imageId:t.getEventIcon(a.type)})}),(0,yt.jsx)("div",{className:"event-name",children:a.name}),a.flavorText&&(0,yt.jsx)("div",{className:"event-flavor-text",children:a.flavorText})]},n)))})]})]}),a.branches&&a.branches.length>0&&(0,yt.jsxs)("div",{className:"encounter-overview-bottom-container",children:[(0,yt.jsxs)("div",{className:"encounter-overview-upcoming-branches-container",children:[(0,yt.jsx)("div",{className:"encounter-overview-upcoming-branches-header",children:"UPCOMING ENCOUNTERS"}),(0,yt.jsx)("div",{className:"encounter-overview-upcoming-upcoming-branches",children:a.branches.map(((t,a)=>{return(0,yt.jsxs)("div",{className:`encounter-overview-upcoming-branch text-theme-${t.location.themes[0]}`,children:[(0,yt.jsxs)("div",{className:"encounter-overview-upcoming-branch-header",children:[(0,yt.jsx)("div",{className:"encounter-overview-upcoming-travel-header-text encounter",onClick:()=>(t=>{e.advanceEncounter(t)})(t),children:t.name}),(0,yt.jsx)("div",{className:"encounter-overview-upcoming-travel-header-text",children:t.location.name})]}),(0,yt.jsx)(ma,{totalSegments:4,filledSegments:Math.min(4,e.getExpectedTagsForBranch(t.name).length),theme:t.location.themes[0],label:t.name}),(0,yt.jsx)("div",{className:"encounter-overview-upcoming-branch-tags",children:(()=>{const a=e.getExpectedTagsForBranch(t.name),n=e.getAuthoredEncounterTags(t.name).filter((e=>!a.includes(e))),r=4-(n.length+a.length),s=Array(r).fill({name:"?"});return[...n.map(((e,t)=>(0,yt.jsx)("div",{className:"encounter-flavor-tag text-pill expected",children:e.name},`authored-${t}`))),...a.map(((e,t)=>(0,yt.jsx)("div",{className:"encounter-flavor-tag text-pill type-foreshadowing",children:e.name},`expected-tag-${t}`))),...s.map(((e,t)=>(0,yt.jsx)("div",{className:"encounter-flavor-tag text-pill type-foreshadowing expected large-text",children:e.name},t)))]})()}),(0,yt.jsx)("div",{className:"encounter-overview-upcoming-footer",children:(0,yt.jsx)("div",{className:"encounter-overview-upcoming-travel-footer-text",children:(n=e.getExpectedTagsForBranch(t.name).length,4===n?"WELL PREPARED":3===n?"READY":2===n?"INFORMED":"NOT READY")})})]},a);var n}))})]}),(0,yt.jsxs)("div",{className:"encounter-overview-advance-container",children:[(0,yt.jsx)("div",{className:"encounter-overview-advance-text",children:"ADVANCE ENCOUNTER"}),(0,yt.jsxs)("div",{className:"encounter-overview-advance-button",onClick:()=>{e.advanceEncounter()},children:[(0,yt.jsx)("div",{className:"encounter-overview-advance-button-text",children:"PLAYERS CHOOSE"}),(0,yt.jsx)("div",{className:"encounter-overview-advance-info",children:e.getEncounterAdvanceReadinessText()})]})]})]})]}),f&&(0,yt.jsx)(La,{campaign:on[e.getCurrentCampaign()||0],collapsed:!1,onAccept:()=>v(!1),acceptText:"Close"})]})},dn=e=>{var t,a;let{encounter:r}=e;ta();const s=$t(),[i]=(0,n.useState)(s.getExpectedEncounterTags()),[l]=(0,n.useState)(s.getEncounterLocationTags()),[o]=(0,n.useState)(s.getDmTricks()),c=[s.getCampaignName(),...(null===(t=s.getCurrentEncounter())||void 0===t||null===(a=t.branches)||void 0===a?void 0:a.map((e=>e.name)))||[]];return(0,yt.jsxs)("div",{className:"encounter-intro-container",children:[(0,yt.jsx)("div",{className:"encounter-intro-title",children:r.name}),(0,yt.jsx)("div",{className:"encounter-intro-instructions",children:"Most of this encounter takes place in Sagewood Tavern. Describe the scene to them by exposing the following elements:"}),(0,yt.jsx)("div",{className:"encounter-intro-location",children:r.location.name}),(0,yt.jsx)("div",{className:"encounter-intro-tags location",children:l.map(((e,t)=>(0,yt.jsx)("div",{className:"encounter-flavor-tag text-pill type-location",children:e.name},t)))}),(0,yt.jsx)("div",{className:"encounter-intro-instructions expect",children:"Based on what you've told them about the current situation in Sagewood, they expect to encounter:"}),i.length>0&&(0,yt.jsx)("div",{children:(0,yt.jsx)("div",{className:"encounter-intro-tags expected",children:i.map(((e,t)=>(0,yt.jsx)("div",{className:"encounter-flavor-tag text-pill expected",children:e.name},t)))})}),(0,yt.jsx)("div",{className:"encounter-intro-instructions plot",children:"Keep your players thinking about what's to come by giving clues about upcoming encounters, and the Campaign Plot"}),(0,yt.jsx)("div",{className:"encounter-intro-tags plot",children:c.map(((e,t)=>(0,yt.jsx)("div",{className:`text-encounter text-theme-${s.getColorForEncounterByName(e)} `,children:(0,yt.jsxs)("u",{children:[" ",e]})},t)))})]})},un=e=>{let{event:t}=e;return(0,yt.jsx)("div",{className:"encounter-event",children:(0,yt.jsx)("div",{className:"event-content",children:t.name})})},hn=e=>{let{encounter:t}=e;const[a,r]=(0,n.useState)(t.events),[s,i]=(0,n.useState)(!1);$t(),ta();return(0,yt.jsx)("div",{className:"table-encounter-divisions",children:(0,yt.jsxs)("div",{className:"event-column open",children:[a.map(((e,t)=>(0,yt.jsx)(un,{event:e},`${t}`))),(0,yt.jsx)("div",{className:"event-column-label"})]})})},mn=e=>{let{min:t,max:a,totalSegments:n,isGrim:r}=e;a++;const s=t/n*100-1,i=(a-t)/n*100+1.5;return(0,yt.jsxs)("div",{className:"range-card",style:{left:`${s}%`,width:`${i}%`},children:[(0,yt.jsx)("div",{className:"combat-bar-label peril",children:"PERIL"}),(0,yt.jsx)("div",{className:"combat-bar-label stress",children:"TENSION"}),(0,yt.jsxs)("div",{className:"combat-bar-label engagement",children:[r?"GRIM ":" ","SCORE"]})]})},gn=e=>{let{baseDie:t,displayNumber:a,onClick:n}=e;const r=`number_die_${t}`;return(0,yt.jsxs)("div",{className:"number-die",onClick:n,children:[(0,yt.jsx)(Et,{imageId:r}),(0,yt.jsx)("div",{className:"number-die-text",children:a})]})},pn=e=>{let{modifierCallback:t,side:a,combatState:r,disabled:s}=e;const i=$t(),[l,o]=(qt().getCombatManager(),(0,n.useState)(i.getCollectedLocationTags(!1)));return(0,yt.jsxs)("div",{className:`combat-modifiers ${a}`,children:[(0,yt.jsxs)("div",{className:"combat-modifiers-label",children:["Assist ","heroes"===a?"Heroes":"Enemies"]}),(0,yt.jsxs)("div",{className:"combat-modifier-row",children:[(0,yt.jsx)("div",{className:"combat-modifiers-tags",children:(0,yt.jsx)("div",{className:`location-tags ${a}`,children:l.map(((e,n)=>(0,yt.jsx)("div",{className:"text-pill type-location "+(r.usedTags[n]?"expected":""),onClick:()=>(e=>{r.usedTags||(r.usedTags=l.map((()=>!1)));const n=!r.usedTags[e];t(n?1:-1,a,l[e],e)})(n),children:e.name},n)))})}),(0,yt.jsx)("div",{className:"combat-modifiers-die "+(s?"disabled":""),children:(0,yt.jsx)(gn,{baseDie:20,displayNumber:"1",onClick:()=>(i.spendDMPoints(1),void t(1,a,{name:"DM"},0))})})]})]})},fn=e=>{let{combatantCallback:t,side:a,combatState:n}=e;return(0,yt.jsxs)("div",{className:`combat-combatants ${a}`,children:[(0,yt.jsx)("div",{className:"combat-combatants-label",children:"heroes"===a?"Add allied Combatants":"Swap Enemies"}),(0,yt.jsx)("div",{className:"combat-combatants-row",children:(0,yt.jsx)("div",{className:"combat-combatants-tags",children:"heroes"===a&&n.friendlyTags.length<=0?(0,yt.jsx)("div",{className:"combatant-tags",children:(0,yt.jsx)("div",{className:"none-available",children:"No valid established NPC Races available."})}):"enemies"===a&&n.friendlyTags.length<=0&&n.hostileTags.length<=0?(0,yt.jsx)("div",{className:"combatant-tags",children:(0,yt.jsx)("div",{className:"none-available",children:"No valid established Enemy Races available."})}):(0,yt.jsxs)("div",{className:`combatant-tags ${a}`,children:[n.friendlyTags.map(((e,r)=>(0,yt.jsx)("div",{className:`text-pill combatant ${a}`,onClick:()=>(e=>{t(a,n.friendlyTags[e],e)})(r),children:e.name},r))),"enemies"===a&&n.hostileTags.map(((e,r)=>(0,yt.jsx)("div",{className:`text-pill combatant ${a}`,onClick:()=>(e=>{t(a,n.hostileTags[e],e)})(r),children:e.name},r)))]})})})]})},vn=[0,0,5,10,15,25,50,75,100],yn=[0,0,1,5,5,5,10,10,20],bn=[-10,-1,5,10,20,10,5,-1,-5],En=e=>{let{combatState:t}=e;const a=bn.length,r=qt(),s=r.getCombatManager(),i=r.getPartyManager(),l=(r.getChatManager(),r.getCampaignManager()),o=e=>{const t=e.riskCenter;return[Math.max(t-e.nbEnemies,0),Math.min(t+e.nbEnemies,a-1)]},c=l.getCollectedThemes(),[d,u]=(0,n.useState)(yn),[h,m]=(0,n.useState)(vn),[g,p]=(0,n.useState)([]),[f,v]=(0,n.useState)(o(t)),[y,b]=(0,n.useState)(null),[E,S]=(0,n.useState)(!1),[N,T]=(0,n.useState)(null),[x,A]=(0,n.useState)(null),C=!(!c.grim||3!==c.grim),M=(0,n.useRef)({danger:h,stress:d,engagement:g});(0,n.useEffect)((()=>{M.current={danger:h,stress:d,engagement:g}}),[h,d,g]),(0,n.useEffect)((()=>{if(s.setCombatBarAnimating(E),!E)switch(console.log("DONE ANIMATING"+N+" : "+t.round.phase),t.round.phase){case"balance":const e=o(t);console.log("NEW RANGE: "+e),v(e);break;case"setup":null!==x&&(s.modifyCombatRangeCenter(x),T(null))}}),[E]),(0,n.useEffect)((()=>{let e=!1;return j(t),w(t),s.on("combatStateChange",(e=>{if(s){w(t),j(t);const e=o(t);v(e)}})),s.on("combatPhaseChange",(t=>{switch(console.log("Phase change ! "+t.round.phase),t.round.phase){case"setup":E||(console.log("WHATSUUUUP "+e),e=!0,A(O([0,a-1])),b(null));break;case"heroes_attack":case"heroes_resolve":case"enemy_resolve_damage":default:break;case"enemies_attack":A(O(o(t)))}})),()=>{s.removeAllListeners("combatStateChange"),s.removeAllListeners("combatPhaseChange")}}),[s]);const w=e=>{const t=e.enemyStats.attack[0],a=i.getPartyStrength(),n=t*t/(a*a),r=[0,1,5,10,25,50,75,80,90,100].map(((t,a)=>{let r=Math.ceil(t*n);return 1===e.nbEnemies?r*=.8:3===e.nbEnemies&&(r*=1.6),9===a&&(r*=2),8===a&&(r*=1.5),r=5*Math.ceil(r/5),r=Math.min(r,100),r}));m(r),R(r)},R=e=>{const t=[];e.forEach(((e,a)=>{const n=k(e);t.push(n)})),u(t)},k=e=>{let t=0;return t=e<=10?1:e<=25?5:e<=40?10:e<=50?15:e<=80?20:e<=90?25:30,t},j=e=>{const t=[];let a=0;bn.forEach(((n,r)=>{const s=n*(.5*e.nbEnemies);let i=s<0?Math.floor(s):Math.ceil(s);i>a?a=i:C&&(i=a),t.push(i)})),p(t)},O=e=>{const t=Math.floor(Math.random()*(e[1]-e[0]+1))+e[0];return B(e,t),T(t),(e=>{s.setPerilResult([e,M.current.danger[e],M.current.stress[e],M.current.engagement[e]])})(t),t},I=(e,t)=>{const a=Math.min(...e),n=Math.max(...e);return e.map((e=>s.generateColorFromValue(e,a,n,t)))},L=I(h,"danger"),P=I(d,"stress"),_=I(g,"engagement"),D=e=>{const n="danger"===e?L:"stress"===e?P:_,r="danger"===e?h:"stress"===e?d:g,s="balance"===t.round.phase||"setup"===t.round.phase&&E;return Array.from({length:a},((t,a)=>(0,yt.jsxs)("div",{className:`combat-bar-segment  \n                ${s||a>=f[0]&&a<=f[1]?"in-range":""}\n                ${a===y?"highlighted":""}\n                ${E?"animating":""}\n                ${null===N?"":a===N?"positive-result":"negative-result"}\n            `,style:{backgroundColor:n[a]||"",color:"stress"===e&&r[a]>10?"#777777ff":""},children:["danger"!==e&&r[a]>0?"+":"",r[a],"danger"===e?"%":""]},a)))},B=(e,a)=>{S(!0);let n=1,r=e[0],i=50;const l=()=>{var o;b(r),"setup"===(null===(o=s.getCombatState())||void 0===o?void 0:o.round.phase)&&v([Math.max(0,r-t.nbEnemies),Math.min(8,r+t.nbEnemies)]),i<300?(r+=n,r>=e[1]?(n=-1,r=e[1]):r<=e[0]&&(n=1,r=e[0]),i*=1.1,setTimeout(l,i)):r!==a?(r+=n,r>=e[1]?(n=-1,r=e[1]):r<=e[0]&&(n=1,r=e[0]),setTimeout(l,i)):(b(a),S(!1))};l()},F=(e,t,a,n)=>{s.combatModifiersCallback(e,t,a,n)},U=(e,t,a)=>{s.combatantCallback(e,t,a)};return(0,yt.jsxs)("div",{className:"combat-peril-row",children:[(0,yt.jsx)("div",{className:`combat-bar-modifiers left ${"setup"===t.round.phase?"show-arrow":""} `,children:"balance"===t.round.phase?(0,yt.jsx)(fn,{combatantCallback:U,side:"heroes",combatState:t}):"setup"===t.round.phase?(0,yt.jsx)(pn,{modifierCallback:F,side:"heroes",combatState:t,disabled:E}):null}),(0,yt.jsx)("div",{className:"combat-bar-container",children:(0,yt.jsxs)("div",{className:"combat-bar",children:[(0,yt.jsx)("div",{className:"combat-bar-range-indicator",children:(0,yt.jsx)(mn,{min:f[0],max:f[1],totalSegments:a,isGrim:C})}),(0,yt.jsx)("div",{className:"segment-container danger",children:D("danger")}),(0,yt.jsx)("div",{className:"segment-container stress",children:D("stress")}),(0,yt.jsx)("div",{className:"segment-container engagement",children:D("engagement")})]})}),(0,yt.jsx)("div",{className:`combat-bar-modifiers right ${"setup"===t.round.phase?"show-arrow":""} `,children:"balance"===t.round.phase?(0,yt.jsx)(fn,{combatantCallback:U,side:"enemies",combatState:t}):"setup"===t.round.phase?(0,yt.jsx)(pn,{modifierCallback:F,side:"enemies",combatState:t,disabled:E}):null})]})};var Sn=a(7284),Nn=a.n(Sn);const Tn={[_a.MONSTERS.GOBLINS.name]:{defense:[2],magic_defense:[0],health:[5],attack:[2]},[_a.MONSTERS.GNOMES.name]:{defense:[3],magic_defense:[3],health:[10],attack:[3]},[_a.MONSTERS.DRAGONS.name]:{defense:[10],magic_defense:[10],health:[100],attack:[10]},[_a.MONSTERS.UNDEAD.name]:{defense:[5],magic_defense:[5],health:[20],attack:[5]},[_a.MONSTERS.BEASTS.name]:{defense:[5],magic_defense:[0],health:[20],attack:[5]},[_a.MONSTERS.CULTISTS.name]:{defense:[2],magic_defense:[5],health:[10],attack:[3]},[_a.MONSTERS.BANDITS.name]:{defense:[3],magic_defense:[0],health:[10],attack:[3]},[_a.MONSTERS.MONSTERS.name]:{defense:[5],magic_defense:[5],health:[20],attack:[5]},[_a.RACE.HUMANS.name]:{defense:[5],magic_defense:[5],health:[20],attack:[5]},[_a.RACE.ELVES.name]:{defense:[5],magic_defense:[5],health:[20],attack:[5]},[_a.RACE.DWARVES.name]:{defense:[5],magic_defense:[5],health:[20],attack:[5]},[_a.RACE.ORCS.name]:{defense:[5],magic_defense:[5],health:[20],attack:[5]},[_a.RACE.HALFLINGS.name]:{defense:[5],magic_defense:[5],health:[20],attack:[5]},[_a.RACE.HALF_ORCS.name]:{defense:[5],magic_defense:[5],health:[20],attack:[5]},[_a.RACE.HALF_ELVES.name]:{defense:[5],magic_defense:[5],health:[20],attack:[5]}},xn={health:[1],attack:[1],defense:[1],magic_defense:[1]};class An extends(Nn()){constructor(e){super(),this.appManager=void 0,this.characterManager=void 0,this.campaignManager=void 0,this.playerManager=void 0,this.uiManager=void 0,this.chatManager=void 0,this.combatState=void 0,this.partyManager=void 0,this.getCombatMessage=()=>{if(this.combatState)switch(this.combatState.round.phase){case"balance":return"Balance the combat by changing the number or type of enemies and/or add NPCs.";case"setup":return this.combatState.barAnimating?`The players and ${this.combatState.enemyType.name} ready themselves themselves and we see how dangerous this round will be... `:"Balance the fight by using established elements of the environment to make the combat more or less dangerous. Or simply fudge the dice...";case"heroes_attack":return"done in component";case"heroes_resolve":return"Now the enemies will attack! This will determine the chance of injury to the party.";case"enemies_attack":return this.combatState.barAnimating?"Determining the danger and excitement of this round...":`There is a ${this.combatState.perilResult[M.DANGER]}% chance of a party injury.`;case"enemy_resolve_damage":return this.combatState.combatMessage;default:return""}},setTimeout((()=>{this.appManager=e,this.characterManager=e.getCharacterManager(),this.campaignManager=e.getCampaignManager(),this.playerManager=e.getPlayerManager(),this.uiManager=e.getUiManager(),this.chatManager=e.getChatManager(),this.partyManager=e.getPartyManager()}),0)}getCombatState(){return this.combatState}generateCombatRewards(){if(this.combatState)switch(this.combatState.nbEnemies){case 1:default:this.combatState.rewards=1;break;case 2:this.combatState.rewards=3;break;case 3:this.combatState.rewards=5}}generateCombatState(e,t){var a,n,r;if(!e.combat||!e.combat[t])return;if(this.combatState)return this.combatState;const s=e.combat[t],i=s.enemy,l={round:{number:0,phase:"balance"},attacker:"heroes",currentCharacterIndex:0,currentEnemyIndex:0,nbEnemies:s.nbEnemies,enemyType:i,enemyStats:Tn[i.name]||{...xn},riskCenter:4,usedTags:(null===(a=this.campaignManager)||void 0===a?void 0:a.getCollectedLocationTags().map((()=>!1)))||[],hostileTags:(null===(n=this.campaignManager)||void 0===n?void 0:n.getHostileCombatantTags(i.name))||[],friendlyTags:(null===(r=this.campaignManager)||void 0===r?void 0:r.getFriendlyCombatantTags())||[],npcs:[],rewards:1,perilResult:[0,0,0,0],heroAttacks:{},enemyStatsInstance:{health:1,attack:1,defense:1,magic_defense:1}};return this.updateCombatState(l),this.generateCombatRewards(),l}static GetDefaultCombatState(){return{round:{number:0,phase:"balance"},attacker:"heroes",currentCharacterIndex:0,currentEnemyIndex:0,nbEnemies:1,enemyType:{name:"none"},enemyStats:{...xn},riskCenter:5,usedTags:[],hostileTags:[],friendlyTags:[],npcs:[],perilResult:[0,0,0,0],heroAttacks:{},rewards:1,enemyStatsInstance:{health:1,attack:1,defense:1,magic_defense:1}}}modifyCombatRangeCenter(e){this.combatState&&(this.combatState.riskCenter=e,this.emit("combatStateChange",this.combatState))}updateCombatState(e){this.combatState=e,this.emit("combatStateChange",this.combatState)}applyPerilResultsToParty(){var e,t;if(!this.combatState)return;const a=this.combatState.perilResult[M.STRESS],n=this.combatState.perilResult[M.SCORE];null===(e=this.partyManager)||void 0===e||e.addPartyTension(a),null===(t=this.partyManager)||void 0===t||t.addPartyScore(n)}setCombatBarAnimating(e){this.combatState&&(this.combatState.barAnimating=e,this.emit("combatStateChange",this.combatState))}advanceRound(){var e,t;if(this.combatState){switch(this.combatState.round.phase){case"balance":this.generateEnemyAttributeInstance(),this.combatState.round.phase="setup",this.generateHeroAttacks(),null===(e=this.chatManager)||void 0===e||e.combatIntroMessage(this.combatState.enemyType);break;case"setup":this.combatState.round.phase="heroes_attack",this.combatState.round.number++;break;case"heroes_attack":var a,n;if(this.combatState.enemyStatsInstance.health<=0)null===(a=this.partyManager)||void 0===a||a.addPartyScore(this.combatState.perilResult[M.SCORE]),null===(n=this.uiManager)||void 0===n||n.showRewardModal(this.combatState.rewards||0,!0);else this.combatState.round.phase="heroes_resolve";break;case"heroes_resolve":this.combatState.round.phase="enemies_attack";break;case"enemies_attack":this.perilCheck(),this.combatState.round.phase="enemy_resolve_damage",this.applyPerilResultsToParty();break;case"enemy_resolve_damage":this.combatState.round.phase="setup",this.generateHeroAttacks(),null===(t=this.partyManager)||void 0===t||t.exhaustParty(this.getAttackActionCost());break;default:console.log("Unknown phase")}console.log("Changing phase to "+this.combatState.round.phase),this.emit("combatPhaseChange",this.combatState),this.emit("combatStateChange",this.combatState)}}perilCheck(){var e;const t=null===(e=this.combatState)||void 0===e?void 0:e.perilResult;if(!t)return;const a=Math.floor(100*Math.random());var n;a<t[M.DANGER]?this.activatePeril():null===(n=this.chatManager)||void 0===n||n.dmMessage("You guys are safe this round.");this.combatState&&(this.combatState.combatMessage=`${t[M.DANGER]}% chance of injury and rolled a ${a}.`)}activatePeril(){var e;if(void 0===this.combatState)return;let t=null===(e=this.partyManager)||void 0===e?void 0:e.generateHeroes(this.combatState.npcs||[]);if(void 0===t)return;let a=Math.floor(Math.random()*t.length);if(a<this.combatState.npcs.length){var n;this.combatState.npcs.splice(a,1),null===(n=this.chatManager)||void 0===n||n.dmMessage(`The ${t[a].name} were frigtened off!`)}else{var r;let e="";var s;if(t[a].character)e=(null===(s=this.partyManager)||void 0===s?void 0:s.addInjury(t[a].character))||"unknown injury";null===(r=this.chatManager)||void 0===r||r.dmMessage(`Oh no! ${t[a].name} is ${e}`)}}generateEnemyAttributeInstance(){var e,t,a;const n=((null===(e=this.getCombatState())||void 0===e?void 0:e.nbEnemies)||1)-1,r=(null===(t=this.getCombatState())||void 0===t?void 0:t.nbEnemies)||1,s=(null===(a=this.getCombatState())||void 0===a?void 0:a.enemyStats)||{...xn},i={health:s.health[n]||s.health[0]*r,attack:s.attack[n]||s.attack[0]*r,defense:s.defense[n]||s.defense[0]*r,magic_defense:s.magic_defense[n]||s.magic_defense[0]*r};this.combatState&&(this.combatState.enemyStatsInstance=i)}generateHeroAttacks(){var e,t;if(!this.combatState)return;const a=null===(e=this.partyManager)||void 0===e?void 0:e.generateHeroes((null===(t=this.combatState)||void 0===t?void 0:t.npcs)||[]);null===a||void 0===a||a.forEach((e=>{this.combatState&&(this.combatState.heroAttacks[e.name]=this.generateAttack(e))}))}heroRethinkAttack(e){var t,a;if(!this.combatState)return;null===(t=this.campaignManager)||void 0===t||t.spendDMPoints(1);let n=this.combatState.heroAttacks[e.name],r=10;for(;n===this.combatState.heroAttacks[e.name]&&r-- >0;)this.combatState.heroAttacks[e.name]=this.generateAttack(e);let s=`${e.name} should really think of a different tactic.`;switch(Math.floor(3*Math.random())){case 0:s=`Do you really want ${e.name} to do that?`;break;case 1:s="That's stupid.";break;case 2:s=`You know ${e.name} has better options, right?`}null===(a=this.chatManager)||void 0===a||a.dmMessage(s),this.emit("combatStateChange",this.combatState)}getHeroAttackDecisionText(e){var t;const a=null===(t=this.combatState)||void 0===t?void 0:t.heroAttacks[e.name];if(!a)return"vxvxcvx";switch(a){case"combat":return`${e.name} attacks with their weapon!`;case"tools":return`${e.name} uses their tools!`;case"magic":return`${e.name} casts a spell!`;default:return"vxvxcvxvxvxc"}}generateAttack(e){let t={};var a;e.npcTag?(e.character=null===(a=this.characterManager)||void 0===a?void 0:a.generateNPC(e.npcTag),t=this.getNPCAttributes(e.npcTag)):t=la(e.character,!0);return t[c.MAGIC]&&t[c.MAGIC]>0&&Math.random()>.666?"magic":t[c.TOOLS]&&t[c.TOOLS]>0&&Math.random()>.5?"tools":"combat"}getNPCAttributes(e){let t=Tn[e.name];return{[c.COMBAT]:Math.max(1,t.attack[0]),[c.MAGIC]:t.magic_defense[0],[c.TOOLS]:t.defense[0]}}heroAttack(e){var t,a,n;if(!this.combatState)return;let r;var s,i,l,o;e.character&&(r=null===(s=this.playerManager)||void 0===s?void 0:s.getPlayerAssignedCharacter(e.character),r&&(null===(i=this.partyManager)||void 0===i||i.playersTakeAction([r.name],!1),null===(l=this.partyManager)||void 0===l||l.stressAction([r]),null===(o=this.chatManager)||void 0===o||o.playerMessage(this.getHeroAttackDecisionText(e),r.id)));let d=la(e.character,!0);e.npcTag&&(d=this.getNPCAttributes(e.npcTag));const u=la(e.character);let h=0,m="combat",g=0,p="",f=!1;switch(this.combatState.heroAttacks[e.name]){case"combat":let r=Math.floor(Math.random()*(d[c.COMBAT]||0))+1;this.combatState.enemyStatsInstance.defense>0?(p="Defense",this.combatState.enemyStatsInstance.defense=Math.max(0,this.combatState.enemyStatsInstance.defense-r)):this.combatState.enemyStatsInstance.magic_defense>0?(p="Magic Defense",r=1,this.combatState.enemyStatsInstance.magic_defense=Math.max(0,this.combatState.enemyStatsInstance.magic_defense-1)):(p="Health",this.combatState.enemyStatsInstance.health=Math.max(0,this.combatState.enemyStatsInstance.health-r)),g=r,h=r,m="combat";break;case"tools":let s=1;Math.random()<.25&&(s=u[c.TOOLS],f=!0),this.combatState.enemyStatsInstance.defense>0?(p="Defense",this.combatState.enemyStatsInstance.defense=Math.max(0,this.combatState.enemyStatsInstance.defense-s)):this.combatState.enemyStatsInstance.magic_defense>0?(p="Magic Defense",this.combatState.enemyStatsInstance.magic_defense=Math.max(0,this.combatState.enemyStatsInstance.magic_defense-s)):(p="Health",this.combatState.enemyStatsInstance.health=Math.max(0,this.combatState.enemyStatsInstance.health-s)),null===(t=this.characterManager)||void 0===t||t.setAttributeUsed(e.character,c.TOOLS,1),h=s,m="tools",g=s;break;case"magic":const i=Math.min(d[c.MAGIC]||1,(null===(a=e.character)||void 0===a?void 0:a.level)||1),l=i*(Math.floor(3*Math.random())+2);this.combatState.enemyStatsInstance.magic_defense>0?(p="Magic Defense",this.combatState.enemyStatsInstance.magic_defense=Math.max(0,this.combatState.enemyStatsInstance.magic_defense-l)):this.combatState.enemyStatsInstance.defense>0?(p="Defense",this.combatState.enemyStatsInstance.magic_defense=Math.max(0,this.combatState.enemyStatsInstance.defense-l)):(p="Health",this.combatState.enemyStatsInstance.health=Math.max(0,this.combatState.enemyStatsInstance.health-l)),null===(n=this.characterManager)||void 0===n||n.setAttributeUsed(e.character,c.MAGIC,i),h=l,m="magic",g=i;break;default:console.log("Unknown attack type")}let v="";switch(m){case"combat":v="\u2694\ufe0f".repeat(g);break;case"tools":v="\ud83d\udd27".repeat(g);break;case"magic":v="\u2728".repeat(g)}let y=`${!0===f?"Crit! ":""}  ${v} = ${h} damage ${p}.`;return this.emit("combatStateChange",this.combatState),y}getAttackActionCost(){return this.combatState?this.combatState.round.number*Object.keys(this.combatState.heroAttacks).length:0}reduceEnemies(){var e;this.combatState&&(this.combatState.nbEnemies>1&&(this.combatState.nbEnemies--,null===(e=this.campaignManager)||void 0===e||e.spendDMPoints(1),this.generateCombatRewards(),this.emit("combatStateChange",this.combatState)))}increaseEnemies(){var e;this.combatState&&(this.combatState.nbEnemies<3&&(this.combatState.nbEnemies++,null===(e=this.campaignManager)||void 0===e||e.spendDMPoints(1),this.generateCombatRewards(),this.emit("combatStateChange",this.combatState)))}combatModifiersCallback(e,t,a,n){var r;this.combatState&&("heroes"===t?this.combatState.riskCenter-=e:this.combatState.riskCenter+=e,"DM"!==a.name&&(this.combatState.usedTags[n]=!this.combatState.usedTags[n]),this.emit("combatStateChange",this.combatState),null===(r=this.chatManager)||void 0===r||r.sayCombatModifiedMessage(t,a,this.combatState.enemyType,e))}combatantCallback(e,t,a){if(!this.combatState)return;t.friendly?this.combatState.friendlyTags.splice(a,1):this.combatState.hostileTags.splice(a,1),"enemies"===e?(this.combatState.enemyType.friendly?this.combatState.friendlyTags.push(this.combatState.enemyType):this.combatState.hostileTags.push(this.combatState.enemyType),this.setEnemyType(t)):this.combatState.npcs.push(t),this.generateCombatRewards(),this.emit("combatStateChange",this.combatState)}setEnemyType(e){this.combatState&&(this.combatState.enemyType=e,this.combatState.enemyStats=Tn[e.name]||{...xn},this.emit("combatStateChange",this.combatState))}setPerilResult(e){this.combatState&&(this.combatState.perilResult=e,this.emit("combatStateChange",this.combatState))}generateColorFromValue(e,t,a,n){let r,s={negative:{r:255,g:61,b:61},neutral:{r:255,g:139,b:105},positive:{r:255,g:0,b:0}};switch(n){case"danger":s={negative:{r:255,g:255,b:255},neutral:{r:179,g:139,b:105},positive:{r:200,g:25,b:20}};break;case"stress":s={negative:{r:255,g:255,b:255},neutral:{r:130,g:130,b:130},positive:{r:0,g:0,b:0}};break;case"engagement":s={negative:{r:139,g:61,b:61},neutral:{r:179,g:139,b:105},positive:{r:92,g:148,b:87}};break;case"reward":s={negative:{r:255,g:255,b:255},neutral:{r:255,g:255,b:255},positive:{r:255,g:215,b:0}}}if(e<0){const a=(e-t)/(0-t);r={r:Math.round(s.negative.r+(s.neutral.r-s.negative.r)*a),g:Math.round(s.negative.g+(s.neutral.g-s.negative.g)*a),b:Math.round(s.negative.b+(s.neutral.b-s.negative.b)*a)}}else{const t=e/a;r={r:Math.round(s.neutral.r+(s.positive.r-s.neutral.r)*t),g:Math.round(s.neutral.g+(s.positive.g-s.neutral.g)*t),b:Math.round(s.neutral.b+(s.positive.b-s.neutral.b)*t)}}return`#${r.r.toString(16).padStart(2,"0")}${r.g.toString(16).padStart(2,"0")}${r.b.toString(16).padStart(2,"0")}`}}const Cn=An,Mn=(wn=e=>{let{onClick:t,className:a,children:n}=e;return(0,yt.jsx)("div",{className:`themed-button ${a||""}`,onClick:()=>{},children:n})},e=>{const t=$t(),[a,r]=(0,n.useState)(null);(0,n.useEffect)((()=>{if(Math.random()<.25){const e=Object.values(A),t=e[Math.floor(Math.random()*e.length-1)];r(t)}}),[e.regenerateKey]);const s=a?`${e.className||""} theme-${a}`:e.className;return(0,yt.jsxs)("div",{className:"theme-wrapper",onClick:n=>{e.onClick&&e.onClick(a),a&&t.themedUiClicked(a),r(null)},children:[(0,yt.jsx)(wn,{...e,className:s}),a&&(0,yt.jsx)("div",{className:"tooltip",children:`This action will be done in a ${a} way`})]})});var wn;const Rn=e=>{var t,a,r,s;let{encounter:i}=e;const l=qt(),o=ta(),c=l.getCombatManager(),u=(l.getCharacterManager(),l.getPartyManager()),h=(null===c||void 0===c?void 0:c.generateCombatState(i,0))||Cn.GetDefaultCombatState(),[m,g]=(0,n.useState)(!1),[p,f]=(0,n.useState)(),[v,y]=(0,n.useState)(h.nbEnemies),[b,E]=(0,n.useState)(h.enemyType),[S,N]=(0,n.useState)(h.perilResult),[T,x]=(0,n.useState)(!1),[A,C]=(0,n.useState)(),[w,R]=(0,n.useState)(h.rewards||1),[k,j]=(0,n.useState)(u.generateHeroes(h.npcs)),[O,I]=(0,n.useState)(k.map((()=>"false"))),L=e=>{var t,a;const n=((null===c||void 0===c||null===(t=c.getCombatState())||void 0===t?void 0:t.nbEnemies)||1)-1,r=(null===c||void 0===c||null===(a=c.getCombatState())||void 0===a?void 0:a.nbEnemies)||1;return{health:e.health[n]||e.health[0]*r,attack:e.attack[n]||e.attack[0]*r,defense:e.defense[n]||e.defense[0]*r,magic_defense:e.magic_defense[n]||e.magic_defense[0]*r}};(0,n.useEffect)((()=>(c.on("combatStateChange",(e=>{y(e.nbEnemies),E(e.enemyType),j(u.generateHeroes(e.npcs)),N(e.perilResult),R(e.rewards||1),"balance"===e.round.phase?f(L(e.enemyStats)):f(e.enemyStatsInstance),"setup"===e.round.phase&&I(Object.keys(e.heroAttacks).map((()=>"false"))),C(e.combatMessage),x(e.barAnimating||!1)})),f(L(h.enemyStats)),()=>{c.removeAllListeners("combatStateChange")})),[c,i]);const P=e=>{e<1?c.reduceEnemies():c.increaseEnemies()},_=i.combat?null===(t=i.combat[0])||void 0===t?void 0:t.description:"";return(0,yt.jsxs)("div",{className:"game-encounter-combat",children:[(0,yt.jsx)("div",{className:"combat-encounter-upper-container",children:(0,yt.jsxs)("div",{className:"combat-encounter-header",children:[(0,yt.jsxs)("div",{className:"combat-encounter-header-title",children:["Combat Event in ",i.location.name]}),(0,yt.jsx)("div",{className:"combat-encounter-description",children:_})]})}),(0,yt.jsxs)("div",{className:"combat-encounter-body-container",children:[(0,yt.jsx)(En,{combatState:h}),(0,yt.jsxs)("div",{className:"combat-encounter-enemies-row",children:[(()=>{if("heroes_attack"===h.round.phase)return(0,yt.jsx)("div",{className:"combat-message-container",children:(0,yt.jsxs)("div",{className:"combat-message-legend",children:[(0,yt.jsx)("div",{className:"combat-message-legend-item",children:"\u2694\ufe0f:  1-\u2694\ufe0f to Health or Defense."}),(0,yt.jsx)("div",{className:"combat-message-legend-item",children:"\u2694\ufe0f:  1 to Magic Defense."}),(0,yt.jsx)("div",{className:"combat-message-legend-item",children:"\ud83d\udd27:  1 to anything"}),(0,yt.jsx)("div",{className:"combat-message-legend-item",children:"\ud83d\udd27:  Chance to crit for \ud83d\udd27"}),(0,yt.jsx)("div",{className:"combat-message-legend-item",children:"\u2728:  2-4 Damage to anything."}),(0,yt.jsx)("div",{className:"combat-message-legend-item",children:"\u2728:  at higher levels"}),(0,yt.jsx)("br",{}),(0,yt.jsx)("div",{className:"combat-message-legend-item",children:"\ud83d\udd27 / \u2728: limited uses"})]})});let e=c.getCombatMessage();return(0,yt.jsx)("div",{className:"combat-message-container",children:(0,yt.jsx)("div",{className:"combat-message",children:e})})})(),(0,yt.jsxs)("div",{className:"combat-encounter-enemies",children:[(0,yt.jsxs)("div",{className:"combat-encounter-enemies-number",children:["balance"===h.round.phase&&(0,yt.jsxs)("div",{className:"combat-enemies-ui",onClick:()=>P(-1),children:[(0,yt.jsx)(gn,{baseDie:20,displayNumber:"1"}),"less"]}),(0,yt.jsx)("div",{className:"combat-encounter-enemies-list",children:(()=>{const e=[],t=[0,1,3,5,7];for(let a=0;a<t[v];a++)e.push((0,yt.jsx)("div",{className:`enemy-icon enemy-type-${b.name}`,children:(0,yt.jsx)(Et,{imageId:`combat_${b.name}`})},`${a}`));return e})()}),"balance"===h.round.phase&&(0,yt.jsxs)("div",{className:"combat-enemies-ui",onClick:()=>P(1),children:[(0,yt.jsx)(gn,{baseDie:20,displayNumber:"1"}),"more"]})]}),(0,yt.jsx)("div",{className:"combat-encounter-enemies-attributes",children:(0,yt.jsxs)("div",{className:"combat-encounter-enemies-attributes-display",children:[(0,yt.jsxs)("div",{className:"combat-enemy-attribute defense",children:[(0,yt.jsx)("div",{className:"combat-enemy-attribute-title",children:"Defense"}),(0,yt.jsx)("div",{className:"combat-enemy-attribute-value",children:null===p||void 0===p?void 0:p.defense})]}),(0,yt.jsxs)("div",{className:"combat-enemy-attribute magic-defense",children:[(0,yt.jsx)("div",{className:"combat-enemy-attribute-title",children:"Magic Defense"}),(0,yt.jsx)("div",{className:"combat-enemy-attribute-value",children:null===p||void 0===p?void 0:p.magic_defense})]}),(0,yt.jsxs)("div",{className:"combat-enemy-attribute health",children:[(0,yt.jsx)("div",{className:"combat-enemy-attribute-title",children:"Health"}),(0,yt.jsx)("div",{className:"combat-enemy-attribute-value",children:null===p||void 0===p?void 0:p.health})]})]})}),(0,yt.jsx)("div",{className:"combat-encounter-enemies-header",children:(0,yt.jsx)("div",{className:"combat-encounter-enemy-name",children:b.name})})]}),(0,yt.jsx)("div",{className:"combat-advance-box",children:(0,yt.jsx)("div",{className:`combat-encounter-advance-button-container ${T?"disabled":""} `,onClick:()=>null===c||void 0===c?void 0:c.advanceRound(),children:(0,yt.jsxs)("div",{className:"combat-encounter-advance-button",children:[(()=>{switch(h.round.phase){case"balance":return"Begin Fight";case"setup":return"Heroes Attack";case"heroes_attack":return h.enemyStatsInstance.health<=0?"End Combat":k.every(((e,t)=>"false"!==O[t]))?"Continue":"Skip Hero Attack";case"heroes_resolve":return"Enemies Attack";case"enemies_attack":return h.barAnimating?"...":"Resolve Peril";case"enemy_resolve_damage":return"End Round";default:return""}})(),"enemy_resolve_damage"===h.round.phase&&c.getAttackActionCost()>0&&(0,yt.jsxs)("div",{className:"combat-button-exhaustion-label",children:["+",c.getAttackActionCost()," Exhaustion"]}),"heroes_attack"===h.round.phase&&h.enemyStatsInstance.health<=0&&(0,yt.jsxs)("div",{className:"combat-button-exhaustion-label",children:["+",null===(a=c.getCombatState())||void 0===a?void 0:a.perilResult[M.SCORE]," Score"]}),"enemies_attack"===h.round.phase&&!h.barAnimating&&(0,yt.jsxs)("div",{children:[(0,yt.jsxs)("div",{className:"combat-button-exhaustion-label",children:["+",null===(r=c.getCombatState())||void 0===r?void 0:r.perilResult[M.STRESS]," Tension"]}),(0,yt.jsxs)("div",{className:"combat-button-exhaustion-label",children:["+",null===(s=c.getCombatState())||void 0===s?void 0:s.perilResult[M.SCORE]," Score"]})]})]})})})]}),w?(0,yt.jsxs)("div",{className:"combat-encounter-rewards",children:[(0,yt.jsx)("div",{className:"combat-encounter-rewards-title",children:"Players will expect"}),(0,yt.jsxs)("div",{className:"combat-encounter-rewards-list",children:[w," rewards"]})]}):null,(0,yt.jsx)("div",{className:"combat-encounter-heroes",children:k&&k.map(((e,t)=>(0,yt.jsxs)("div",{className:"combat-encounter-hero-row",children:[(e.npcTag||e.character&&"dead"!==e.character.injury)&&"heroes_attack"===h.round.phase&&(0,yt.jsxs)("div",{className:"combat-hero-attack-results-container",children:[(0,yt.jsx)(Mn,{className:"combat-hero-button "+("false"!==O[t]?"acted":""),onClick:()=>((e,t)=>{const a=[...O];a[t]=(null===c||void 0===c?void 0:c.heroAttack(e))||"false",I(a)})(e,t),children:"false"===O[t]?c.getHeroAttackDecisionText(e):O[t]}),(0,yt.jsxs)("div",{className:`combat-hero-button ${"false"===O[t]?"":"hide"} `,onClick:()=>null===c||void 0===c?void 0:c.heroRethinkAttack(e),children:[(0,yt.jsx)("div",{className:"combat-sure-text",children:"'Are you Sure?'"}),(0,yt.jsx)(gn,{baseDie:20,displayNumber:"1"})]})]}),(0,yt.jsxs)("div",{className:"combat-encounter-hero-container",children:[(0,yt.jsxs)("div",{className:"combat-encounter-hero",children:[(0,yt.jsx)("div",{className:"combat-encounter-hero-name",children:o.getHeroFirstName(e.name)}),(0,yt.jsx)("div",{className:"combat-character-icon",children:(0,yt.jsx)(Et,{imageId:e.icon})}),e.character&&"injured"===e.character.injury&&(0,yt.jsx)("div",{className:"combat-encounter-hero-injury"}),e.character&&"dead"===e.character.injury&&(0,yt.jsx)("div",{className:"combat-encounter-hero-injury dead"})]}),(0,yt.jsx)("div",{className:"combat-encounter-hero-attributes",children:(0,yt.jsx)(ua,{hero:e,category:d.ALL,showAttributeLoss:!0})})]})]},e.name)))})]})]})},kn=e=>{let{encounter:t}=e;return(0,yt.jsx)("div",{className:"game-encounter-combat",children:(0,yt.jsx)("div",{className:"encounter-type-title",children:"Exploration"})})},jn=e=>{let{theme:t,tag:a,message:n}=e;return(0,yt.jsx)("div",{className:`tooltip theme-${t}`,children:(0,yt.jsx)("div",{className:"tooltip-content",children:n})})},On=e=>{let{encounter:t}=e;const a=Jt(),r=$t(),s=ta(),i=qt(),l=i.getChatManager(),o=i.getPartyManager(),c=a.getAllPlayerCharacters(),[d,u]=(0,n.useState)(c.map((()=>!1))),[h,m]=(0,n.useState)(c.map((()=>!1))),[g,p]=(0,n.useState)([]),f=(e,t)=>{const a=[...d],n=[...g];n[t]=r.getPerceptionTags(e),d[t]||(0!==d.filter((e=>e)).length&&o.perceptionEventReveal(e),a[t]=!0),u(a),p(n)},v=e=>s.getPlayerAttitudesStyle(e),y=(e,t,a)=>{let n="";const s=r.getCampaignTooltipForTag(e);if(s)return s;switch(g[t].type){case C.CURRENT_LOCATION:n=`The character carefully examines ${e.tag.name}.`;break;case C.BRANCH_LOCATION:n=`Reveal hints connecting ${e.tag.name} to an upcoming encounter.`;break;case C.CHARACTER_BACKSTORY:n="Connect the player's backstory to this new topic.";break;case C.CHARACTER_BACKSTORY_PROGRESS:n=`Reveal ${e.tag.name}, which relates to a character's backstory.`;break;case C.MAGIC_ITEM:n="Reveal a magic item."}switch(e.theme){case"comedic":n+=" The players find something funny about this.";break;case"grim":n+=" this is discussed in a grim manner";break;case"fantasy":n+=" the discussion around this is fantastical";break;case"heroic":n+=" this evokes a feeling of heroism";break;case"horror":n+=" something about this is scary";break;case"romantic":n+=" this is discussed with romantic undertones";break;case"serious":n+=" the players take this very seriously";break;case"dramatic":n+=" the table gets very dramatic about this"}return n},b=e=>{switch(g[e].type){case C.CURRENT_LOCATION:return(0,yt.jsxs)("div",{className:"perception-display current-location",children:[(0,yt.jsxs)("div",{className:"perception-description",children:["Nothing interesting found. Simply learned basic info about ",g[e].name,":"]}),(0,yt.jsx)("div",{className:"perception-tags",children:g[e].tags.map(((t,a)=>(0,yt.jsxs)("div",{className:`perception-tag text-pill type-${t.source} ${v(t.tag)} theme-${t.theme}`,children:[t.tag.name,t.theme&&(0,yt.jsx)(jn,{theme:"",tag:t.tag,message:y(t,e)})]},a)))})]});case C.BRANCH_LOCATION:return(0,yt.jsxs)("div",{className:"perception-display branch-location",children:[(0,yt.jsxs)("div",{className:"perception-description",children:["Learned some things about an upcoming encounter called ",g[e].name," which may be interesting:"]}),(0,yt.jsx)("div",{className:"perception-tags",children:g[e].tags.map(((t,a)=>(0,yt.jsxs)("div",{className:`perception-tag text-pill type-foreshadowing ${v(t.tag)} theme-${t.theme}`,children:[t.tag.name,t.theme&&(0,yt.jsx)(jn,{theme:"",tag:t.tag,message:y(t,e)})]},a)))})]});case C.CHARACTER_BACKSTORY:return(0,yt.jsxs)("div",{className:"perception-display backstory",children:[(0,yt.jsxs)("div",{className:"perception-description",children:["Shocking new information revealed about ",g[e].name,"'s Backstory!"]}),(0,yt.jsx)("div",{className:"perception-tags",children:g[e].tags.map(((t,a)=>(0,yt.jsxs)("div",{className:`perception-tag text-pill expected ${v(t.tag)} theme-${t.theme}`,children:[t.tag.name,t.theme&&(0,yt.jsx)(jn,{theme:"",tag:t.tag,message:y(t,e)})]},a)))})]});case C.CHARACTER_BACKSTORY_PROGRESS:return(0,yt.jsxs)("div",{className:"perception-display backstory",children:[(0,yt.jsxs)("div",{className:"perception-description",children:["Confirmation regarding ",g[e].name,"'s Backstory:"]}),(0,yt.jsx)("div",{className:"perception-tags",children:g[e].tags.map(((t,a)=>(0,yt.jsxs)("div",{className:`perception-tag text-pill expected ${v(t.tag)} theme-${t.theme}`,children:[t.tag.name,t.theme&&(0,yt.jsx)(jn,{theme:"",tag:t.tag,message:y(t,e)})]},a)))})]});case C.MAGIC_ITEM:let t=r.isRumor(g[e].tags[0].tag.name);return g.forEach(((a,n)=>{h[n]&&a.type===C.MAGIC_ITEM&&a.tags.forEach((a=>{a.tag.name===g[e].tags[0].tag.name&&(t=!1)}))})),(0,yt.jsxs)("div",{className:"perception-display magic-item",children:[(0,yt.jsx)("div",{className:"perception-description",children:t?"Discovered a Magic Item you have heard of!":"Learned about a nearby Magic Item."}),(0,yt.jsx)("div",{className:"perception-tags",children:g[e].tags.map(((a,n)=>(0,yt.jsxs)("div",{className:`perception-tag text-pill ${t?"":"expected"}  type-${a.source} ${v(a.tag)} theme-${a.theme}`,children:[a.tag.name,a.theme&&(0,yt.jsx)(jn,{theme:"",tag:a.tag,message:y(a,e)})]},n)))})]});case C.PLOT_HOOK:return(0,yt.jsxs)("div",{className:"perception-display-campaign-container",children:[(0,yt.jsxs)("div",{className:"perception-description",children:[r.getCampaignName()," Progress:"]}),(0,yt.jsxs)("div",{className:"perception-display plot-hook",children:[(0,yt.jsx)("div",{className:"campaign-icon",children:(0,yt.jsx)(Et,{imageId:r.getCampaignIcon()})}),(0,yt.jsxs)("div",{className:"campaign-plot-hook",children:[(0,yt.jsx)("b",{children:g[e].tags[0].tag.name})," ",`${r.getNextPlotHookPerceptionText()}`]})]})]})}};return(0,yt.jsxs)("div",{className:"game-encounter-perception",children:[(0,yt.jsx)("div",{className:"encounter-type-title",children:"Perception"}),(0,yt.jsx)("div",{className:"perception-container",children:(0,yt.jsx)("div",{className:"character-list",children:c.map(((e,t)=>(0,yt.jsxs)("div",{className:"perception-row",children:[(0,yt.jsx)("div",{className:"character-container",children:(0,yt.jsxs)("div",{className:"character-display",children:[(0,yt.jsx)("div",{className:"character-name",children:e.name.split(" ")[0]}),(0,yt.jsx)("div",{className:"character-icon",children:(0,yt.jsx)(Et,{imageId:e.icon})})]})}),d[t]?(0,yt.jsxs)("div",{className:"character-perception-tags-container",children:[b(t),h[t]?(0,yt.jsx)("div",{className:"character-perception-buttons",children:(0,yt.jsx)("div",{className:"character-perception-accepted",children:"\u2713"})}):(0,yt.jsxs)("div",{className:"character-perception-buttons",children:[(0,yt.jsxs)("div",{className:"character-perception-reroll-button",onClick:()=>((e,t)=>{f(e,t),r.spendDMPoints(1)})(e,t),children:["REROLL",(0,yt.jsx)(gn,{baseDie:20,displayNumber:1})]}),(0,yt.jsx)("div",{className:"character-perception-accept-button",onClick:()=>((e,t)=>{const a=[...h];a[t]=!0,m(a),r.acceptPerceptionTags(g[t],e),l.perceptionEvent(e,g[t])})(e,t),children:"ACCEPT"})]})]}):(0,yt.jsx)("div",{className:"character-perception-reveal-button",onClick:()=>f(e,t),children:(0,yt.jsx)("div",{className:"reveal-title",children:"PERCEPTION CHECK"})})]},t)))})})]})},In=[{text:"Organic Conversation +20 Score",top:"4%"},{text:"Guided Interactions +10 Score",top:"39%"},{text:"Off Topic +0 Score",top:"74%"}],Ln=e=>{var t;let{encounter:a}=e;const r=ta(),s=$t(),i=qt(),l=i.getChatManager(),o=i.getPartyManager(),c=Zt(),d=(Jt(),i.getTagManager()),[u,h]=(0,n.useState)([]),[m,g]=(0,n.useState)((()=>s.generateRoleplayEventTags("init"))),[p,f]=(0,n.useState)(5),v=(0,n.useRef)(null);(0,n.useEffect)((()=>{const e=[],t=[{min:5,max:20},{min:40,max:55},{min:77,max:88}],a=(e,t,a)=>Math.abs(parseFloat(e.top)-parseFloat(t))<10&&Math.abs(parseFloat(e.left)-parseFloat(a))<15;m.forEach((()=>{let n,r,s,i=0;do{i++;const l=Math.floor(3*Math.random()),o=t[l];n=`${o.min+Math.random()*(o.max-o.min)}%`,r=80*Math.random()+"%",s=e.some((e=>a(e,n,r)))}while(s&&i<100);e.push({top:n,left:r})})),h(e)}),[m]),(0,n.useEffect)((()=>{const e=()=>{const e=v.current;if(!e)return;const t=e.getBoundingClientRect();e.querySelectorAll(".encounter-flavor-tag").forEach((e=>{const a=e.querySelector(".tooltip-text"),n=a.getBoundingClientRect();n.right>t.right?(a.style.left="auto",a.style.right="0",a.style.transform="translateX(0)"):n.left-n.width/2<0?(a.style.left="0",a.style.right="auto",a.style.transform="translateX(0)"):(a.style.left="50%",a.style.right="auto",a.style.transform="translateX(-50%)"),n.bottom>0?(a.style.top="auto",a.style.bottom="100%"):(a.style.top="100%",a.style.bottom="auto")}))};return setTimeout(e,1e3),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[u,m]);const y=(e,t)=>{const a=(e=>{const t=parseFloat(e);return t<=20?20:t<=55?10:0})(u[t].top);f(p-1),-2===p?l.playerMessage("YAWWWN"):(p>0&&o.addPartyScore(a),l.roleplayingEvent(e)),s.selectRoleplayFlavorTag(e,p),g(s.generateRoleplayEventTags(""))},b=(null===(t=s.getCurrentEvent())||void 0===t?void 0:t.flavorText)||"",E=p>0?b:"You may keep roleplaying, but your players are growing bored.";return(0,yt.jsxs)("div",{className:"encounter-roleplay-container",children:[(0,yt.jsxs)("div",{className:"encounter-roleplay-header",children:[(0,yt.jsx)("div",{className:"encounter-roleplay-tutorial",children:(()=>{const e=c.getPlayerCharacters();return(0,yt.jsxs)("div",{className:"roleplay-legend",children:[(0,yt.jsxs)("div",{className:"legend-section",children:[(0,yt.jsxs)("div",{className:"legend-row",children:[(0,yt.jsx)("div",{className:"sample-tag text-pill type-location",children:"Location"}),(0,yt.jsx)("div",{className:"sample-desc",children:"Describe the environment"})]}),(0,yt.jsxs)("div",{className:"legend-row",children:[(0,yt.jsx)("div",{className:"sample-tag text-pill type-encounter",children:"Foreshadow"}),(0,yt.jsx)("div",{className:"sample-desc",children:"Hint about an upcoming encounter"})]}),(0,yt.jsxs)("div",{className:"legend-row",children:[(0,yt.jsx)("div",{className:"sample-tag text-pill type-all",children:"New Topic"}),(0,yt.jsx)("div",{className:"sample-desc",children:"Introduce/entertain new ideas"})]}),(0,yt.jsxs)("div",{className:"legend-row",children:[(0,yt.jsx)("div",{className:"sample-tag text-pill type-rumor",children:"Resolve Topic"}),(0,yt.jsx)("div",{className:"sample-desc",children:"Integrate/confirm introduced topics"})]})]}),(0,yt.jsx)("div",{className:"legend-section",children:(0,yt.jsx)("div",{className:"legend-column",children:(0,yt.jsxs)("div",{className:"legend-watchfor-container",children:[(0,yt.jsx)("div",{className:"sample-tag text-pill type-backstory",children:"Backstory"}),(0,yt.jsx)("div",{className:"sample-tag text-pill type-magic-item",children:"Magic Item"}),(0,yt.jsx)("div",{className:"sample-tag text-pill type-plot-hook",children:"Plot Hooks"})]})})}),(0,yt.jsx)("div",{className:"legend-section attitudes",children:(0,yt.jsxs)("div",{className:"legend-player-row",children:[(0,yt.jsxs)("div",{className:"legend-player-column",children:[(0,yt.jsx)("div",{className:"legend-title",children:"Player Attitudes:"}),(0,yt.jsxs)("div",{className:"attitude-row",children:[(0,yt.jsx)("span",{className:"attitude like",children:"Like"}),(0,yt.jsx)("span",{className:"attitude hate",children:"Hate"}),(0,yt.jsx)("span",{className:"attitude neutral",children:"Mixed"})]})]}),(0,yt.jsxs)("div",{className:"legend-player-column",children:[(0,yt.jsx)("div",{className:"encounter-rp-icon-container",children:(0,yt.jsx)("div",{className:"legend-player-row",children:e.map(((e,t)=>(0,yt.jsx)(Et,{imageId:e.icon},`char-${e.id}-${t}`)))})}),(0,yt.jsx)("div",{className:"legend-character-info",children:"+2/-1 Attention"})]})]})})]})})()}),(0,yt.jsxs)("div",{className:"encounter-roleplay-text",children:[(0,yt.jsxs)("div",{className:"encounter-roleplay-title",children:["Roleplay in ",a.location.name]}),(0,yt.jsx)("div",{className:"encounter-roleplay-instructions",children:E})]}),(0,yt.jsxs)("div",{className:"encounter-roleplay-skill-container",children:[(0,yt.jsx)(ma,{totalSegments:5,filledSegments:p,theme:"engagement",label:"Party Patience"}),(0,yt.jsx)("div",{className:"encounter-roleplay-hurry-button "+(p<=0?"disabled":""),onClick:()=>{p>0&&(o.addPartyTension(10),f(p-1),l.dmMessage(["Lets moooove along!","Blah Blah blah","Theres a lot more game to get to."]),g(s.generateRoleplayEventTags("")))},children:"Hurry Players"}),(0,yt.jsx)("div",{className:"encounter-roleplay-hurry-text",children:p>0?"+10 Tension":""})]})]}),(0,yt.jsxs)("div",{className:`encounter-roleplay-flavor-tags-container  ${p<=0?"disabled":""} `,ref:v,children:[In.map(((e,t)=>(0,yt.jsx)("div",{className:`band-label ${p<=0?"disabled":""} `,style:{top:e.top},children:e.text},`band-label-${t}`))),m.map(((e,t)=>{var a,n,s,i,l;return e.tag?(0,yt.jsxs)("div",{className:`encounter-flavor-tag text-pill theme-${e.tag.theme} \n\t\t\t\t\t\ttype-${e.tag.source} \n\t\t\t\t\t\t${l=e.tag.tag,r.getPlayerAttitudesStyle(l)}`,style:u[t],"data-tooltip":`${d.getTooltipText(e)}`,onClick:()=>y(e,t),children:[null===(a=e.tag)||void 0===a||null===(n=a.tag)||void 0===n?void 0:n.name,(0,yt.jsx)("div",{className:"tooltip-text",children:d.getTooltipText(e)})]},t):"treasure"===e.type||"dmpoint"===e.type?(0,yt.jsx)("div",{className:"encounter-rp-icon",style:u[t],"data-tooltip":`${d.getTooltipText(e)}`,onClick:()=>y(e,t),children:(0,yt.jsx)("div",{className:"encounter-rp-icon-container",children:(0,yt.jsx)(Et,{imageId:"treasure"===e.type?"icon_treasure1":"icon_dmpoint"})})},t):(0,yt.jsxs)("div",{className:"encounter-rp-icon theme-character",style:u[t],"data-tooltip":`${d.getTooltipText(e)}`,onClick:()=>y(e,t),children:[(0,yt.jsxs)("div",{className:"encounter-rp-icon-container",children:[(0,yt.jsx)(Et,{imageId:null===(s=e.character)||void 0===s?void 0:s.icon}),(0,yt.jsx)("div",{className:"encounter-rp-character-name",children:null===(i=e.character)||void 0===i?void 0:i.name})]}),(0,yt.jsx)("div",{className:"tooltip-text",children:d.getTooltipText(e)})]},t)}))]})]})},Pn=e=>{let{character:t,isSelected:a=!1,onClick:n,mini:r=!1,style:s={},"data-character-id":i,className:l=""}=e;return(0,yt.jsxs)("div",{className:`character-token ${a?"selected":""} ${r?"mini":""}  ${l}`,onClick:n,style:s,"data-character-id":i,children:[(0,yt.jsx)("div",{className:"character-icon",children:(0,yt.jsx)(Et,{imageId:t.icon})}),!r&&(0,yt.jsx)("div",{className:"character-name",children:t.name})]})},_n=e=>{var t,a,n,r;let{building:s,onClick:i,isSelectable:l,"data-building-id":o,onCharacterClick:c,onTagClick:d}=e;const u=qt(),h=(u.getTownManager(),u.getUiManager()),m=e=>{const t=e.value;let a=!1,n="",r="",s=";";switch(e.type){case R.ADD_DM_POINT:a=!0,r="icon_dmpoint";break;case R.ADD_PLAYER_POINT:a=!0,r="icon_playerpoint";break;case R.ADD_TREASURE:a=!0,r="icon_treasure1";break;case R.ADD_ENJOYMENT:n=t>0?"\ud83d\ude0a":"\ud83d\ude1e";break;case R.ADD_TENSION:return n=""+t,t>0?(n="+"+n,s=" tension-up"):s=" tension-down",(0,yt.jsxs)("div",{className:"effect-score",children:[(0,yt.jsx)("div",{className:"effect-score-label",children:"TENSION"}),(0,yt.jsx)("div",{className:"effect-score-value",children:n})]});case R.ADD_SCORE:return(0,yt.jsxs)("div",{className:"effect-score",children:[(0,yt.jsx)("div",{className:"effect-score-label",children:"SCORE"}),(0,yt.jsxs)("div",{className:"effect-score-value",children:["+",t]})]});case R.INJURE:n="\ud83d\udc94"}return a?(0,yt.jsx)("div",{className:`effect-display-icon ${s}`,children:(0,yt.jsx)(Et,{imageId:r})}):(0,yt.jsx)("div",{className:`effect-emoji-display ${s}`,children:n})},g=e=>{let t="",a="";switch(e.type){case R.ADD_TENSION:t=(e.value>0?"+":"")+e.value+" tension",a="tension-"+(e.value>0?"up":"down");break;case R.ADD_ENJOYMENT:t=e.value>0?"\ud83d\ude0a":"\ud83d\ude1e";break;case R.ADD_INVOLVEMENT:t=(e.value>0?"+":"")+e.value+" tension",a="attention-"+(e.value>0?"up":"down");break;case R.REPLENISH_MAGIC:t="\u2728";break;case R.REPLENISH_TOOLS:t="\ud83d\udd27";break;case R.HEAL:t="\u2764\ufe0f";break;case R.RESURRECT:t="\ud83d\udd04";break;case R.INJURE:t="\ud83d\udc94";break;case R.USE_TOOLS:a="use-tools",t="-\ud83d\udd27";break;case R.USE_MAGIC:a="use-magic",t="-\u2728";break;case R.ADD_DM_POINT:return(0,yt.jsx)("div",{className:"effect-display-icon",children:(0,yt.jsx)(Et,{imageId:"icon_dmpoint"})});case R.ADD_PLAYER_POINT:return(0,yt.jsx)("div",{className:"effect-display-icon",children:(0,yt.jsx)(Et,{imageId:"icon_playerpoint"})});case R.ADD_TREASURE:return(0,yt.jsx)("div",{className:"effect-display-icon",children:(0,yt.jsx)(Et,{imageId:"icon_treasure1"})});default:t+=e.type}return(0,yt.jsx)("div",{className:`effect-display ${a}`,children:t})};return(0,yt.jsxs)("div",{className:"building-card "+(l?"selectable":""),style:{left:`${null===(t=s.position)||void 0===t?void 0:t.x}%`,top:`${null===(a=s.position)||void 0===a?void 0:a.y}%`,width:`${null===(n=s.size)||void 0===n?void 0:n.width}px`,height:`${null===(r=s.size)||void 0===r?void 0:r.height}px`},onClick:i,"data-building-id":o,children:[(0,yt.jsxs)("div",{className:"building-header",children:[(0,yt.jsx)("div",{className:"building-name",children:s.building.name}),(0,yt.jsx)("div",{className:"effect-row",children:s.effects.map(((e,t)=>(0,yt.jsx)("div",{className:`effect ${e.type}`,children:g(e)},t)))})]}),(0,yt.jsx)("div",{className:"building-tags",children:s.tags.map(((e,t)=>{const a=s.resolvedTags.some((t=>t.name===e.tag.name));return(0,yt.jsx)("div",{className:`tag text-pill type-${e.source} ${h.getPlayerAttitudesStyle(e.tag)} theme-${e.theme} ${s.isHighlighted?"clickable":""} ${a?"resolved":""}`,onClick:()=>{s.isHighlighted&&!a&&d(e,s)},children:e.tag.name},t)}))}),(0,yt.jsx)("div",{className:"visitor-slots",children:Array(s.capacity).fill(0).map(((e,t)=>(0,yt.jsx)("div",{className:"slot "+(t<s.currentVisitors.length?"occupied":""),children:s.currentVisitors[t]?(0,yt.jsx)(Pn,{character:s.currentVisitors[t],mini:!0,onClick:e=>c(s.currentVisitors[t],e.currentTarget.getBoundingClientRect())}):(0,yt.jsx)("div",{className:"slot-effect",children:s.positionEffects[t].map(((e,t)=>(0,yt.jsx)("div",{className:`effect ${e.type}`,children:m(e)},t)))})},t)))}),(0,yt.jsx)("div",{className:"building-effect "+(s.isHighlighted?"hidden":""),children:s.building.description}),s.isHighlighted&&(0,yt.jsx)("div",{className:"interaction-hint",children:"Click on tags to gain their effects"})]})},Dn={BARRACKS:{name:"Barracks",type:k.BARRACKS,description:"Train and improve combat skills",tags:[_a.TREASURE.WEAPONS,_a.TREASURE.ARMOR],effects:[]},TEMPLE:{name:"Temple",type:k.TEMPLE,description:"Heal wounds or resurrect fallen heroes",tags:[_a.GAME.MAGIC,_a.GAME.HEALING],effects:[]},SHOP:{name:"Shop",type:k.SHOP,description:"Replenish tools and find magic items.",tags:[_a.GAME.TOOLS,_a.TREASURE.WEAPONS],allowMagicItems:!0,effects:[]},MARKETPLACE:{name:"Marketplace",type:k.SHOP,description:"Replenish tools and find magic items.",tags:[_a.GAME.TOOLS],effects:[]},TAVERN:{name:"Tavern",type:k.TAVERN,description:"Gossip, rumors, and conversation.",tags:[],addFriendlyTags:!0,effects:[]},GUILD_HALL:{name:"Guild Hall",type:k.GUILD_HALL,description:"Replenish Magic, Level Up, and find magic items.",tags:[_a.GAME.LEVEL_UP],allowMagicItems:!0,effects:[]},LIBRARY:{name:"Library",type:k.LIBRARY,description:"Replenish Magic",tags:[_a.PROPS.BOOKS],effects:[]},FIRE:{name:"Fire",type:k.FIRE,description:"Replenish \u2728, \ud83d\udd27",tags:[],effects:[]},CONFRONTATION:{name:"Confrontation",type:k.CONFRONTATION,description:"Increase Stress, chance of reduced attitude",tags:[],addFriendlyTags:!0,effects:[]}},Bn=[Dn.BARRACKS,Dn.TEMPLE,Dn.SHOP,Dn.MARKETPLACE,Dn.TAVERN,Dn.GUILD_HALL,Dn.LIBRARY,Dn.FIRE,Dn.CONFRONTATION],Fn=e=>{let{encounter:t}=e;const a=qt(),r=a.getTownManager(),s=Zt(),[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(s.getCharacters()),[h,m]=(0,n.useState)(0),[g,p]=(0,n.useState)(new Set),[f,v]=(0,n.useState)(null),[y,b]=(0,n.useState)(!0),E=$t(),S=(e,t)=>{const a=()=>{if(Math.random()<.5)return{type:R.NONE,value:0};if(Math.random()<.3)switch(Math.floor(9*Math.random())){case 0:case 1:case 2:if(e.effects.some((e=>e.type===R.ADD_TENSION)))break;return{type:R.ADD_TENSION,value:Math.random()>.5?5:-5};case 3:case 4:if(e.effects.some((e=>e.type===R.ADD_ENJOYMENT)))break;return{type:R.ADD_ENJOYMENT,value:Math.random()>.5?1:-1};case 5:if(e.effects.some((e=>e.type===R.ADD_DM_POINT)))break;return{type:R.ADD_DM_POINT,value:1};case 6:if(e.effects.some((e=>e.type===R.ADD_PLAYER_POINT)))break;return{type:R.ADD_PLAYER_POINT,value:1};case 7:if(e.effects.some((e=>e.type===R.ADD_TREASURE)))break;return{type:R.ADD_TREASURE,value:1};case 8:if(e.effects.some((e=>e.type===R.INJURE)))break;if(e.effects.some((e=>e.type===R.HEAL)))break;return{type:R.INJURE,value:1};default:return{type:R.ADD_SCORE,value:100}}return Math.random()<.2?{type:R.ADD_SCORE,value:20}:{type:R.ADD_SCORE,value:5*(Math.floor(2*Math.random())+1)}};return Array.from({length:t},(()=>[a()]))};(0,n.useEffect)((()=>{const e=(e=>{var t,a,n,s,i,l;Object.values(k);const o=[],c=(null===(t=e.town)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.nbBuildings[0])||4,d=(null===(n=e.town)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.nbBuildings[1])||7,u=c+Math.floor(Math.random()*(d-c+1)),h=100/3,m=new Set,g=[...(null===(i=e.town)||void 0===i||null===(l=i[0])||void 0===l?void 0:l.buildings)||Bn];for(let p=0;p<u;p++){const e=g[Math.floor(Math.random()*g.length)];let t,a;g.splice(g.indexOf(e),1);do{t=Math.floor(4*Math.random()),a=Math.floor(3*Math.random())}while(m.has(`${t},${a}`));m.add(`${t},${a}`);const n=25*t+6.25*Math.random(),s=a*h,i=(Math.random(),Math.random(),Math.floor(2*Math.random())+1),l={building:e,tags:r.getTagsForBuilding(e),resolvedTags:[],capacity:i,currentVisitors:[],effects:[...e.effects],positionEffects:S(e,i),position:{x:n,y:s},id:`${p}`};o.push(l)}return o})(t);l(e)}),[t]);const N=(e,t,a,n)=>{const s=t.currentVisitors.length,o=T(n,s,t.capacity);v({character:e,from:a,to:o}),requestAnimationFrame((()=>{const e=document.querySelector(".character-token.animating");e&&(e.style.setProperty("--move-x",o.left-a.left+"px"),e.style.setProperty("--move-y",o.top-a.top+"px"),e.classList.add("moving"))})),p((t=>new Set([...t,String(e.id)]))),setTimeout((()=>{v(null);const a=i.map((a=>({...a,isHighlighted:a.id===t.id,currentVisitors:a.id===t.id?[...a.currentVisitors,e]:a.currentVisitors})));l(a);const n=document.querySelector(`[data-building-id="${t.id}"]`);n&&n.classList.add("highlight"),setTimeout((()=>{r.townBuildingResolved(e,t,s)}),100)}),1e3)},T=(e,t,a)=>{const n=e.left+42,r=e.bottom-122;return new DOMRect(n+110*t,r,100,100)},x=(e,t)=>{if(y){const n=i.filter((e=>e.currentVisitors.length<e.capacity));if(n.length>0){const s=n[Math.floor(Math.random()*n.length)],i=document.querySelector(`[data-building-id="${s.id}"]`);if(i){const n=i.getBoundingClientRect();N(e,s,t,n),r.townBuildingAssigned(e,s),h>0&&a.getPartyManager().exhaustParty(h),m(h+2)}}}else c(e)},A=(e,t)=>{const n=t.currentVisitors[t.currentVisitors.length-1];a.getChatManager().townEvent(e,n,t.building),E.resolveTownTag(e),l(i.map((a=>a.id===t.id?{...a,isHighlighted:!1,resolvedTags:[...a.resolvedTags,e.tag]}:a)));const r=document.querySelector(`[data-building-id="${t.id}"]`);r&&r.classList.remove("highlight")};return(0,yt.jsxs)("div",{className:"town-encounter",children:[(0,yt.jsx)("div",{className:"buildings-container",children:i.map(((e,t)=>(0,yt.jsx)(_n,{building:e,onClick:t=>((e,t)=>{if(!o||e.currentVisitors.length>=e.capacity)return;const a=document.querySelector(`[data-character-id="${o.id}"]`);if(a){const n=a.getBoundingClientRect();N(o,e,n,t)}c(null)})(e,t.currentTarget.getBoundingClientRect()),isSelectable:null!==o&&e.currentVisitors.length<e.capacity,"data-building-id":e.id,onTagClick:A,onCharacterClick:x},t)))}),(0,yt.jsx)("div",{className:"characters-container",children:(0,yt.jsxs)("div",{className:"character-holder",children:[(0,yt.jsx)("div",{className:"characters-title",children:"Encourage a character to act"}),(0,yt.jsxs)("div",{className:"characters-display",children:[h>0&&(0,yt.jsxs)("div",{className:"exhaustion-title",children:["Next action ",h," Party Exhaustion"]}),(0,yt.jsx)("div",{className:"characters-row",children:d.map(((e,t)=>(0,yt.jsx)(Pn,{character:e,isSelected:o===e,onClick:t=>x(e,t.currentTarget.getBoundingClientRect()),"data-character-id":String(e.id)},t)))})]})]})}),f&&(0,yt.jsx)(Pn,{character:f.character,style:{position:"fixed",left:`${f.from.left}px`,top:`${f.from.top}px`,width:`${f.from.width}px`,height:`${f.from.height}px`,transition:"transform 1.0s ease"},className:"animating",mini:!0,onClick:()=>{}})]})},Un=e=>{let{encounter:t}=e;return(0,yt.jsx)("div",{className:"game-encounter-combat",children:(0,yt.jsx)("div",{className:"encounter-type-title",children:"Trap"})})},Hn=["Score","Tension on fail","Expected Reward"],Gn=e=>{let{results:t,resultsValues:a}=e;const r=a[0].length,s=qt(),i=s.getCombatManager(),[l,o]=(s.getPartyManager(),s.getChatManager(),s.getCampaignManager().getCollectedThemes(),(0,n.useState)(a)),[c,d]=(0,n.useState)(t),u=100/r,h=c*u+u/2+"%";(0,n.useEffect)((()=>{d(t)}),[t]);const m=e=>{const t=2===e,a=((e,t)=>{const a=["engagement","stress","reward"][t],n=Math.min(...e),r=Math.max(...e);return e.map((e=>i.generateColorFromValue(e,n,r,a)))})(l[e],e),n=l[e],s=Array.from({length:r},((e,r)=>(0,yt.jsx)("div",{className:`challenge-bar-segment  \n                ${r===c?"highlighted":""}\n                ${t?"reward":""}\n            `,style:{backgroundColor:a[r]||""},children:(0,yt.jsx)("div",{className:"label",children:n[r]})},r)));return(0,yt.jsx)("div",{className:"challenge-bar",children:(0,yt.jsx)("div",{className:"segment-container",children:s})})};return(0,yt.jsx)("div",{className:"challenge-reward-row",children:(0,yt.jsxs)("div",{className:"challenge-bar-container",children:[(0,yt.jsx)("div",{className:"challenge-bar-results-label",children:"RESULTS"}),(0,yt.jsx)("div",{className:"challenge-labels",children:Hn.map(((e,t)=>(0,yt.jsx)("div",{className:"challenge-label",children:e},t)))}),(0,yt.jsxs)("div",{className:"challenge-bars",children:[(0,yt.jsx)("div",{className:"segment-numbers",children:Array.from({length:r},((e,t)=>(0,yt.jsx)("div",{className:"segment-number",children:t},t)))}),(0,yt.jsx)("div",{className:"challenge-arrow",style:{left:h}}),l.map(((e,t)=>(0,yt.jsx)("div",{className:"segment-instance",children:m(t)},t)))]})]})})},Wn=(e,t)=>{if(e.attributeDefault)switch(e.attributeDefault){case"furniture":return{combat:1,tools:2};case"food":return{tools:2};default:return{tools:1}}else switch(e){case _a.RACE.HUMANS:return{combat:2,tools:2};case _a.RACE.HALFLINGS:return{combat:1,tools:2,magic:1};case _a.EVENTS.MYSTERIES:return{magic:1,tools:1};case _a.MONSTERS.CULTISTS:return{magic:3,tools:1}}return{}},Kn={CHARACTER_NAMES:[["Godfrey","Sable","Saul","Jimbo","Neb","Nestrin","Dirk","Crystal","Immeral","Olga","Ricky"],["Rose","Goodwyne","Halfheart","Farmer","Taylor","of the Sea","Trainer","of the Woods","Silkmonger","Smith"]],PLAYER_NAMES:[["Olivier","Dan","Matt","Maxim","Angie","Charlotte","Dawn","Bill","Tom","Sarah"],["Brass","Andrews","Wallace","Skuski","Kubrik","Binchs","Wells","Anteds","Kruk","Madup"]]};const zn=e=>e[Math.floor(Math.random()*e.length)],Vn=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return zn(e?Kn.CHARACTER_NAMES[0]:Kn.PLAYER_NAMES[0])+" "+zn(e?Kn.CHARACTER_NAMES[1]:Kn.PLAYER_NAMES[1])};const Yn=25,Qn=10,Xn={CHALLENGE_PER_HERO:5},Zn={BACKSTORY_ASSIGNED:10,MAGIC_ITEM_INTRODUCED:5,MAGIC_ITEM_FOUND:15,BACKSTORY_FULFILLED:20},Jn={LOCATION_DESCRIBED:1,FORESHADOWED_ENCOUNTER:5,ENCOUNTER_TAG_RESOLVED:10},qn=e=>{var t;let{challengeAssistTags:a,challengeHeroes:r,challengeTags:s,attemptCallback:i,sawResultsCallback:l,heroesEnabledCallback:o}=e;const u=Zt(),h=$t(),m=ea(),g=Jt(),[p,f]=(0,n.useState)(1),[v,y]=(0,n.useState)(0),[b,E]=(0,n.useState)(0),[S,N]=(0,n.useState)(!1),[T,x]=(0,n.useState)(Array(s.length).fill(!1)),[A,C]=(0,n.useState)(!1),M=T.every((e=>e)),w=(e,t)=>{let a,n=[],r=Wn(e);return Object.keys(r).forEach((e=>{if(r[e])for(let s=0;s<r[e]*t;s++)a=u.getUFAttributeSymbol(e),n.push((0,yt.jsx)("span",{className:`attribute-icon ${e}`,children:a},`${e}-${s}`))})),n},R=e=>h.getEstablishedTags().some((t=>t.name===e.name))||h.getCollectedLocationTags().some((t=>t.name===e.name));(0,n.useEffect)((()=>{N(!1),T[v]?o(!1):o(!0),R(s[v])?0===p&&f(1):f(0)}),[v,T]);const k=e=>e?(0,yt.jsxs)("div",{className:"challenge-assistance-hero",children:[(0,yt.jsx)("div",{className:"challenge-assistance-hero-name",children:e.name}),(0,yt.jsx)(ua,{hero:e,collapsed:!0,showAttributeLoss:!1,category:d.ALL})]}):(0,yt.jsx)("div",{className:"challenge-assistance-hero no-hero",children:"Ask a player to select a hero to attempt the challenge."}),j=(e,t,a,n)=>{if(0===a.length)return{base:0,combat:0,magic:0,tools:0,total:0};let r=Wn(e),s=((e,t)=>{let a={};return e.forEach((e=>{e.npcTag&&(e=u.generateNPC(e.npcTag));let t=la(e.character,!0);Object.keys(t).forEach((e=>{a[e]?a[e]+=t[e]:a[e]=t[e]}))})),t.forEach((e=>{let t=Wn(e);Object.keys(t).forEach((e=>{a[e]&&t[e]?a[e]=(a[e]||0)+t[e]:a[e]=t[e]}))})),a})(a,n);const i=t+1;let l=(r[c.COMBAT]||0)*(i||1),o=(r[c.MAGIC]||0)*(i||1),d=(r[c.TOOLS]||0)*(i||1),h=s[c.COMBAT]||0,m=s[c.MAGIC]||0,g=s[c.TOOLS]||0,p=0===l?0:-5*(l-h),f=0===o?0:-5*(o-m),v=0===d?0:-5*(d-g);var y,b,E;return{base:75,combat:p,magic:f,tools:v,total:(y=75+p+f+v,b=5,E=95,Math.min(Math.max(y,b),E))}};(0,n.useEffect)((()=>{}),[S]);return(0,yt.jsxs)("div",{className:"challenge-display-column",children:[(0,yt.jsxs)("div",{className:"challenge-tag-container",children:[(0,yt.jsx)("div",{className:"challenge-tag-ui prev",onClick:()=>{y(v>0?v-1:s.length-1),l()},children:(0,yt.jsx)("div",{className:"challenge-tag-ui-text",children:"<"})}),(0,yt.jsx)("div",{className:`challenge-current-tag text-pill theme-${s[v]} ${R(s[v])?" type-encounter":"expected"} `,children:null===(t=s[v])||void 0===t?void 0:t.name}),(0,yt.jsx)("div",{className:"challenge-tag-ui next",onClick:()=>{v<s.length-1?y(v+1):y(0),l()},children:(0,yt.jsx)("div",{className:"challenge-tag-ui-text",children:">"})})]}),T[v]&&!S?(0,yt.jsxs)("div",{children:[(0,yt.jsx)("div",{className:"challenge-succeeded-instructions",children:M?"Players have completed all Challenges. Reward them.":"Continue the challenge with another element or reward the players and move on."}),(0,yt.jsx)("div",{className:"challenge-succeeded",children:"CHALLENGE SUCCEEDED"})]}):(0,yt.jsxs)("div",{className:"challenge-display-container",children:[(0,yt.jsx)("div",{className:"challenge-display",children:(0,yt.jsxs)("div",{className:"challenge-display-row",children:[p>0&&(0,yt.jsx)("div",{className:"challenge-difficulty-ui difficulty-down",onClick:()=>{f(1===p?3:p-1)},children:(0,yt.jsx)("div",{className:"challenge-difficulty-ui-text",children:"-"})}),(0,yt.jsxs)("div",{className:"challenge-display-header-column",children:[(0,yt.jsx)("div",{className:"challenge-display-instructions",children:0===p?`Players haven't been exposed to ${s[v].name} yet. Introduce the new topic with a simple challenge.`:"Set the challenge rating and raise or lower the expected reward."}),(0,yt.jsx)("div",{className:"challenge-tag-attribute-container",children:w(s[v],p+1)}),(0,yt.jsxs)("div",{className:"challenge-difficulty-display-difficulty",children:[p>0&&(0,yt.jsxs)("div",{children:[(e=>{switch(e){case 0:return"Establishing";case 1:return"Easy";case 2:return"Challenging";case 3:return"Difficult";default:return""}})(p)," "]}),(0,yt.jsxs)("div",{children:[(e=>{switch(e){case 0:default:return"";case 1:return"+1 result";case 2:return"+2 result";case 3:return"+3 result"}})(p)," "]})]})]}),p>0&&(0,yt.jsx)("div",{className:"challenge-difficulty-ui difficulty-up",onClick:()=>{f(3===p?1:p+1)},children:(0,yt.jsx)("div",{className:"challenge-difficulty-ui-text",children:"+"})})]})}),(0,yt.jsx)("div",{className:"challenge-assistance-container",children:(0,yt.jsxs)("div",{className:"challenge-assistance-list",children:[(0,yt.jsx)("div",{className:"challenge-assistance-list-column",children:r.length>0?r.map(((e,t)=>(0,yt.jsx)("div",{children:k(e)},e.name||t))):(0,yt.jsx)("div",{className:"challenge-assistance-list-no-heroes",children:k()})}),(0,yt.jsx)("div",{className:"challenge-assistance-list-column",children:a.length>0?a.map(((e,t)=>(0,yt.jsxs)("div",{className:"challenge-assistance-tag",children:[(0,yt.jsx)("div",{className:"challenge-assistance-tag-name-container",children:(0,yt.jsx)("div",{className:"challenge-assistance-tag-name text-pill type-location",children:null===e||void 0===e?void 0:e.name})}),e&&w(e,1)]},t))):null})]})}),(0,yt.jsx)("div",{className:"challenge-display-footer",children:(0,yt.jsxs)("div",{className:"challenge-attempt-attempt-row",children:[((e,t,a,n)=>{const r=j(e,t,a,n);return(0,yt.jsxs)("div",{className:"challenge-display-footer-legend-container",children:[(0,yt.jsxs)("div",{className:"challenge-display-legend-info",children:[(0,yt.jsxs)("div",{className:"challenge-display-legend-item",children:[(0,yt.jsx)("u",{children:"Base"}),(0,yt.jsx)("br",{}),r.base,"%",(0,yt.jsx)("br",{})]}),(0,yt.jsxs)("div",{className:"challenge-display-legend-item",children:[(0,yt.jsx)("u",{children:"\u2694\ufe0f"}),(0,yt.jsx)("br",{}),r.combat<0?"":"+",r.combat,"%",(0,yt.jsx)("br",{})]}),(0,yt.jsxs)("div",{className:"challenge-display-legend-item",children:[(0,yt.jsx)("u",{children:"\u2728"}),(0,yt.jsx)("br",{}),r.magic<0?"":"+",r.magic,"%",(0,yt.jsx)("br",{})]}),(0,yt.jsxs)("div",{className:"challenge-display-legend-item",children:[(0,yt.jsx)("u",{children:"\ud83d\udd27"}),(0,yt.jsx)("br",{}),r.tools<0?"":"+",r.tools,"%",(0,yt.jsx)("br",{})]})]}),(0,yt.jsx)("div",{className:"challenge-display-legend-info",children:(0,yt.jsx)("div",{className:"challenge-display-legend-item",children:"+5 Exhaustion / Hero"})}),(0,yt.jsx)("div",{className:"challenge-display-legend-info",children:(0,yt.jsx)("div",{className:"challenge-display-legend-item",children:"+10 Score / Location Element"})})]})})(s[v],p,r,a),S?(0,yt.jsxs)("div",{className:"challenge-result-container",children:[(0,yt.jsx)("div",{className:"challenge-result-header",children:(0,yt.jsx)("u",{children:A?"FAILED":0===p?"Established":"SUCCEEDED"})}),(0,yt.jsxs)("div",{className:"challenge-result-info",children:[(0,yt.jsx)("div",{className:"challenge-result-labels",children:["Needed:","Rolled:"].map(((e,t)=>(0,yt.jsx)("div",{className:"result-label",children:e},t)))}),(0,yt.jsx)("div",{className:"challenge-result-values",children:[j(s[v],p,r,a).total,b].map(((e,t)=>(0,yt.jsx)("div",{className:"result-label",children:e},t)))})]}),(0,yt.jsx)("div",{className:"challenge-result-button",onClick:()=>(N(!1),0!==p||A||f(1),void l()),children:"OK"})]}):(0,yt.jsx)("div",{className:`challenge-attempt-button ${T[v]?"completed":""}\n                                ${T[v]||0===r.length?"disabled":""}`,onClick:()=>((e,t,a,n)=>{if(o(!1),0===a.length)return;const r=[];a.forEach((e=>{if(e.character){const t=g.getPlayerAssignedCharacter(e.character);t&&r.push(t)}})),m.stressAction(r),m.playersTakeAction(a.map((e=>{var t;return e.character?null===(t=g.getPlayerAssignedCharacter(e.character))||void 0===t?void 0:t.name:""})).filter((e=>void 0!==e&&""!==e)));const s=Math.ceil(100*Math.random());E(s);const l=j(e,t,a,n);m.addPartyScore(Qn);const c=s<=l.total;if(c)if(C(!1),i(c,t,e),t>0){let e=[...T];e[v]=!0,x(e)}else h.resolveExpectedTagsForBranch(e);else C(!0),i(!1,t,e);N(!0)})(s[v],p,r,a),children:(0,yt.jsxs)("div",{children:[0===p?"ESTABLISH":"ATTEMPT",(0,yt.jsxs)("div",{className:"challenge-attempt-button-success",children:[j(s[v],p,r,a).total,"%"]}),(0,yt.jsx)("div",{className:"challenge-attempt-exhaustion",children:Xn.CHALLENGE_PER_HERO*(r.length||1)+" Exhaustion"})]})})]})})]})]})},$n=e=>{var t,a,r,s;let{encounter:i}=e;const l=[[0,5,10,15,25,35,40,50,75,100],[5,7,10,12,15,18,22,26,30,35],[1,1,1,2,2,3,3,3,4,5]],o=qt(),c=o.getPartyManager(),u=$t(),h=ta(),m=o.getChatManager(),g=Jt();let p=(null===(t=u.currentEncounter)||void 0===t?void 0:t.location.tags)||[];const f=u.getCollectedLocationTagsForChallenge(),[v,y]=(0,n.useState)(new Array(p.length).fill(!1)),[b,E]=(0,n.useState)([]),[S,N]=(0,n.useState)([]),[T,x]=(0,n.useState)(c.generateHeroes([])),[A,C]=(0,n.useState)(new Array(T.length).fill(null)),[M,w]=(0,n.useState)(0),[R,k]=(0,n.useState)(0),[j,O]=(0,n.useState)(!0),[I,L]=(0,n.useState)({}),P=null===(a=u.currentEncounter)||void 0===a?void 0:a.challenge,_=P&&(null===(r=P[0])||void 0===r?void 0:r.name)||"Skill Challenge",D=P&&(null===(s=P[0])||void 0===s?void 0:s.description)||"You must overcome a challenge to proceed.",B=p.filter((e=>!f.some((t=>t.name===e.name)))),F=e=>A[e],U=e=>{L((t=>({...t,[e]:Math.random()})))},H=e=>!!A[e]||!!b.includes(T[e])&&!(f.length<=S.length),G=(e,t)=>{const a=[...A];a[e]=t,C(a);const n=Math.floor(3*Math.random());let r=`Could I use ${t.name} here?`;switch(n){case 0:r=`Oh! I'll use the ${t.name} we were talking about earlier!`;break;case 1:r=`${t.name} will give me a bit of an edge.`;break;case 2:r=`I think ${t.name} will help me out here.`;break;default:r=`Could I use ${t.name} here?`}m.playerMessage(r,e)},W=e=>{const t=[...v];t[e]=!t[e],y(t),S.includes(f[e])?N(S.filter((t=>t.name!==f[e].name))):N([...S,f[e]])};(0,n.useEffect)((()=>{m.dmMessage(D)}),[]);const K=e=>{var t;return(null===(t=A[e])||void 0===t?void 0:t.name)||"Select a Tag"},z=e=>b.includes(T[e]),V=e=>{const t=A[e];if(t){const a=[...A];a[e]=null,C(a),N(S.filter((e=>e.name!==t.name))),y(v.map(((e,a)=>{var n;return(null===(n=f[a])||void 0===n?void 0:n.name)!==t.name&&e})))}},Y=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"DESELECT":0===b.length?e?"ATTEMPT":"Attempt":e?"ASSIST":"Assist"};return(0,yt.jsx)("div",{className:"game-encounter-challenge",children:(0,yt.jsxs)("div",{className:"challenge-container",children:[(0,yt.jsxs)("div",{className:"challenge-top-bar",children:[(0,yt.jsx)("div",{className:"encounter-title",children:_}),(0,yt.jsx)("div",{className:"encounter-title desc",children:D})]}),(0,yt.jsxs)("div",{className:"challenge-body",children:[(0,yt.jsxs)("div",{className:"challenge-character-list",children:[(()=>{var e;return(0,yt.jsxs)("div",{className:"challenge-encounter-available-tags",children:["Elements of ",null===(e=u.currentEncounter)||void 0===e?void 0:e.location.name,(0,yt.jsxs)("div",{className:"challenge-location-tags-container",children:[f.map(((e,t)=>(0,yt.jsx)("div",{className:"challenge-location-tag",children:(0,yt.jsx)("div",{className:"challenge-location-tag-name text-pill type-location "+(v[t]?"used":""),onClick:()=>W(t),children:e.name})},e.name))),B.map(((e,t)=>(0,yt.jsx)("div",{className:"challenge-location-tag",children:(0,yt.jsx)("div",{className:"challenge-location-tag-name text-pill expected  "+(v[t]?"used":""),children:e.name})},e.name)))]})]})})(),(0,yt.jsxs)("div",{className:"challenge-encounter-heroes",children:[(0,yt.jsxs)("div",{className:"challenge-encounter-available-tags-title",children:["Choose Hero to ",Y()]}),T&&T.map(((e,t)=>(0,yt.jsx)("div",{className:"challenge-encounter-hero-row",children:(0,yt.jsxs)("div",{className:"challenge-encounter-hero-container",children:[(0,yt.jsxs)("div",{className:`challenge-encounter-hero ${z(t)?"selected ":""} `,children:[(0,yt.jsx)("div",{className:"challenge-encounter-hero-name",children:e.name}),(0,yt.jsx)("div",{className:"challenge-character-icon",children:(0,yt.jsx)(Et,{imageId:e.icon})}),e.character&&"injured"===e.character.injury&&(0,yt.jsx)("div",{className:"challenge-encounter-hero-injury"}),e.character&&"dead"===e.character.injury&&(0,yt.jsx)("div",{className:"challenge-encounter-hero-injury dead"})]}),(0,yt.jsx)("div",{className:"challenge-encounter-hero-attributes",children:(0,yt.jsx)(ua,{hero:e,category:d.ALL,showAttributeLoss:!0})}),(0,yt.jsx)("div",{className:"challenge-encounter-hero-ui",children:(0,yt.jsxs)("div",{className:"challenge-assist-column",children:[(0,yt.jsx)(Mn,{className:`challenge-assist-button assist ${z(t)?"selected ":" "} ${j?"":"disabled"} `,regenerateKey:I[t],onClick:e=>((e,t)=>{const a=T[e].character?g.getPlayerAssignedCharacter(T[e].character):null,n=b.length>0;if(console.log("Theme? ",t),b.includes(T[e]))E(b.filter((t=>t.name!==T[e].name))),A[e]&&V(e),a&&m.playerMessage(`Actually, ${T[e].name} is going to sit this one out...`,a.id);else if(E([...b,T[e]]),a)if(n)if(t)switch(t){case"comedic":m.playerMessage(`Heehee...${T[e].name} will help.`);break;case"heroic":m.playerMessage(`${T[e].name} will assist.... FOR JUSTICE!`);break;case"serious":m.playerMessage(`${T[e].name} better help out. This is serious.`);break;case"dramatic":m.playerMessage(`To aid in your hour of need, ${T[e].name} will help!`);break;case"grim":m.playerMessage(`Maybe we will both die, but ${T[e].name} will help.`);break;case"romantic":m.playerMessage(`Maybe you want some company doing that...?  ${T[e].name} can help out.`);break;case"fantasy":m.playerMessage(`Like in all good stories, heroes stick together... ${T[e].name} will help!`);break;case"horror":m.playerMessage(`It gives me the chills, but ${T[e].name} will help anyway.`)}else m.playerMessage(`${T[e].name} can help!`,a.id);else if(t)switch(t){case"comedic":m.playerMessage(`Heehee...${T[e].name} will do this, but while singing in a high-pitched voice.`);break;case"heroic":m.playerMessage(`${T[e].name} will do this FOR JUSTICE!`);break;case"serious":m.playerMessage(`Lets stop fooling around. ${T[e].name} will do this.`);break;case"dramatic":m.playerMessage(`For the glory of whatever we are doing, ${T[e].name} will do this.`);break;case"grim":m.playerMessage(`If ${T[e].name} dies doing this, so be it.`);break;case"romantic":m.playerMessage(`OooOooh. I think ${T[e].name} can handle this in style...`);break;case"fantasy":m.playerMessage(`${T[e].name} will do this with magic or something fantastical...`);break;case"horror":m.playerMessage(`There's something creepy about this, but ${T[e].name} will do it anyway.`)}else m.playerMessage(`${T[e].name} will attempt this challenge!`,a.id)})(t,e),children:Y(!0,z(t))}),(0,yt.jsxs)("div",{className:`challenge-assist-button location ${H(t)?"":"disabled"} ${j?"":"disabled"}`,children:[(0,yt.jsx)("div",{className:`challenge-use-label text-pill use ${F(t)?"hidden":""} `,onClick:()=>{(e=>{if(H(e)&&!(f.length<=S.length))for(let t=0;t<f.length;t++){const a=f[t];if(!S.includes(a)&&!v[t]){G(e,a);const t=f.findIndex((e=>e.name===a.name));W(t);break}}})(t)},children:"inspiration"}),(0,yt.jsx)("div",{className:"challenge-use-label text-pill  type-location applied-tag "+(F(t)?"":"hidden"),onClick:()=>V(t),children:K(t)})]})]})})]})},e.name)))]})]}),(0,yt.jsx)("div",{className:"challenge-display-container",children:(0,yt.jsx)(qn,{challengeTags:(()=>{const e=u.getCurrentEvent();return e&&e.tags?e.tags:u.getEncounterTags()})(),challengeAssistTags:S,challengeHeroes:b,attemptCallback:(e,t,a)=>{const n=u.getEncounterChatTrigger(a);if(!u.getEstablishedTags().includes(a)&&n)m.fireNewChatMessage(n);else{const t=b[0].character?g.getPlayerAssignedCharacter(b[0].character):null;t&&(e?b.length>1?m.playerMessage("This challenge is no match for our combined skills!",t.id):Math.random()<.25?m.playerMessage("Boom. Success. NEXT Challenge.",t.id):m.playerMessage("Yeah!",t.id):b.length>1?m.playerMessage("Even with our combined skills we still failed?!",t.id):Math.random()<.25?m.playerMessage("NOOOO. Oooooo. Ooo.",t.id):m.playerMessage("Maybe someone else should try...",t.id))}c.exhaustParty(b.length*Xn.CHALLENGE_PER_HERO),e?w(M+t):(k(R+1),c.addPartyTension(l[1][M]))},sawResultsCallback:()=>{N([]),E([]),C(new Array(T.length).fill(null)),O(!0),(()=>{L({});for(let e=0;e<T.length;e++)U(e)})()},heroesEnabledCallback:e=>{O(e)}})})]}),(0,yt.jsx)("div",{className:""}),(0,yt.jsxs)("div",{className:"challenge-footer",children:[(0,yt.jsx)("div",{className:"challenge-reward-track",children:(0,yt.jsx)(Gn,{results:M,resultsValues:l})}),(0,yt.jsxs)("div",{className:"challenge-rewards-ui-container",children:[(0,yt.jsxs)("div",{className:"challenge-failure",children:[(0,yt.jsx)("div",{className:"challenge-failure-title",children:"Failures"}),(0,yt.jsx)("div",{className:"challenge-display-failures",children:Array.from({length:3}).map(((e,t)=>(0,yt.jsx)("span",{className:"failure-circle "+(t<R?"filled":"")},t)))})]}),(0,yt.jsx)("div",{className:"challenge-accept-results",onClick:()=>(c.addPartyScore(l[0][M]),void h.showRewardModal(l[2][M],!0)),children:"ACCEPT RESULTS"})]})]})]})})},er=e=>{let{encounter:t}=e;return(0,yt.jsx)("div",{className:"game-encounter-combat",children:(0,yt.jsx)("div",{className:"encounter-type-title",children:"Puzzle"})})},tr=e=>{let{encounter:t}=e;return(0,yt.jsx)("div",{className:"game-encounter-combat",children:(0,yt.jsx)("div",{className:"encounter-type-title",children:"Story"})})},ar=e=>{let{content:t,position:a="top",delay:r=200,className:s="",maxWidth:i=250,visible:l,trigger:o="hover",preservePositioning:c=!1,showHelpIcon:d=!1,children:u}=e;const[h,m]=(0,n.useState)(!1),[g,p]=(0,n.useState)({x:0,y:0}),f=(0,n.useRef)(null),v=(0,n.useRef)(null),y=(0,n.useRef)(null),b=void 0!==l?"function"===typeof l?l():l:h;(0,n.useEffect)((()=>{if(b&&v.current&&f.current){const e=window.getComputedStyle(v.current);if("none"===e.display||"hidden"===e.visibility)return;const t=v.current.getBoundingClientRect(),n=f.current.getBoundingClientRect();let r=0,s=0;if(c)switch(a){case"top":r=window.scrollX+t.left+t.width/2-n.width/2,s=window.scrollY+t.top-n.height-12;break;case"bottom":r=window.scrollX+t.left+t.width/2-n.width/2,s=window.scrollY+t.bottom+12;break;case"left":r=window.scrollX+t.left-n.width-12,s=window.scrollY+t.top+t.height/2-n.height/2;break;case"right":r=window.scrollX+t.right+12,s=window.scrollY+t.top+t.height/2-n.height/2}else switch(a){case"top":r=t.left+t.width/2-n.width/2,s=t.top-n.height-8;break;case"bottom":r=t.left+t.width/2-n.width/2,s=t.bottom+8;break;case"left":r=t.left-n.width-8,s=t.top+t.height/2-n.height/2;break;case"right":r=t.right+8,s=t.top+t.height/2-n.height/2}const i=window.innerWidth,l=window.innerHeight;r<10&&(r=10),r+n.width>i-10&&(r=i-n.width-10),s<10&&(s=10),s+n.height>l-10&&(s=l-n.height-10),p({x:r,y:s})}}),[b,a,c]);const E=()=>{y.current&&clearTimeout(y.current),y.current=setTimeout((()=>m(!0)),r)},S=()=>{y.current&&clearTimeout(y.current),m(!1)};(0,n.useEffect)((()=>()=>{y.current&&clearTimeout(y.current)}),[]);const N=()=>{m(!h)};return(0,yt.jsxs)("div",{className:`tooltip-wrapper-container ${c?"preserve-positioning":""} ${s}`,ref:v,..."hover"===o||"both"===o?{onMouseEnter:E,onMouseLeave:S,onFocus:E,onBlur:S,onClick:"both"===o?N:void 0}:"click"===o?{onClick:N}:{},children:[u,b&&(0,yt.jsxs)("div",{className:`tooltip-wrapper tooltip-${a}`,ref:f,style:{left:g.x,top:g.y,maxWidth:"number"===typeof i?`${i}px`:i,zIndex:1e4},children:["          ",(0,yt.jsx)("div",{className:"tooltip-content",children:t}),d&&(0,yt.jsx)("div",{className:"tooltip-help-icon",children:(0,yt.jsx)("span",{className:"tooltip-help-icon-text",children:"?"})})]})]})},nr=e=>{let{travelOption:t,theme:a,onClick:n,length:r}=e;const{id:s,name:i,description:l,time:o,tags:c,score:d,boredom:u,tag:h,exhaustion:m,travelOptionType:g}=t,p=$t(),f=p.getEventTag(t),v=e=>p.hasTravelTag(e),y=e=>-1===e?"?":e,b=f&&!v(f);return(0,yt.jsxs)("div",{className:`travel-option ${r} ${b?"locked":"unlocked"}`,onClick:n,children:[b&&(0,yt.jsx)("div",{className:"locked-banner",children:(0,yt.jsx)("span",{children:"UNDISCOVERED"})}),(0,yt.jsxs)("div",{className:"travel-option-header",children:[(0,yt.jsx)("span",{className:"travel-option-name",children:i}),f&&(0,yt.jsx)("span",{className:"travel-option-tag text-pill type-travel "+(v(f)?"":"missing"),children:f.name}),(0,yt.jsx)("div",{className:"travel-option-description",children:l})]}),b?(0,yt.jsxs)(yt.Fragment,{children:[(0,yt.jsxs)("span",{className:"travel-option-detail",children:["\ud83d\udd52:",y(o)]}),(0,yt.jsxs)("span",{className:"travel-option-detail time",children:["\ud83d\udc41\ufe0f:",y(u)]}),(0,yt.jsx)("span",{className:"travel-option-detail tags text-pill type-location",children:c})]}):(0,yt.jsxs)(yt.Fragment,{children:[(0,yt.jsx)(ar,{content:"Journey Length increase",preservePositioning:!0,children:(0,yt.jsxs)("span",{className:"travel-option-detail",children:["\ud83d\udd52:",y(o)]})}),(0,yt.jsx)(ar,{content:"Boredom Risk Increase",preservePositioning:!0,children:(0,yt.jsxs)("span",{className:"travel-option-detail time",children:["\ud83d\udc41\ufe0f:",y(u)]})}),(0,yt.jsx)(ar,{content:(e=>{switch(e){case O.EXPLORE_UPCOMING_LOCATION:return"Explore the upcoming location";case O.CAMP:return"Camp for the night";case O.AMBUSH:return"Ambush while camping";case O.TRADERS:return"Meet traders on the road";case O.SIDE_QUEST:return"Discover a hidden cache";default:return""}})(g),preservePositioning:!0,children:(0,yt.jsx)("span",{className:"travel-option-detail tags text-pill type-location",children:c})})]}),"            ",void 0!==d&&0!==d&&(b?(0,yt.jsxs)("span",{className:"travel-option-detail score",children:["Score: ",y(d)]}):(0,yt.jsx)(ar,{content:"Impact on campaign score",preservePositioning:!0,children:(0,yt.jsxs)("span",{className:"travel-option-detail score",children:["Score: ",y(d)]})})),void 0!==m&&0!==m&&(b?(0,yt.jsxs)("span",{className:"travel-option-detail score",children:["Exhaustion: ",y(m)]}):(0,yt.jsx)(ar,{content:"Exhaustion affects character performance",preservePositioning:!0,children:(0,yt.jsxs)("span",{className:"travel-option-detail score",children:["Exhaustion: ",y(m)]})}))]})},rr=e=>{var t;let{effectData:a}=e;return(0,yt.jsxs)("div",{className:"effect-display",children:[(0,yt.jsxs)("div",{className:"effect-display-header",children:[(0,yt.jsx)("div",{className:"effect-display-name",children:"party"===a.object?"Party":a.object.name}),"party"!==a.object&&a.object.icon&&(0,yt.jsx)(Et,{imageId:a.object.icon})]}),null===(t=a.effects)||void 0===t?void 0:t.map(((e,t)=>(0,yt.jsx)("div",{className:`effect-display-effect ${e.class}`,children:e.effect},t)))]})},sr=e=>{let{anyFlavorTag:t,disabled:a=!1,highlighted:r=!1,theme:s,onClick:i,className:l="",showTooltip:o=!0,tooltipText:c,off:d}=e;const[u,h]=(0,n.useState)(!1),m=(0,n.useRef)(null),g=($t(),ta()),p=qt().getTagManager(),f="character"in t?t.tag:t;(0,n.useEffect)((()=>{if(u&&m.current){const e=m.current.querySelector(".tooltip");if(e){m.current.getBoundingClientRect();const t=e.getBoundingClientRect();t.right>window.innerWidth&&(e.style.left="auto",e.style.right="0",e.style.transform="translateX(0)"),t.left<0&&(e.style.left="0",e.style.right="auto",e.style.transform="translateX(0)")}}}),[u]);return(0,yt.jsxs)("div",{ref:m,className:(()=>{let e="tag-pill text-pill";if(f){f.source&&(e+=` type-${f.source.toLowerCase()}`),f.theme&&f.theme!==A.NONE&&(e+=` theme-${f.theme.toLowerCase()}`);const t=g.getPlayerAttitudesStyle(f.tag);t&&(e+=` ${t}`)}return a&&(e+=" disabled"),r&&(e+=" highlighted"),s&&(e+=` theme-${s}`),l&&(e+=` ${l}`),d&&(e+=" off"),e})(),onClick:()=>{!a&&i&&f&&i(f)},onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[null===f||void 0===f?void 0:f.tag.name,o&&u&&(0,yt.jsx)("div",{className:"tooltip",children:(0,yt.jsx)("div",{className:"tooltip-content",children:(()=>{var e;let t="";const a=p.getTooltipText({tag:f,type:"tag"});if(a)return a;switch((null===f||void 0===f?void 0:f.source)||""){case x.LOCATION:t="Location element";break;case x.PLOT:t="Plot element";break;case x.PLAYERS:t="Player preference";break;case x.BACKSTORY:t="Character backstory element";break;case x.FORESHADOWING:t="Foreshadowing of future events";break;default:t=null!==(e=null===f||void 0===f?void 0:f.tag.name)&&void 0!==e?e:"Unknown tag"}return f&&f.theme&&f.theme!==A.NONE&&(t+=` (${f.theme})`),t})()})})]})},ir=e=>{let{encounter:t}=e;const[a,r]=(0,n.useState)(j.MEDIUM),[s,i]=(0,n.useState)([]),[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)([]),m=qt(),g=$t(),p=Zt(),f=(m.getPlayerManager(),ta(),m.getPartyManager()),[v,y]=(0,n.useState)(g.getTravelOptions()),[b,E]=(0,n.useState)(null),[S,N]=(0,n.useState)([]),[T,x]=(0,n.useState)(0),[A,C]=(0,n.useState)(0),[M,w]=(0,n.useState)(!1),[R,k]=(0,n.useState)(),[I,L]=(0,n.useState)(null),[P,_]=(0,n.useState)(0);(0,n.useEffect)((()=>{D()}),[]);const D=()=>{const e=["SHORT","GOOD","GREAT","EPIC"],t=Math.floor(Math.random()*e.length),a=e[t];let n=[];if("EPIC"===a)n=["GOOD","GREAT"];else if("SHORT"===a)n=["FUTILE","GOOD"];else{const r=Math.max(0,t-1),s=Math.min(e.length-1,t+1);n=[e[r],e[s]].filter((e=>e!==a))}d(a),h(n)},B=e=>e>=80?{rating:"EPIC",score:100}:e>=60?{rating:"GREAT",score:75}:e>=40?{rating:"GOOD",score:50}:e>=20?{rating:"SHORT",score:25}:{rating:"FUTILE",score:0},F=e=>e>=66?"HIGH":e>=33?"MEDIUM":"LOW",U=e=>e>=66?"ZERO":e>=33?"LOW":"BASIC",H=e=>{var t;C(Math.min(A+e.boredom,100)),x(Math.min(T+e.time,100)),e.repeatable||o((t=>[...t,e.id]));const a=g.selectTravelOption(e,A),n=null===a||void 0===a||null===(t=a.travelResults.find((e=>(null===e||void 0===e?void 0:e.object)&&"party"!==e.object)))||void 0===t?void 0:t.object;L(n&&"party"!==n?n:null);const r=(null===a||void 0===a?void 0:a.travelResults)||[],s=(null===a||void 0===a?void 0:a.travelTags)||[];E(e),k({results:r,title:e.name,description:e.description,tags:s,travelOption:e,info:{boredom:e.boredom,score:e.score,time:e.time,exhaustion:e.exhaustion||0}}),_(e.tags),w(!0)},G=e=>{if(P>0&&_(P-1),(null===b||void 0===b?void 0:b.travelOptionType)===O.CHARACTER_BACKSTORY)p.assignBackstory(I,e.tag);else g.exposeTagForEncounter(e);N([...S,e.tag])},W=(e,t)=>{const a=e.filter((e=>!l.includes(e.id))).sort((()=>.5-Math.random()));return a.slice(0,Math.min(t,a.length))},K=W(v[0],3),z=W(v[1],3),V=W(v[2],3);return(0,yt.jsxs)("div",{className:"game-encounter-travel-container",children:[(0,yt.jsx)("div",{className:"encounter-type-title",children:"Travel"}),(0,yt.jsxs)("div",{className:"game-encounter-travel",children:[(0,yt.jsxs)("div",{className:"travel-meter-container",children:[(0,yt.jsxs)("div",{className:"travel-sections",children:[(0,yt.jsx)("div",{className:"travel-meter-name",children:"BOREDOM RISK"}),(0,yt.jsxs)("div",{className:"travel-section long "+("HIGH"===F(A)?"active":""),children:[(0,yt.jsx)("span",{className:"section-label",children:"HIGH"}),(0,yt.jsx)("span",{className:"section-effect",children:"All players getting bored"})]}),(0,yt.jsxs)("div",{className:"travel-section medium "+("MEDIUM"===F(A)?"active":""),children:[(0,yt.jsx)("span",{className:"section-label",children:"MEDIUM"}),(0,yt.jsx)("span",{className:"section-effect",children:"Several players fidgeting"})]}),(0,yt.jsxs)("div",{className:"travel-section short "+("LOW"===F(A)?"active":""),children:[(0,yt.jsx)("span",{className:"section-label",children:"LOW"}),(0,yt.jsx)("span",{className:"section-effect",children:"Players mostly paying attention"})]})]}),(0,yt.jsxs)("div",{className:"travel-thermometer",children:[(0,yt.jsx)("span",{className:"meter-icon",children:"\ud83d\udc41\ufe0f"}),(0,yt.jsx)("div",{className:"meter-fill",style:{height:`${A}%`},children:(0,yt.jsx)("span",{className:"meter-value",children:A})}),(0,yt.jsx)("div",{className:"meter-markers",children:[0,25,50,75,100].map((e=>(0,yt.jsx)("div",{className:"marker",children:(0,yt.jsx)("span",{className:"marker-value",children:e})},e)))})]}),(0,yt.jsxs)("div",{className:"travel-sections",children:[(0,yt.jsx)("div",{className:"travel-meter-name",children:"TENSION"}),(0,yt.jsxs)("div",{className:"travel-section zero "+("ZERO"===U(A)?"active":""),children:[(0,yt.jsx)("span",{className:"section-label details",children:"Attention Loss"}),(0,yt.jsx)("span",{className:"section-label details",children:"15% Attitude Loss"}),(0,yt.jsx)("span",{className:"section-label details",children:"-10 Tension"})]}),(0,yt.jsxs)("div",{className:"travel-section low "+("LOW"===U(A)?"active":""),children:[(0,yt.jsx)("span",{className:"section-label details",children:"50% Attention Loss"}),(0,yt.jsx)("span",{className:"section-label details",children:"5% Attitude Loss"}),(0,yt.jsx)("span",{className:"section-label details",children:"-10 Tension"})]}),(0,yt.jsxs)("div",{className:"travel-section basic "+("BASIC"===U(A)?"active":""),children:[(0,yt.jsx)("span",{className:"section-label details",children:"20% Chance of Boredom"}),(0,yt.jsx)("span",{className:"section-label details",children:"-5 Tension"})]})]})]}),M?R?(0,yt.jsx)("div",{className:"results-panel",children:(0,yt.jsxs)("div",{className:"results-panel-container",children:[(0,yt.jsxs)("div",{className:"results-panel-header",children:[R.title,(0,yt.jsx)("div",{className:"results-panel-description",children:R.description}),(0,yt.jsx)("button",{className:"close-button",onClick:()=>w(!1),children:"\xd7"})]}),(0,yt.jsxs)("div",{className:"travel-result-info",children:[" ",(0,yt.jsxs)("div",{className:"travel-result-info-item boredom",children:[(0,yt.jsxs)(ar,{content:"Boredom risk is a measure of player patience and quality of the event.",children:["\ud83d\udc41\ufe0f Boredom Risk : +",R.info.boredom]})," "]})," ",(0,yt.jsxs)("div",{className:"travel-result-info-item time",children:[(0,yt.jsxs)(ar,{content:"Journey Length is an indication of time passing in game.",children:["\ud83d\udd52 Journey Length : +",R.info.time]})," "]})]}),(0,yt.jsx)("div",{className:"travel-results",children:R.results.map(((e,t)=>(0,yt.jsx)(rr,{effectData:e},t)))}),R.tags.length>0&&P>0&&(0,yt.jsxs)("div",{className:"travel-tag-container",children:["              ",(0,yt.jsx)("div",{className:"clicks-remaining",children:(0,yt.jsx)(ar,{content:"Click on the tags to reveal them.",maxWidth:"200",preservePositioning:!0,children:P})}),(0,yt.jsx)("div",{className:"travel-tags-instructions",children:R.travelOption.tagInstructions}),(0,yt.jsx)("div",{className:"travel-tags-container",children:(0,yt.jsx)("div",{className:"travel-tags",children:R.tags.map((e=>{const t=S.includes(e.tag);return(0,yt.jsx)(sr,{anyFlavorTag:e,onClick:G,className:"location-tag "+(t?"used":"")})}))})})]}),(0,yt.jsx)("div",{className:"bottom-container",children:(0,yt.jsx)("div",{className:"return-button",onClick:()=>w(!1),children:"Return to Travel Options"})})]})}):null:(0,yt.jsxs)("div",{className:"travel-options-panel",children:[(0,yt.jsxs)("div",{className:"travel-options-container short",children:[(0,yt.jsx)("div",{className:"travel-section-title",children:"Short Tasks"}),(0,yt.jsx)("div",{className:"travel-options",children:K.map((e=>(0,yt.jsx)(nr,{travelOption:e,onClick:()=>H(e),length:j.SHORT},e.id)))})]}),(0,yt.jsxs)("div",{className:"travel-options-container medium",children:[(0,yt.jsx)("div",{className:"travel-section-title",children:"Moderate Events"}),(0,yt.jsx)("div",{className:"travel-options",children:z.map((e=>(0,yt.jsx)(nr,{travelOption:e,onClick:()=>H(e),length:j.MEDIUM},e.id)))})]}),(0,yt.jsxs)("div",{className:"travel-options-container long",children:[(0,yt.jsx)("div",{className:"travel-section-title",children:"Journey Happenings"}),(0,yt.jsx)("div",{className:"travel-options",children:V.map((e=>(0,yt.jsx)(nr,{travelOption:e,onClick:()=>H(e),length:j.LONG},e.id)))})]})]})]}),(0,yt.jsx)("div",{className:"travel-meter-label",children:" \ud83d\udd52 JOURNEY LENGTH"}),(0,yt.jsxs)("div",{className:"bottom-meter-container",children:["          ",(0,yt.jsxs)("div",{className:"travel-meter-container",children:[(0,yt.jsx)(ar,{content:"Journey Length is a measure of time in-game. Rewards are given for longer journeys, and for ending journeys on the indicated sections.",preservePositioning:!1,children:(0,yt.jsx)("div",{className:"travel-sections",children:["FUTILE","SHORT","GOOD","GREAT","EPIC"].map((e=>(0,yt.jsx)("div",{className:`travel-section ${e.toLowerCase()} ${e===B(T).rating?"active":""}`,children:(0,yt.jsxs)("span",{className:"section-label",children:[e,e===c&&(0,yt.jsx)("span",{className:"dm-points reward big-reward",children:"\ud83c\udfb2\ud83c\udfb2"}),u.includes(e)&&(0,yt.jsx)("span",{className:"dm-points reward small-reward",children:"\ud83c\udfb2"})]})},e)))})}),(0,yt.jsxs)("div",{className:"travel-thermometer journey",children:[(0,yt.jsx)("div",{className:"meter-fill",style:{width:`${T}%`},children:(0,yt.jsx)("span",{className:"meter-value",children:T})}),(0,yt.jsx)("div",{className:"meter-markers",children:[0,20,40,60,80,100].map((e=>(0,yt.jsx)("div",{className:"marker",children:(0,yt.jsx)("span",{className:"marker-value",children:e})},e)))})]})]}),(0,yt.jsxs)("div",{className:"accept-journey-button",onClick:()=>{A>66?f.multiplyPartyTension(0):A>33?f.multiplyPartyTension(.5):f.multiplyPartyTension(.75);const e=B(T).rating;let t=0;e===c?(t=2,g.addDmExp(2)):u.includes(e)&&(t=1,g.addDmExp(1)),g.backToOverview()},children:["Accept ",B(T).rating.toUpperCase()," journey",(0,yt.jsxs)("span",{className:"journey-score",children:["+",B(T).score," Campaign Score"]})]})]})]})},lr=e=>{let{size:t,color:a,style:n}=e;return(0,yt.jsx)("div",{style:{position:"absolute",width:t,height:t,...n},children:(0,yt.jsx)("div",{style:{position:"absolute",width:.6*t,height:.6*t,borderRadius:"50%",backgroundColor:a,left:"20%",top:"20%"}})})},or={town:{backgroundColor:"#765f4a",shapes:[{type:"rectangle",minSize:7,maxSize:14,count:{min:10,max:20},color:"#695a4b",rotate:!1}]},forest:{backgroundColor:"#2F4F2F",shapes:[{type:"tree",minSize:80,maxSize:200,count:{min:50,max:100},color:"#1B3B1B"}]},brewery:{backgroundColor:"#765f4a",shapes:[{type:"furniture",minSize:80,maxSize:200,count:{min:50,max:100},color:"#695a4b"}]},building:{backgroundColor:"#765f4a",shapes:[{type:"furniture",minSize:80,maxSize:200,count:{min:50,max:100},color:"#695a4b"}]},mountain:{backgroundColor:"#6B6B6B",shapes:[{type:"rectangle",minSize:7,maxSize:10,count:{min:50,max:100},color:"#787878"}]},cave:{backgroundColor:"#6B6B6B",shapes:[{type:"rectangle",minSize:7,maxSize:10,count:{min:50,max:100},color:"#787878"}]},dungeon:{backgroundColor:"#333",shapes:[{type:"wall",count:{min:1,max:1},minSize:100,maxSize:100,rotate:!1,color:"#2b2b2b"}]}},cr=e=>{const t=[],a=Math.floor(Math.random()*(e.count.max-e.count.min+1))+e.count.min;for(let n=0;n<a;n++){const a=Math.floor(Math.random()*(e.maxSize-e.minSize+1))+e.minSize;let r=100*Math.random()+"%",s=100*Math.random()+"%";"wall"===e.type&&(r="0%",s="0%");const i={left:r,top:s,transform:e.rotate?`rotate(${360*Math.random()}deg)`:""};t.push({id:n,size:a,style:i,type:e.type,color:e.color})}return t},dr=e=>{let{theme:t,regenKey:a}=e;const n=or[t],r=n.shapes.flatMap(cr);return(0,yt.jsx)("div",{className:`encounter-scenery-container ${t}`,style:{backgroundColor:n.backgroundColor},children:(0,yt.jsx)("div",{className:"encounter-scenery-background",children:r.map((e=>{switch(e.type){case"tree":return(0,yt.jsx)(lr,{...e,style:e.style||{}},e.id);case"rectangle":const t=e.size+Math.random()*e.size/2+"%",a=e.size+Math.random()*e.size/2+"%";return(0,yt.jsx)("div",{style:{position:"absolute",width:t,height:a,backgroundColor:e.color,...e.style}},e.id);case"wall":return(0,yt.jsx)("div",{className:"wall-pattern",style:{position:"absolute",width:e.size+"%",height:e.size+"%",opacity:.8,left:"0%",top:"0%",...e.style}},e.id);default:return null}}))})})},ur=e=>{let{encounter:t,showOverview:a}=e;const[r,s]=(0,n.useState)(t.events),[i,l]=(0,n.useState)(!1),o=$t(),c=ta(),d=t.location.themes[0],[u,h]=(0,n.useState)(o.getEncounterState()),[m,g]=(0,n.useState)(c.showImageForEvent()),[p,f]=(0,n.useState)(c.getEventImageOpacity());(0,n.useEffect)((()=>{const e=()=>{const e=o.getEncounterState();void 0!==(null===e||void 0===e?void 0:e.sessionState)&&void 0!==e.eventIndex&&h({...e})};return c.on("updateEncounterState",e),c.on("eventUpdated",(()=>{g(c.showImageForEvent()),f(c.getEventImageOpacity())})),()=>{c.off("updateEncounterState",e)}}),[o,c]);const v=e=>{if(!u)return null;switch(t.events[u.eventIndex].type){case At.COMBAT:return(0,yt.jsx)(Rn,{encounter:t});case At.ROLEPLAY:return(0,yt.jsx)(Ln,{encounter:t});case At.PUZZLE:return(0,yt.jsx)(er,{encounter:t});case At.PERCEPTION:return(0,yt.jsx)(On,{encounter:t});case At.TOWN:return(0,yt.jsx)(Fn,{encounter:t});case At.TRAVEL:return(0,yt.jsx)(ir,{encounter:t});case At.CHALLENGE:return(0,yt.jsx)($n,{encounter:t});case At.TRAP:return(0,yt.jsx)(Un,{encounter:t});case At.STORY:return(0,yt.jsx)(tr,{encounter:t});case At.EXPLORATION:return(0,yt.jsx)(kn,{encounter:t});default:return null}};return(0,yt.jsx)("div",{className:`table-encounter-container ${d}`,children:a?(0,yt.jsx)(hn,{encounter:t}):(0,yt.jsxs)("div",{className:"table-encounter-scene",children:[(0,yt.jsx)("div",{className:"scenery-opacity-container",style:{opacity:m?1-p:1},children:(0,yt.jsx)(dr,{theme:d})}),m&&(0,yt.jsx)("div",{className:"encounter-icon-container",style:{opacity:p},children:(0,yt.jsx)(Et,{imageId:t.location.icon})}),(0,yt.jsx)("div",{className:"table-encounter-title",children:t.name}),(0,yt.jsx)("div",{className:"table-encounter-session",children:(()=>{if(!u)return null;switch(u.sessionState){case T.LOCATION_INTRO:return(0,yt.jsx)(dn,{encounter:t});case T.INTRO_EVENTS:return v();case T.INTRO_MAIN:return(0,yt.jsx)("div",{children:"Intro Main"});case T.MAIN_EVENTS:return v();case T.INTRO_EXIT:return(0,yt.jsx)("div",{children:"Intro Exit"});case T.EXIT_EVENTS:return v();case T.EXIT:return(0,yt.jsx)("div",{children:"Exit"})}})()})]})})},hr=[{name:"Gold",value:1,type:w.TREASURE,cost:1,description:"Increase all players happiness by one"},{name:"Gear",value:1,type:w.TOOLS,cost:1,description:"Replenish all tools for all players"},{name:"Healing",value:1,type:w.HEALING,cost:1,description:"Remove wounded state from all characters"},{name:"Plot Hook",value:1,type:w.PLOT_HOOK,cost:1,description:"Reveal information about the plot. Restore full attention"},{name:"Replenish Magic",value:2,type:w.MAGIC,cost:2,description:"Replenish all Magic for all characters"},{name:"Raise Dead",value:2,type:w.HEALING,cost:2,description:"Raise a dead character"},{name:"Treasure Chest",value:2,type:w.TREASURE,cost:3,description:"Increase all player happiness by two"},{name:"Level Up",value:1,type:w.XP,cost:3,description:"Level up the lowest level Character"}],mr=e=>{let{rewardsAcceptedCallback:t}=e;const a=ta(),r=ea(),s=$t(),[i,l]=n.useState(!1),[o,c]=n.useState(0),[u,h]=(0,n.useState)([]),m=u.reduce(((e,t)=>e+t.cost),0),[g,p]=(0,n.useState)([]),[f,v]=(0,n.useState)(r.generateHeroes([])),[y,b]=(0,n.useState)(!1),E=()=>m<o?"low":m===o?"match":"high";(0,n.useEffect)((()=>{if(i){const e=[...hr],t=s.getExpectedGear();h([]),t.length>0&&e.push({name:"Magic Item",value:1,type:w.ITEM,cost:2,description:t[0].name,tag:t[0]}),p(e)}}),[s,i]),(0,n.useEffect)((()=>{const e=(e,t)=>{e>0?(l(!0),c(e),b(t)):l(!1)};return a.on("showRewardModal",e),()=>{a.off("showRewardModal",e)}}),[a]);const S=()=>{t(u,m-o,y),l(!1)};return i?(0,yt.jsx)("div",{className:"reward-modal-container",children:(0,yt.jsxs)("div",{className:"reward-modal-body",children:[(0,yt.jsxs)("div",{className:"reward-modal-title",children:[(0,yt.jsx)("div",{className:"reward-modal-title-text",children:"Reward your players"}),(0,yt.jsxs)("div",{className:"reward-modal-instructions",children:["Based on the diffifculty of the event, they expect the equivalent of ",o," rewards."]})]}),(0,yt.jsxs)("div",{className:"reward-panels",children:[(0,yt.jsxs)("div",{className:"panel too-low "+("low"===E()?"active":""),children:[(0,yt.jsx)("div",{className:"panel-title",children:"Too Low"}),"low"===E()&&(0,yt.jsxs)("div",{className:"panel-contents",children:[(0,yt.jsx)("div",{className:"panel-value",children:m}),(0,yt.jsx)("div",{className:"panel-low-text",children:((e,t)=>e-t===1?"All players \ud83d\ude1e":"All players \ud83d\ude1e\ud83d\ude1e")(o,m)}),(0,yt.jsx)("button",{className:"accept-button",onClick:()=>S(),children:"ACCEPT"})]})]}),(0,yt.jsxs)("div",{className:"panel match "+("match"===E()?"active":""),children:[(0,yt.jsx)("div",{className:"panel-title",children:"Expected"}),(0,yt.jsx)("div",{className:"panel-value expected",children:o}),"match"===E()&&(0,yt.jsx)("button",{className:"accept-button",onClick:()=>S(),children:"ACCEPT"})]}),(0,yt.jsxs)("div",{className:"panel too-high "+("high"===E()?"active":""),children:[(0,yt.jsx)("div",{className:"panel-title",children:"Too High"}),"high"===E()&&(0,yt.jsxs)("div",{className:"panel-contents",children:[(0,yt.jsx)("div",{className:"panel-value",children:m}),(0,yt.jsx)("div",{className:"panel-high-text",children:((e,t)=>t-e===1?"-50% Intensity":"-100% Intensity")(o,m)}),(0,yt.jsx)("button",{className:"accept-button",onClick:()=>S(),children:"ACCEPT"})]})]})]}),(0,yt.jsx)("div",{className:"reward-items-list",children:g.map((e=>(0,yt.jsxs)("div",{className:"reward-item "+(u.includes(e)?"selected":""),onClick:()=>(e=>{if(u.includes(e))h(u.filter((t=>t!==e)));else{if(m+e.cost>o+2)return;h([...u,e])}})(e),children:[(0,yt.jsxs)("div",{className:"item-header",children:[(0,yt.jsx)("span",{className:"item-name",children:e.name}),(0,yt.jsx)("span",{className:"item-cost",children:e.cost})]}),(0,yt.jsx)("div",{className:"item-description",children:e.description})]},e.name)))}),(0,yt.jsx)("div",{className:"reward-modal-heroes",children:f&&f.map(((e,t)=>(0,yt.jsx)("div",{className:"reward-modal-hero-row",children:(0,yt.jsxs)("div",{className:"reward-modal-hero-container",children:[(0,yt.jsxs)("div",{className:"reward-modal-hero",children:[(0,yt.jsx)("div",{className:"reward-modal-hero-name",children:e.name}),(0,yt.jsx)("div",{className:"combat-character-icon",children:(0,yt.jsx)(Et,{imageId:e.icon})}),e.character&&"injured"===e.character.injury&&(0,yt.jsx)("div",{className:"reward-modal-hero-injury"}),e.character&&"dead"===e.character.injury&&(0,yt.jsx)("div",{className:"reward-modal-hero-injury dead"})]}),(0,yt.jsx)("div",{className:"reward-modal-hero-attributes",children:(0,yt.jsx)(ua,{hero:e,category:d.ALL,showAttributeLoss:!0})})]})},e.name)))})]})}):null},gr=()=>{const e=$t(),t=e.getCurrentEncounter(),a=qt();return t?(0,yt.jsx)("div",{className:"game-table-container",children:(0,yt.jsxs)("div",{className:"game-table-slab",children:[(0,yt.jsx)(ur,{encounter:t,showOverview:a.state===aa.SESSION_OVERVIEW}),(0,yt.jsx)(mr,{rewardsAcceptedCallback:e.rewardsAccepted})]})}):null},pr=(e,t,a,n,r)=>{const s=fr(e,t,a,r),i=fr(e,t,a,n),l=r-n<=180?"0":"1";return["M",s.x,s.y,"A",a,a,0,l,0,i.x,i.y].join(" ")},fr=(e,t,a,n)=>{const r=(n-90)*Math.PI/180;return{x:e+a*Math.cos(r),y:t+a*Math.sin(r)}},vr=e=>{let{value:t,max:a,segments:n=10,colors:r=["#FFA500","#FFD700","#FFD700","#ADFF2F","#ADFF2F","#ADFF2F","#32CD32","#eF4500","#eF4500","#FF0000"]}=e;const s=100,i=180;let l=t/a*i;const o={transform:`rotate(${l-180}deg)`,transformOrigin:"100px 100px"};return(0,yt.jsx)("div",{className:"needle-gauge",children:(0,yt.jsxs)("svg",{viewBox:"20 50 1 160",preserveAspectRatio:"xMidYMid meet",children:[(()=>{const e=[],t=i/r.length;for(let a=0;a<r.length;a++){const n=a*t-90,i=pr(s,s,90,n,n+t);e.push((0,yt.jsx)("path",{d:i,fill:"none",stroke:r[a],strokeWidth:20},a))}return e})(),(()=>{l=t/a*i;const e=[];for(let t=0;t<=n;t++){const a=(t/n*i+180)*(Math.PI/180),r=s*Math.cos(a)+s,l=s*Math.sin(a)+s,o=80*Math.cos(a)+s,c=80*Math.sin(a)+s;e.push((0,yt.jsx)("line",{x1:r,y1:l,x2:o,y2:c,stroke:[1,3,6,7,9].includes(t)?"black":"#00000000",strokeWidth:"2"},t))}return e})(),(0,yt.jsx)("line",{x1:s,y1:s,x2:200,y2:s,stroke:"#000000bb",strokeWidth:"5",style:o}),(0,yt.jsx)("circle",{cx:s,cy:s,r:"5",fill:"white"})]})})},yr=e=>{let{stress:t}=e;const a=ea(),n=a.getStressColors(),r=n.length,s=Math.floor((t-1)/100*r),i=n[Math.min(s,r-1)];return(0,yt.jsxs)("div",{className:"stress-info",style:{backgroundColor:i,transition:"background-color 0.3s ease"},children:[(0,yt.jsx)("div",{className:"stress-value",children:t}),(0,yt.jsx)("div",{className:"stress-description",children:(l=t,a.getTensionDescription(l))})]});var l},br=["#FFCCCC","#FFDDCC","#FFFFCC","#DDFFCC","#CCFFCC","#aaFFaa"],Er=["#AA0000","#663300","#666600","#336600","#006600","#008800"],Sr=e=>{let{player:t}=e;Zt();const[a,r]=(0,n.useState)(!1),[s,i]=(0,n.useState)(null),[l,o]=(0,n.useState)(t.characters),c=ta(),[u,h]=(0,n.useState)(t.playerStats.enjoyment),[p,f]=(0,n.useState)(t.playerStats.involvement),[v,y]=(0,n.useState)(t.playerStats.stress),b=function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e<30?"#4CAF50":e<60?"#ffff00":"#ff4d4d":e<.3?"#ff4d4d":e<.6?"#ffa500":"#4CAF50"};(0,n.useEffect)((()=>{c.on("playerUpdate",(()=>{h(t.playerStats.enjoyment),f(t.playerStats.involvement),y(t.playerStats.stress),o(t.characters),console.log("player updated "+t.name),console.log(t.playerStats)}))}),[c]);const E=t.preferences.filter((e=>e[1]>0)),S=t.preferences.filter((e=>e[1]<0)),N=t.traits;return(0,yt.jsxs)("div",{className:"player-display",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:()=>c.showBasicNotebook(g,t),children:[(0,yt.jsxs)("div",{className:"character-level-icon-column",children:[(0,yt.jsx)("div",{className:"player-diamond-holder",children:(0,yt.jsx)("div",{className:"player-diamond",style:{backgroundColor:br[t.playerStats.enjoyment],borderColor:Er[t.playerStats.enjoyment]}})}),(0,yt.jsx)("div",{className:"player-icon-container",children:(0,yt.jsx)(Et,{imageId:t.icon})}),(0,yt.jsx)("div",{className:"character-level",children:(0,yt.jsx)(ma,{filledSegments:t.playerStats.experience,totalSegments:Mt[t.playerStats.level],theme:"player-level",label:`LEVEL ${t.playerStats.level}`})})]}),(0,yt.jsx)("div",{className:"character-icons",children:l.map(((e,t)=>(0,yt.jsxs)("div",{className:"character-icon-container",children:[s===t&&(0,yt.jsxs)("div",{className:"character-tooltip",children:[(0,yt.jsx)("div",{className:"tooltip-header",children:e.name}),(0,yt.jsx)("div",{className:"tooltip-content",children:(0,yt.jsx)(ua,{hero:e,category:d.ALL,showAttributeLoss:!0,overviewDisplay:!0})})]}),(0,yt.jsx)("div",{className:"character-icon",onMouseEnter:()=>i(t),onMouseLeave:()=>i(null),onClick:t=>{t.stopPropagation(),c.showBasicNotebook(m,e)},children:(0,yt.jsx)(Et,{imageId:e.icon})})]},e.id)))}),(0,yt.jsxs)("div",{className:"player-stats",children:[(0,yt.jsx)("div",{className:"player-stat-label name",children:t.name}),(0,yt.jsx)("div",{className:"player-stat-label",style:{color:b(u/t.playerStats.maxEnjoyment)},children:"attitude"}),(0,yt.jsx)("div",{className:"stat-bar",children:(0,yt.jsx)("div",{className:"fill happiness",style:{width:u/5*100+"%",backgroundColor:b(u/t.playerStats.maxEnjoyment)}})}),(0,yt.jsx)("div",{className:"player-stat-label",style:{color:b(p/t.playerStats.maxInvolvement)},children:"attention"}),(0,yt.jsx)("div",{className:"stat-bar",children:(0,yt.jsx)("div",{className:"fill attention",style:{width:p/5*100+"%",backgroundColor:b(p/t.playerStats.maxInvolvement)}})}),(0,yt.jsx)("div",{className:"player-stat-label",style:{color:b(Math.max(0,v-t.playerStats.stressBuffer),!0)},children:"stress"}),(0,yt.jsx)("div",{children:(0,yt.jsxs)("div",{className:"stat-item stress",children:[(0,yt.jsxs)("div",{className:"stress-value",style:{color:b(Math.max(0,v-t.playerStats.stressBuffer),!0)},children:[Math.max(0,t.playerStats.stress-t.playerStats.stressBuffer),"%"]}),(0,yt.jsx)("div",{className:"stress-buffer",children:t.playerStats.stress<t.playerStats.stressBuffer&&(0,yt.jsxs)("div",{className:"stress-buffer-value",children:["[",Math.max(0,t.playerStats.stressBuffer-t.playerStats.stress),"]"]})})]})})]}),a&&null===s&&(0,yt.jsxs)("div",{className:"player-tooltip",children:[(0,yt.jsx)("div",{className:"tooltip-header",children:t.name}),(0,yt.jsxs)("div",{className:"tooltip-content",children:["Likes:",(0,yt.jsx)("div",{className:"preference-list",children:E.map(((e,t)=>(0,yt.jsx)("div",{className:"text-pill preference-item like",children:e[0].name},t)))})]}),(0,yt.jsxs)("div",{className:"tooltip-content",children:["Hates:",(0,yt.jsx)("div",{className:"preference-list",children:S.map(((e,t)=>(0,yt.jsx)("div",{className:"text-pill preference-item hate",children:e[0].name},t)))})]}),N.length>0&&(0,yt.jsxs)("div",{className:"tooltip-content",children:["Player Traits:",(0,yt.jsx)("div",{className:"preference-list",children:N.map(((e,t)=>(0,yt.jsxs)("div",{className:"preference-item trait ",children:[e.name,":",(0,yt.jsx)("div",{children:e.description})]},t)))})]})]})]})},Nr=e=>{let{treasureLevel:t,treasurePoints:a}=e;const n=qt().getPartyManager();for(;n.getTreasureThreshold(t+1)<=a;)t++;const r=n.getTreasureThreshold(t+1),s=(n.getTreasureThreshold(t),n.getTreasureReward(t));return(0,yt.jsxs)("div",{className:"treasure-display-container",children:[(0,yt.jsx)("div",{className:"treasure-header",children:(0,yt.jsx)("span",{className:"treasure-title",children:"TREASURE"})}),(0,yt.jsx)("div",{className:"treasure-reward",children:(0,yt.jsxs)("span",{className:"reward-value",children:["+",s.value," ","score"===s.type?"Score":"Attitude"]})}),(0,yt.jsxs)("div",{className:"treasure-progress",children:[(0,yt.jsxs)("span",{className:"progress-text",children:[a,"/",r]}),(0,yt.jsx)(ma,{totalSegments:r,filledSegments:a,theme:"treasure"})]})]})},Tr=e=>{let{overviewMode:t=!1}=e;const a=qt(),r=Jt().getPlayers(),s=$t(),i=ta(),l=a.getPartyManager(),[o,c]=(0,n.useState)(l.getPartyExhaustion()),[d,u]=(0,n.useState)(l.getPartyTension()),[h,m]=(0,n.useState)(l.getPartyScore()),[g,p]=(0,n.useState)(l.getTreasureLevel()),[f,v]=(0,n.useState)(l.getTreasurePoints());(0,n.useEffect)((()=>{const e=()=>{c(l.getPartyExhaustion())};return l.on("dmScreenUpdated",e),()=>{l.off("dmScreenUpdated",e)}}),[s]),(0,n.useEffect)((()=>{const e=()=>{u(l.getPartyTension()),m(l.getPartyScore()),p(l.getTreasureLevel()),v(l.getTreasurePoints())};return i.on("playerUpdate",e),()=>{i.off("playerUpdate",e)}}),[i]);a.state,aa.SESSION_OVERVIEW;return(0,yt.jsxs)("div",{className:"gameroom-container",children:[(0,yt.jsx)("div",{className:"gameroom-top-container",children:(0,yt.jsx)("div",{className:"player-display-container",children:(0,yt.jsxs)("div",{className:"player-row",children:[(0,yt.jsx)("div",{className:"gameroom-player-row",children:r.map((e=>(0,yt.jsx)(Sr,{player:e},e.id)))}),(0,yt.jsx)(Nr,{treasureLevel:g,treasurePoints:f}),(0,yt.jsx)("div",{className:"player-tension-holder",children:(0,yt.jsxs)("div",{className:"stress-needle",children:[(0,yt.jsx)(yr,{stress:d}),(0,yt.jsx)(vr,{value:d/10,max:10}),(0,yt.jsxs)("div",{className:"stress-label-containers",children:[(0,yt.jsxs)("div",{className:"stress-labels",children:[(0,yt.jsx)("div",{className:"stress-label",children:"TENSION"}),(0,yt.jsx)("div",{className:"stress-label",children:d})]}),(0,yt.jsxs)("div",{className:"stress-labels right",children:[(0,yt.jsx)("div",{className:"stress-label",children:"SCORE"}),(0,yt.jsx)("div",{className:"stress-label",children:l.getTensionDescription2(d)})]})]})]})}),(0,yt.jsxs)("div",{className:"score-info",children:[(0,yt.jsx)("div",{className:"score-label",children:"PARTY SCORE"}),(0,yt.jsx)("div",{className:"score-value",children:h})]}),(0,yt.jsx)("div",{className:"player-row-exhaustion",children:(0,yt.jsxs)("div",{className:"party-exhaustion",children:[(0,yt.jsx)("div",{className:"party-exhaustion-label",children:"EXHAUSTION"}),(0,yt.jsx)("div",{className:"party-exhaustion-label number",children:o}),(0,yt.jsx)(ma,{totalSegments:20,filledSegments:o/5,theme:"exhaustion",label:""})]})})]})})}),!t&&(0,yt.jsx)("div",{className:"gameroom-table-row-container",children:(0,yt.jsx)("div",{className:"gameroom-table-row",children:(0,yt.jsx)(gr,{})})})]})},xr=()=>{$t();return(0,yt.jsxs)("div",{className:"session-control-container",children:[(0,yt.jsx)(Tr,{overviewMode:!0}),(0,yt.jsx)("div",{className:"encounter-overview",children:(0,yt.jsx)(cn,{})})]})},Ar=e=>{let{appManager:t}=e;return(0,yt.jsx)("div",{className:"session-run-container",children:(0,yt.jsx)(Tr,{})})},Cr=e=>{let{appManager:t}=e;return(0,yt.jsx)("div",{className:"final-stats-container",children:"FINAL STATS"})},Mr=["\ud83d\udee1\ufe0f","\ud83d\udc8d","J","Q","K","A","\u2728"],wr=[5,10,25,50],Rr={"\ud83d\udee1\ufe0f":{3:5,4:10,5:20},"\ud83d\udc8d":{3:8,4:15,5:30},J:{3:10,4:20,5:40},Q:{3:15,4:30,5:60},K:{3:20,4:40,5:80},A:{3:25,4:50,5:100},"\u2728":{3:50,4:100,5:200}},kr=[[{row:0,col:0},{row:0,col:1},{row:0,col:2},{row:0,col:3},{row:0,col:4}],[{row:1,col:0},{row:1,col:1},{row:1,col:2},{row:1,col:3},{row:1,col:4}],[{row:2,col:0},{row:2,col:1},{row:2,col:2},{row:2,col:3},{row:2,col:4}],[{row:3,col:0},{row:3,col:1},{row:3,col:2},{row:3,col:3},{row:3,col:4}],[{row:0,col:0},{row:1,col:1},{row:2,col:2},{row:3,col:3},{row:3,col:4}],[{row:3,col:0},{row:2,col:1},{row:1,col:2},{row:0,col:3},{row:0,col:4}],[{row:0,col:0},{row:0,col:1},{row:1,col:2},{row:2,col:3},{row:2,col:4}],[{row:3,col:0},{row:3,col:1},{row:2,col:2},{row:1,col:3},{row:1,col:4}],[{row:1,col:0},{row:0,col:1},{row:0,col:2},{row:0,col:3},{row:1,col:4}],[{row:2,col:0},{row:3,col:1},{row:3,col:2},{row:3,col:3},{row:2,col:4}],[{row:0,col:0},{row:1,col:1},{row:1,col:2},{row:1,col:3},{row:0,col:4}],[{row:3,col:0},{row:2,col:1},{row:2,col:2},{row:2,col:3},{row:3,col:4}],[{row:1,col:0},{row:2,col:1},{row:2,col:2},{row:2,col:3},{row:1,col:4}],[{row:2,col:0},{row:1,col:1},{row:1,col:2},{row:1,col:3},{row:2,col:4}],[{row:0,col:0},{row:0,col:1},{row:1,col:2},{row:0,col:3},{row:0,col:4}],[{row:3,col:0},{row:3,col:1},{row:2,col:2},{row:3,col:3},{row:3,col:4}],[{row:1,col:0},{row:1,col:1},{row:0,col:2},{row:1,col:3},{row:1,col:4}],[{row:2,col:0},{row:2,col:1},{row:3,col:2},{row:2,col:3},{row:2,col:4}],[{row:0,col:0},{row:1,col:1},{row:0,col:2},{row:1,col:3},{row:0,col:4}],[{row:3,col:0},{row:2,col:1},{row:3,col:2},{row:2,col:3},{row:3,col:4}]],jr="dungeon_planner_slot_machine_credits",Or="dungeon_planner_slot_machine_wilds",Ir=(e,t)=>{try{const a=JSON.stringify(t);localStorage.setItem(e,a)}catch(a){console.error("Error saving to localStorage:",a)}},Lr=(e,t)=>t,Pr={SPIN:"https://assets.mixkit.co/active_storage/sfx/2016/2016-preview.mp3",WIN_SMALL:"https://assets.mixkit.co/active_storage/sfx/270/270-preview.mp3",WIN_MEDIUM:"https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3",WIN_BIG:"https://assets.mixkit.co/active_storage/sfx/2017/2017-preview.mp3",REEL_STOP:"https://assets.mixkit.co/active_storage/sfx/178/178-preview.mp3",BUTTON_CLICK:"https://assets.mixkit.co/active_storage/sfx/1705/1705-preview.mp3",WILD_COLLECT:"https://assets.mixkit.co/active_storage/sfx/150/150-preview.mp3",WILD_STORM_TRIGGER:"https://assets.mixkit.co/sfx/preview/mixkit-cinematic-whoosh-explosion-1022.mp3",WILD_APPLIED:"https://assets.mixkit.co/sfx/preview/mixkit-fast-magic-game-spell-883.mp3"},_r={},Dr=e=>{let{onClose:t}=e;const[a,r]=(0,n.useState)((()=>Lr(0,100))),[s,i]=(0,n.useState)((()=>Lr(0,5))),[l,o]=(0,n.useState)(wr[0]),[c,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)([]),[m,g]=(0,n.useState)([]),[p,f]=(0,n.useState)(!1),[v,y]=(0,n.useState)(0),[b,E]=(0,n.useState)(""),[S,N]=(0,n.useState)(!1),[T,x]=(0,n.useState)(!1),[A,C]=(0,n.useState)(!1),[M,w]=(0,n.useState)(5),[R,k]=(0,n.useState)([]),[j,O]=(0,n.useState)(-1),[I,L]=(0,n.useState)(null),[P,_]=(0,n.useState)([]);(0,n.useEffect)((()=>{Ir(jr,a)}),[a]),(0,n.useEffect)((()=>{Ir(Or,s)}),[s]),(0,n.useEffect)((()=>()=>{null!==I&&clearInterval(I)}),[I]);const D=(0,n.useCallback)((e=>{null!==I&&clearInterval(I),_(e),O(0);const t=window.setInterval((()=>{O((t=>(t+1)%e.length))}),1e3);L(t)}),[I]),B=(0,n.useCallback)((e=>{switch(e){case"\ud83d\udee1\ufe0f":return"Shield";case"\ud83d\udc8d":return"Ring";case"\u2728":return"Wild";case"J":return"Jack";case"Q":return"Queen";case"K":return"King";case"A":return"Ace";default:return e}}),[]),F=(0,n.useCallback)((()=>{const e=[];for(let t=0;t<4;t++){e[t]=[];for(let a=0;a<5;a++)if(4===a){const n=Math.random();if(n<.2)e[t][a]="\u2728";else if(n<.5){const n=["K","A","\ud83d\udee1\ufe0f","\ud83d\udc8d"];e[t][a]=n[Math.floor(Math.random()*n.length)]}else{const n=Mr.filter((e=>"\u2728"!==e));e[t][a]=n[Math.floor(Math.random()*n.length)]}}else if(100*Math.random()<8)e[t][a]="\u2728";else{const n=Mr.filter((e=>"\u2728"!==e));e[t][a]=n[Math.floor(Math.random()*n.length)]}}return e}),[]),U=(0,n.useCallback)(((e,t)=>{const a=`wild-${e}-${t}-${Date.now()}`;k((n=>[...n,{id:a,row:e,col:t}])),setTimeout((()=>{k((e=>e.filter((e=>e.id!==a))))}),1e3)}),[]),H=(0,n.useCallback)((e=>{const t=l/(wr[0]||1);let a=0,n=[],s=0,o=[],c=[];kr.forEach(((r,s)=>{let i="",l="",d=0,u=[],h=[];for(let t=0;t<r.length;t++){const a=r[t];if(!e[a.row]||!e[a.row][a.col]){console.error(`Invalid position in payline ${s+1}: row ${a.row}, col ${a.col}. Grid:`,e);continue}const n=e[a.row][a.col];if(0===t)i=n,"\u2728"!==n&&(l=n),d=1,u.push(a),h.push(n);else{if(n!==i&&"\u2728"!==n&&"\u2728"!==i)break;d++,u.push(a),h.push(n),"\u2728"===i&&"\u2728"!==n?(i=n,l=n):"\u2728"!==n&&""===l&&(l=n)}}if(d>=3){const e=l||i;let r=0;const m=Rr[e];if(m&&(r=m[d]||0),r>0){const i=Math.floor(r*t);a+=i,o.push(...u.slice(0,d)),c.push(u.slice(0,d));const l=h.slice(0,d).map(B);n.push(`Payline ${s+1}: ${d} ${B(e)}! [${l.join(", ")}] +${i}`)}}}));for(let r=0;r<e.length;r++)for(let t=0;t<e[r].length;t++)"\u2728"===e[r][t]&&(s++,A||U(r,t));s>0&&!A&&(i((e=>e+s)),n.push(`Collected ${s} wild symbol${s>1?"s":""}!`)),h(o),d(o.length>0),c.length>0&&D(c),a>0?(y(a),r((e=>e+a)),E(n.join("\n")),a>=50&&!T&&(x(!0),setTimeout((()=>x(!1)),3e3))):s>0&&!A?E(n.join("\n")||"Collected wilds!"):A||E("Try again!")}),[l,B,i,r,y,E,h,d,T,A,U,D]),G=(0,n.useCallback)((async()=>{if(S||a<l)return;null!==I&&(clearInterval(I),L(null)),N(!0),y(0),E(""),r((e=>e-l)),h([]),d(!1),O(-1),_([]);const e=Math.floor(8);for(let a=0;a<e;a++)g(F()),await new Promise((e=>setTimeout(e,75)));let t=F();g([...t]),await new Promise((e=>setTimeout(e,200)));let n=!1;const o=Math.random();if(s>0&&o<M/100){C(!0),n=!0,E("WILD STORM!");let e=s,a=t.map((e=>[...e]));for(let t=0;t<e;t++){const e=[];for(let n=0;n<a.length;n++)for(let t=0;t<a[n].length;t++)"\u2728"!==a[n][t]&&e.push({row:n,col:t});if(0===e.length)break;const t=e[Math.floor(Math.random()*e.length)];a[t.row][t.col]="\u2728",i((e=>Math.max(0,e-1))),g([...a]),await new Promise((e=>setTimeout(e,300)))}i(0),t=[...a],C(!1),E("Wild Storm Complete! Checking wins..."),await new Promise((e=>setTimeout(e,1e3)))}H(t),n&&i(5),N(!1)}),[S,a,l,s,F,H,M,I]);return(0,n.useEffect)((()=>{Object.values(Pr).forEach((e=>{if(!_r[e]){const t=new Audio(e);t.load(),_r[e]=t}}))}),[]),(0,n.useEffect)((()=>{g(F())}),[F]),(0,yt.jsxs)("div",{className:"slot-machine-container",children:[(0,yt.jsxs)("div",{className:"slot-machine-header",children:[(0,yt.jsx)("h2",{children:"Regal Richez"}),(0,yt.jsxs)("div",{className:"credits-display",children:["Credits: $",a]})]}),(0,yt.jsx)("div",{className:"slot-machine-display-row",children:(0,yt.jsxs)("div",{className:"slot-machine-content",children:[(0,yt.jsx)("div",{className:"slot-machine-body",children:(0,yt.jsxs)("div",{className:"slot-machine-main-area",children:[(0,yt.jsxs)("div",{className:"debug-config-panel",children:[(0,yt.jsx)("h4",{children:"Debug Config"}),(0,yt.jsxs)("div",{className:"config-item",children:[(0,yt.jsx)("label",{htmlFor:"wildStormChance",children:"Wild Storm Chance (%):"}),(0,yt.jsx)("input",{type:"number",id:"wildStormChance",value:M,onChange:e=>w(Math.max(0,Math.min(100,parseInt(e.target.value,10)))),min:"0",max:"100",style:{appearance:"none",MozAppearance:"textfield",WebkitAppearance:"none"}})]})]}),(0,yt.jsxs)("div",{className:`slot-display ${T?"big-win-active":""} ${A?"wild-storm-active":""}`,children:[(0,yt.jsxs)("div",{className:"wilds-container",children:[(0,yt.jsx)("div",{className:"wilds-label",children:"WILDS"}),(0,yt.jsx)("div",{className:"wilds-counter",children:s})]}),(0,yt.jsx)("div",{className:"wild-collection-container",children:R.map((e=>(0,yt.jsx)("div",{className:"wild-animation collecting-wild",style:{left:20*e.col+10+"%",top:20*e.row+10+"%"},children:"\u2728"},e.id)))}),(0,yt.jsxs)("div",{className:"debug-grid",children:[(0,yt.jsxs)("div",{className:"col-labels",children:[(0,yt.jsx)("div",{className:"corner-placeholder"}),[1,2,3,4,5].map((e=>(0,yt.jsxs)("div",{className:"col-label",children:["Col ",e]},`col-label-${e}`)))]}),m.map(((e,t)=>(0,yt.jsxs)("div",{className:"debug-row",children:[(0,yt.jsxs)("div",{className:"row-label",children:["Row ",t+1,":"]}),e.map(((e,a)=>{var n;const r=u.some((e=>e.row===t&&e.col===a)),s=(null===(n=P[j])||void 0===n?void 0:n.some((e=>e.row===t&&e.col===a)))||!1;let i=B(e),l="";return["J","Q","K","A"].includes(e)?l=["J","A"].includes(e)?"card-red":"card-black":"\u2728"===e&&(l="wild-symbol"),(0,yt.jsx)("div",{className:`debug-cell ${l} ${r?"winning":""} ${s?"highlight-active":""}`,title:`Row ${t+1}, Col ${a+1}: ${i}`,children:e},`cell-${t}-${a}`)}))]},`row-${t}`)))]})]}),p&&(0,yt.jsxs)("div",{className:"debug-panel",children:[(0,yt.jsx)("h4",{children:"Win Details"}),b&&(0,yt.jsx)("div",{className:"debug-message",children:b.split("\n").map(((e,t)=>(0,yt.jsx)("p",{children:e},`msg-${t}`)))})]})]})}),(0,yt.jsxs)("div",{className:"slot-machine-controls",children:[(0,yt.jsxs)("div",{className:"bet-controls",children:[(0,yt.jsx)("label",{htmlFor:"bet-select",children:"Bet:"}),(0,yt.jsx)("select",{id:"bet-select",value:l,onChange:e=>o(Number(e.target.value)),disabled:S,children:wr.map((e=>(0,yt.jsxs)("option",{value:e,children:["$",e]},e)))})]}),(0,yt.jsx)("button",{className:"spin-button",onClick:G,disabled:S||a<l,children:S?"Spinning...":"Spin"}),(0,yt.jsx)("button",{className:"spin-button details",onClick:()=>f(!p),children:p?"Hide Details":"Show Details"})]})]})})]})},Br=e=>{let{isOpen:t,onClose:a}=e;return t?(0,yt.jsx)("div",{className:"slot-machine-modal",onClick:e=>{},children:(0,yt.jsxs)("div",{className:"slot-machine-modal-content",children:[(0,yt.jsxs)("div",{className:"casino-sign",children:[(0,yt.jsx)("h1",{children:"CHOMPY LOUNGE"}),(0,yt.jsx)("div",{className:"sign-subtitle",children:"PREMIUM GAMING"})]}),(0,yt.jsx)(Dr,{onClose:a})]})}):null},Fr=e=>{let{appManager:t}=e;const[a,r]=(0,n.useState)(!1),s=()=>{r(!0)};return n.useEffect((()=>{s()}),[]),(0,yt.jsxs)("div",{className:"main-menu-container",children:[(0,yt.jsxs)("div",{className:"main-menu-content",children:[(0,yt.jsx)("div",{className:"main-menu-options",children:(0,yt.jsx)(wa,{buttonList:[E,S,b],highlight:E})}),(0,yt.jsxs)("div",{className:"game-start-container",children:[(0,yt.jsx)("div",{className:"button-container",children:(0,yt.jsx)("div",{className:"quickstart-button nav-button",onClick:()=>{t.initiateQuickStartSetup(),t.state=aa.SESSION_OVERVIEW},children:"Quick Start"})}),(0,yt.jsx)("div",{className:"button-container",children:(0,yt.jsx)("div",{className:"minigame-button nav-button",onClick:s,children:"Regal Richez"})})]})]}),(0,yt.jsx)(Br,{isOpen:a,onClose:()=>{r(!1)}})]})},Ur=e=>{let{chatMessage:t,newMessage:a}=e;const n=ta(),r=t.message,s=n.getMessageIconId(t.speaker);let i=n.getMessageSpeakerName(t.speaker);return(0,yt.jsxs)("div",{className:"chat-message-display",children:[(0,yt.jsxs)("div",{className:"chat-message-speaker-container",children:[(0,yt.jsx)("div",{className:"chat-message-speaker under-icon",children:i}),(0,yt.jsx)("div",{className:"chat-message-icon",children:(0,yt.jsx)(Et,{imageId:s})})]}),(0,yt.jsxs)("div",{className:"chat-messager-content",children:[(0,yt.jsx)("div",{className:"chat-message-speaker  over-message",children:i}),(0,yt.jsx)("div",{className:`chat-message-text ${t.speaker.type}`,children:(0,yt.jsx)("div",{className:"chat-message-words",children:r})})]})]})},Hr=e=>{let{}=e;const t=(0,n.useRef)(null),[a,r]=(0,n.useState)([]),[s,i]=(0,n.useState)(!1),[l,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(!1),u=qt().getChatManager();(0,n.useEffect)((()=>{s&&t.current&&(t.current.scrollTop=t.current.scrollHeight)}),[l,s]),(0,n.useEffect)((()=>{const e=e=>{r((t=>[...t,e])),o(e)};return u.on("chat-message",e),()=>{u.off("chat-message",e)}}),[u]);const h=()=>{i(!s)},m=()=>{d(!c),s&&i(!1)};return(0,yt.jsxs)("div",{className:"chat-exterior "+(s?"expanded":""),children:[(0,yt.jsxs)("div",{className:"chat-container",children:[(0,yt.jsx)("div",{className:"new-message-container",children:c?(0,yt.jsx)("div",{className:"chat-muted-message",children:"MUTED"}):!c&&l?(0,yt.jsx)("div",{className:"chat-new-message",children:(0,yt.jsx)(Ur,{chatMessage:l,newMessage:!!l})}):null}),(0,yt.jsxs)("div",{className:"chat-controls",children:[(0,yt.jsx)("div",{className:"chat-toggle open "+(s?"expanded":"collapsed"),children:(0,yt.jsx)("div",{className:"chat-toggle-icon",onClick:h,children:(0,yt.jsx)("div",{className:"chat-messages-count-container",children:(0,yt.jsx)("div",{className:"chat-toggle-text open",children:s?"-":"\u2261"})})})}),(0,yt.jsx)("div",{className:"chat-toggle mute "+(c?"muted":""),children:(0,yt.jsx)("div",{className:"chat-toggle-text",onClick:m,children:c?"O":"X"})})]})]}),!c&&s&&0!==a.length?(0,yt.jsx)("div",{className:"chat-expanded",children:(0,yt.jsx)("div",{className:"chat-expanded-container",ref:t,children:(0,yt.jsx)("div",{className:"chat-expanded-messages",children:a.map(((e,t)=>(0,yt.jsx)("div",{className:"chat-message-container",children:(0,yt.jsx)(Ur,{chatMessage:e})},t)))})})}):null]})},Gr=e=>{let{themes:t,maxSegments:a,onRedeem:n}=e;return(0,yt.jsxs)("div",{className:"tone-tracker",children:[(0,yt.jsx)("div",{className:"tone-header",children:(0,yt.jsx)("span",{className:"tone-title",children:"Session Themes"})}),(0,yt.jsx)("div",{className:"tone-grid",children:Object.entries(t).map((e=>{let[t,r]=e;return(0,yt.jsxs)("div",{className:`tone-item theme-${t} muted ${r>=a?"active":""}`,onClick:r>=a?()=>n(t):void 0,children:[(0,yt.jsxs)("div",{className:"tone-item-header",children:[(0,yt.jsx)("span",{className:"tone-name",children:t}),(0,yt.jsxs)("span",{className:"tone-count",children:[r,"/",a]})]}),(0,yt.jsx)("div",{className:"tone-progress-container",children:(0,yt.jsx)("div",{className:`tone-progress-bar theme-${t}`,style:{width:r/a*100+"%"}})})]},t)}))})]})},Wr=e=>{let{}=e;const t=qt(),a=ta(),r=$t(),[s,i]=(0,n.useState)(r.getCollectedThemes());(0,n.useEffect)((()=>{const e=()=>{i({...r.getCollectedThemes()})};return r.on("dmScreenUpdated",e),()=>{r.off("dmScreenUpdated",e)}}),[r]);Object.entries(s).length;return(0,yt.jsxs)("div",{className:"bottom-bar-container "+(t.state===aa.SESSION||t.state===aa.SESSION_OVERVIEW?"":"hidden"),children:[(0,yt.jsxs)("div",{className:"bottom-bar",children:[(0,yt.jsx)(Hr,{}),Object.entries(s).length>0&&(0,yt.jsx)(Gr,{themes:s,maxSegments:3,onRedeem:e=>{r.redeemTheme(e)}})]}),(0,yt.jsxs)("div",{className:"bottom-bar-controls",children:[(0,yt.jsx)("div",{className:"gameroom-party-info-stress"}),(0,yt.jsx)("div",{className:"gameroom-party-info"}),(0,yt.jsxs)("div",{className:"gameroom-nav-button-container",children:[(0,yt.jsx)("div",{className:"gameroom-nav-button nav-button",onClick:()=>{t.state===aa.SESSION_OVERVIEW?t.state=aa.SESSION:r.backToOverview()},children:"RUN SESSION"}),(0,yt.jsx)("div",{className:"gameroom-nav-button nav-button",onClick:()=>{a.toggleImageForEvent()},children:"Alt BG"})]})]})]})},Kr=()=>{const e=$t(),t=Zt(),a=e.getCurrentEncounter(),r=qt(),s=ta(),[i,l]=(0,n.useState)(e.getEstablishedTags()),[o,c]=(0,n.useState)(e.getRumorTags()),[d,u]=(0,n.useState)(e.getWeightedLocationTagsEstablished()),[h,m]=(0,n.useState)(t.getAllExpectedBackstoryTags()),[g,p]=(0,n.useState)(e.getExpectedEncounterTags()),[f,v]=(0,n.useState)(e.getResolvedTagsForBranch()),[y,b]=(0,n.useState)(e.getDMPoints()),[E,S]=(0,n.useState)(e.getDmTricks()),[N,T]=(0,n.useState)(e.getEncounterLocationTags()),[x,A]=(0,n.useState)(e.getCampaignScore()),[C,M]=(0,n.useState)(e.getDmLevel()),[w,R]=(0,n.useState)(e.getDmExp()),k=(0,n.useMemo)((()=>(null===a||void 0===a?void 0:a.location.tags.sort())||[]),[null===a||void 0===a?void 0:a.location.tags]),j=(0,n.useMemo)((()=>[...k].sort(((e,t)=>e.name.localeCompare(t.name)))),[k]);(0,n.useEffect)((()=>{const a=()=>{const a=e.getEstablishedTags(),n=e.getExpectedEncounterTags(),r=e.getResolvedTagsForBranch();p(n),v(r);const s=a.filter((e=>!n.some((t=>t.name===e.name))&&!r.some((t=>t.name===e.name))));l([...s]),R(e.getDmExp()),M(e.getDmLevel()),m(t.getAllExpectedBackstoryTags()),S(e.getDmTricks()),u(e.getWeightedLocationTagsEstablished()),c(e.getRumorTags()),b(e.getDMPoints()),A(e.getCampaignScore())};return e.on("dmScreenUpdated",a),()=>{e.off("dmScreenUpdated",a)}}),[e,t]);const O=null===a||void 0===a?void 0:a.branches,I=e=>P?s.getPlayerAttitudesStyle(e):"";if(!a)return null;const L=a.location.themes[0],P=!1;return j.forEach((e=>{})),f.forEach((e=>{})),g.forEach((e=>{})),(0,yt.jsxs)("div",{className:"dm-screen-container "+(r.state!==aa.SESSION?"hidden":""),children:[(0,yt.jsxs)("div",{className:"dm-screen-header",children:[(0,yt.jsxs)("div",{className:"dm-screen-dm-points",children:[(0,yt.jsx)("div",{className:"dm-screen-dm-points-label",children:"DM POINTS"}),(0,yt.jsx)("div",{className:"dm-screen-dm-point",children:(0,yt.jsx)(gn,{baseDie:20,displayNumber:y})})]}),(0,yt.jsx)("div",{className:"dm-screen-campaign",children:(0,yt.jsxs)("div",{className:`campaign-display ${on[e.getCurrentCampaign()||0].theme} icon-only`,children:[(0,yt.jsxs)("div",{className:"campaign-score-info",children:[(0,yt.jsx)("div",{className:"score-label",children:"CAMPAIGN SCORE"}),(0,yt.jsx)("div",{className:"score-value",children:x})]}),(0,yt.jsxs)("div",{className:"campaign-info left",children:[(0,yt.jsx)("div",{className:"campaign-info",children:on[e.getCurrentCampaign()||0].name}),(0,yt.jsx)("div",{className:"campaign-info hooks",children:"PLOT HOOKS"}),(0,yt.jsx)("div",{className:"circle-display",children:Array.from({length:4},((t,a)=>(0,yt.jsx)("div",{className:"circle "+(a<e.getCampaignProgress()?"filled":"")},a)))})]}),(0,yt.jsx)("div",{className:"campaign-icon solo",children:(0,yt.jsx)(Et,{imageId:on[e.getCurrentCampaign()||0].icon})})]})}),(0,yt.jsxs)("div",{className:"dm-screen-dm-level",children:["DM LEVEL: ",C,(0,yt.jsx)(ma,{totalSegments:5,filledSegments:w,theme:"exhaustion",label:"Experience"})]})]}),(0,yt.jsxs)("div",{className:"dm-screen-set-scene",children:[(0,yt.jsx)(ma,{totalSegments:N.length,filledSegments:d,theme:L,label:`Set the Scene: ${null===a||void 0===a?void 0:a.location.name} `}),(0,yt.jsx)("div",{className:"dm-screen-set-scene-tags",children:j.map(((t,a)=>(0,yt.jsx)("div",{className:"encounter-flavor-tag text-pill  "+(e.getCollectedLocationTags().includes(t)?"type-location":""),children:t.name},a)))})]}),(0,yt.jsxs)("div",{className:"dm-screen-set-scene",children:[(0,yt.jsx)(ma,{totalSegments:f.length+g.length,filledSegments:f.length,theme:L,label:"encounter elements"}),(0,yt.jsxs)("div",{className:"dm-screen-encounter-tags-row",children:[(0,yt.jsx)("div",{className:"dm-screen-set-scene-tags",children:f.map(((e,t)=>(0,yt.jsx)("div",{className:"encounter-flavor-tag text-pill type-location",children:e.name},t)))}),(0,yt.jsx)("div",{className:"dm-screen-set-scene-tags",children:g.map(((e,t)=>(0,yt.jsx)("div",{className:"encounter-flavor-tag text-pill",children:e.name},t)))})]})]}),O&&O.length>0&&(0,yt.jsxs)("div",{className:"dm-screen-branches-container",children:[(0,yt.jsx)("div",{className:`dm-screen-branches-header text-theme-${L} `,children:"PREP FOR UPCOMING ENCOUNTERS"}),(0,yt.jsx)("div",{className:"dm-screen-upcoming-branches",children:O.map(((t,a)=>(0,yt.jsxs)("div",{className:`dm-screen-branch text-theme-${t.location.themes[0]}`,children:[(0,yt.jsx)(ma,{totalSegments:4,filledSegments:Math.min(4,e.getExpectedTagsForBranch(t.name).length),theme:t.location.themes[0],label:t.name}),(0,yt.jsx)("div",{className:"dm-screen-branch-tags",children:(()=>{const a=e.getExpectedTagsForBranch(t.name),n=e.getAuthoredEncounterTags(t.name).filter((e=>!a.includes(e))),r=4-(n.length+a.length),s=Array(r).fill({name:"?"});return[...n.map(((e,t)=>(0,yt.jsx)("div",{className:"encounter-flavor-tag text-pill expected",children:e.name},`authored-${t}`))),...a.map(((e,t)=>(0,yt.jsx)("div",{className:"encounter-flavor-tag text-pill type-foreshadowing",children:e.name},`expected-${t}`))),...s.map(((e,t)=>(0,yt.jsx)("div",{className:"encounter-flavor-tag text-pill type-foreshadowing expected large-text",children:e.name},`filler-${t}`)))]})()})]},a)))})]}),(0,yt.jsxs)("div",{className:"dm-screen-rumors",children:[h.length>0&&(0,yt.jsxs)("div",{className:"dm-screen-expected-tags",children:[(0,yt.jsx)("div",{className:"dm-screen-collected-tags-header",children:"Elements needed to advance a Character's Backstory"}),(0,yt.jsx)("div",{className:"dm-screen-collected-tags-container",children:h.map(((e,t)=>(0,yt.jsx)("div",{className:`encounter-flavor-tag text-pill ${I(e)} expected`,children:e.name},t)))})]}),o.length>0&&(0,yt.jsxs)("div",{className:"dm-screen-expected-tags",children:[(0,yt.jsx)("div",{className:"dm-screen-collected-tags-header",children:"Rumors"}),(0,yt.jsx)("div",{className:"dm-screen-collected-tags-container",children:o.map(((e,t)=>(0,yt.jsx)("div",{className:`encounter-flavor-tag text-pill ${I(e)} expected`,children:e.name},t)))})]}),i.length>0&&(0,yt.jsxs)("div",{className:"dm-screen-collected-tags",children:[(0,yt.jsx)("div",{className:"dm-screen-collected-tags-header",children:"Potential Campaign Elements"}),(0,yt.jsx)("div",{className:"dm-screen-collected-tags-container",children:i.map(((e,t)=>(0,yt.jsx)("div",{className:`encounter-flavor-tag text-pill  ${I(e)} established`,children:e.name},t)))})]})]})]})},zr=e=>{let{}=e;const t=qt(),[a,r]=(0,n.useState)(t.state),[s,i]=(0,n.useState)(!1),[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),u=ta(),h=t.getDataManager(),m=$t();(0,n.useEffect)((()=>{const e=()=>{o(!1),i(!1),r(t.state),function(e){if(!u)return;switch(e){case aa.MAIN_MENU:break;case aa.PLAYER_RECRUITMENT:case aa.CHARACTER_CREATION:case aa.CAMPAIGN_SETUP:i(!0),setTimeout((()=>{i(!1),o(!0)}),1e3);case aa.SESSION_OVERVIEW:case aa.SESSION:case aa.SCORE:}}(t.state)};return t.on("stateChange",e),()=>{t.off("stateChange",e)}}),[t]);return(0,yt.jsxs)("div",{className:"mode-container",children:[(0,yt.jsx)("div",{className:"bgImageContainer",children:(0,yt.jsxs)("div",{className:`mode-background ${(()=>{switch(h.getStateProps().bg_transition_mode){case"slide-left":return`${s?"slide-left":""} ${l?"left":""}`;case"slide-right":return`${s?"slide-right":""} ${l?"right":""}`;case"slide-down":return`${s?"slide-down":""} ${l?"down":""}`;default:return""}})()}`,children:[(0,yt.jsx)("div",{className:"mode-background-image",style:{backgroundRepeat:"repeat"},children:(0,yt.jsx)(Et,{imageId:h.getStateProps().background_image_id})}),(0,yt.jsx)("div",{className:"mode-background-overlay",children:(0,yt.jsx)(Et,{imageId:h.getStateProps().background_image_id})}),(0,yt.jsx)("div",{className:"mode-background-bottom",children:(0,yt.jsx)(Et,{imageId:h.getStateProps().secondary_bg_image_id})})]})}),(0,yt.jsxs)("div",{className:"mode-component",children:[function(){switch(a){case aa.MAIN_MENU:return(0,yt.jsx)(Fr,{appManager:t});case aa.PLAYER_RECRUITMENT:return(0,yt.jsx)(Ra,{appManager:t,playerManager:t.getPlayerManager()});case aa.CHARACTER_CREATION:return(0,yt.jsx)(ka,{});case aa.CAMPAIGN_SETUP:return(0,yt.jsx)(Pa,{openCampaign:m.getOpenCampaign()});case aa.SESSION_OVERVIEW:return(0,yt.jsx)(xr,{});case aa.SESSION:return(0,yt.jsx)(Ar,{appManager:t});case aa.SCORE:return(0,yt.jsx)(Cr,{appManager:t})}return(0,yt.jsx)("div",{children:"NOT YET IMPLEMENTED"})}(),(0,yt.jsx)(Wr,{})]}),t.state===aa.SESSION||t.state===aa.SESSION_OVERVIEW?(0,yt.jsx)(Kr,{}):null]})},Vr=()=>{const{modalConfig:e,handleOptionSelect:t,closeModal:a}=(()=>{const[e,t]=(0,n.useState)(null),a=qt().getUiManager();return(0,n.useEffect)((()=>{const e=e=>{t(e)};return a.on("modalStateChanged",e),()=>{a.off("modalStateChanged",e)}}),[a]),{modalConfig:e,handleOptionSelect:e=>a.handleModalOptionSelected(e),closeModal:()=>a.closeModal()}})();return e?"levelup"===e.type?(0,yt.jsx)("div",{className:"modal-overlay",children:(0,yt.jsxs)("div",{className:"modal-container",children:[(0,yt.jsxs)("div",{className:"modal-header",children:[(0,yt.jsx)("h2",{children:e.title}),(0,yt.jsx)("button",{className:"close-button",onClick:a,children:"\xd7"})]}),(0,yt.jsx)("div",{className:"modal-options",children:e.options.map((e=>(0,yt.jsxs)("button",{className:`modal-option ${e.class||""}`,onClick:()=>t(e.id),children:[(0,yt.jsx)("div",{className:"option-content",children:(0,yt.jsx)("h3",{children:e.title})}),e.icon&&(e.id===Ct.CHARACTER?(0,yt.jsx)(Et,{imageId:e.icon}):(0,yt.jsx)("span",{className:"option-icon",children:e.icon})),(0,yt.jsx)("div",{className:"option-content",children:e.description&&(0,yt.jsx)("p",{children:e.description})})]},e.id)))})]})}):"travelresult"===e.type&&e.travelConfig?(0,yt.jsx)("div",{className:"modal-overlay",children:(0,yt.jsxs)("div",{className:"modal-container travel",children:[(0,yt.jsxs)("div",{className:"modal-header",children:[e.title,(0,yt.jsx)("button",{className:"close-button",onClick:a,children:"\xd7"})]}),(0,yt.jsx)("div",{className:"travel-results",children:e.travelConfig.results.map((e=>(0,yt.jsx)(rr,{effectData:e})))}),(0,yt.jsx)("div",{className:"travel-tags",children:e.options.map((e=>(0,yt.jsx)("div",{children:e.id})))})]})}):(0,yt.jsx)("div",{className:"modal-overlay",children:(0,yt.jsxs)("div",{className:"modal-container",children:[(0,yt.jsxs)("div",{className:"modal-header",children:[(0,yt.jsx)("h2",{children:e.title}),(0,yt.jsx)("button",{className:"close-button",onClick:a,children:"\xd7"})]}),(0,yt.jsx)("div",{className:"modal-options",children:e.options.map((e=>(0,yt.jsxs)("button",{className:`modal-option ${e.class||""}`,onClick:()=>t(e.id),children:[(0,yt.jsx)("div",{className:"option-content",children:(0,yt.jsx)("h3",{children:e.title})}),e.icon&&(e.id===Ct.CHARACTER?(0,yt.jsx)(Et,{imageId:e.icon}):(0,yt.jsx)("span",{className:"option-icon",children:e.icon})),(0,yt.jsx)("div",{className:"option-content",children:e.description&&(0,yt.jsx)("p",{children:e.description})})]},e.id)))})]})}):null},Yr=()=>{const e=qt(),t=ta(),[a,r]=n.useState(e.state),[s,i]=n.useState(void 0),[l,o]=n.useState(0);return(0,n.useEffect)((()=>{const a=()=>{r(e.state)},n=e=>{o(0),i(e)},s=e=>{o(e)};return e.on("stateChange",a),t.on("setNotebookState",n),t.on("setTutorialPage",s),()=>{t.off("setNotebookState",n),e.off("stateChange",a),t.off("setTutorialPage",s)}}),[]),(0,yt.jsxs)("div",{className:"global-ui-container",children:[(0,yt.jsx)("div",{className:"state-display",children:function(e){switch(e){case aa.PLAYER_RECRUITMENT:case aa.CHARACTER_CREATION:case aa.MAIN_MENU:case aa.CAMPAIGN_SETUP:case aa.SESSION_OVERVIEW:case aa.SESSION:case aa.SCORE:}return(0,yt.jsx)("div",{})}(a)}),s?(0,yt.jsx)(Ma,{notebookPages:s,pageIndex:l}):null,(0,yt.jsx)(Vr,{})]})},Qr=e=>{let{}=e;return(0,yt.jsxs)("div",{children:[(0,yt.jsx)("div",{className:"App",children:(0,yt.jsx)(zr,{})}),(0,yt.jsx)(Yr,{})]})},Xr=[{id:"exposition",name:"Boring Exposition",description:"Dryly describe the surroundings.",time:2,tags:2,score:0,boredom:10,repeatable:!0,exhaustion:10,travelOptionType:O.EXPLORE_CURRENT_LOCATION,tagInstructions:"Mention something about the current area as you travel."},{id:"forage",name:"Forage for Supplies",description:"Players procure supplies for the journey, or forage along the way.",time:5,tags:1,score:0,boredom:3,repeatable:!0,exhaustion:2,travelOptionType:O.EXPLORE_CURRENT_LOCATION,tagInstructions:"Mention something about the area"},{id:"stories",name:"Share Stories",description:"Characters discuss their pasts.",time:5,tags:1,score:0,boredom:2,exhaustion:5,travelOptionType:O.CHARACTER_BACKSTORY,tagInstructions:"Add a detail to a Character's backstory!"},{id:"scout_ahead",name:"Scout Ahead",description:"The players send a character to scout the path ahead",time:5,tags:1,score:0,boredom:5,exhaustion:3,travelOptionType:O.EXPLORE_UPCOMING_LOCATION,tagInstructions:"Bring up something about what may lie ahead"}],Zr=[{id:"camp",name:"Camp",description:"Spend an uneventful night",time:10,tags:0,score:0,repeatable:!0,boredom:5,travelOptionType:O.CAMP,exhaustion:3},{id:"ambush",name:"Camp Ambush",description:"Characters are abushed while resting",time:10,tags:1,score:0,boredom:1,travelOptionType:O.AMBUSH,tagInstructions:"Choose which enemy type to use",exhaustion:10},{id:"traders",name:"Traders",description:"Characters meet traders on the road",time:10,tags:1,score:0,boredom:1,travelOptionType:O.TRADERS,tagInstructions:"Choose a magic item to offer",exhaustion:5},{id:"mysterious_cache",name:"Elven Cache",description:"Discover a hidden cache along the route.",time:10,tags:1,score:0,boredom:2,tag:_a.RACE.ELVES,travelOptionType:O.SIDE_QUEST,tagInstructions:"Reward a magic item from the cache.",exhaustion:2}],Jr=[{id:"cartography",name:"Cartography",description:"A player wants to carefully draw a map of the region...",time:15,tags:2,score:0,exhaustion:10,boredom:10,travelOptionType:O.EXPLORE_CURRENT_LOCATION,tagInstructions:"The players learn things about the area while drawing a map"},{id:"horseback",name:"Horseback Riding",description:"Good thing we have these horsies!",time:15,tags:0,score:0,boredom:1,exhaustion:3,travelOptionType:O.TRAVEL,tag:_a.TRAVEL.HORSES},{id:"ship",name:"Ship Travel",description:"How convenient! We can take this ship!",time:15,tags:0,score:0,boredom:1,exhaustion:3,tag:_a.TRAVEL.SHIPS,travelOptionType:O.TRAVEL},{id:"slog",name:"Slog",description:"An extended and lengthy journey",time:20,tags:2,score:0,repeatable:!0,boredom:5,exhaustion:15,travelOptionType:O.EXPLORE_CURRENT_LOCATION,tagInstructions:"Slowly draw out details about the area during the journey"},{id:"side_quest",name:"Side Quest",description:"Maybe a detour into this cave?",time:-1,tags:0,score:0,boredom:-1,exhaustion:-1,travelOptionType:O.SIDE_QUEST}];class qr extends(Nn()){constructor(e){super(),this.currentCampaign=void 0,this.appManager=void 0,this.currentEncounter=void 0,this.encounterState=void 0,this.playerManager=void 0,this.establishedTags=[],this.rumorTags=[],this.collectedLocationTags=[],this.expectedTagsForBranches={},this.resolvedTagsForBranches={},this.dmTricks=[],this.dmPoints=0,this.campaignProgress=0,this.themeCounts={},this.completedEventIndexes=[],this.breaksAvailable=1,this.dmLevel=1,this.dmExperience=0,this.campaignScore=0,this.travelOptions=[Xr,Zr,Jr],this.rewardsAccepted=(e,t,a)=>{-2===t?this.partyManager().addPartyEnjoyment(-2):-1===t?this.partyManager().addPartyEnjoyment(-1):1===t?this.partyManager().multiplyPartyTension(.5):2===t&&this.partyManager().multiplyPartyTension(0);const n=this.appManager.getPartyManager();e.forEach((e=>{switch(e.type){case w.TREASURE:n.addPartyEnjoyment(e.value);break;case w.TOOLS:n.replenishPartyTools();break;case w.XP:n.levelUpLowestCharacter();break;case w.ITEM:const t=this.playerManager.getRandomPlayer(),a=this.playerManager.getRandomCharacterForPlayer(t,!0);e.tag&&this.appManager.getCharacterManager().assignGear(a,e.tag.name),this.rumorTags=this.rumorTags.filter((t=>{var a;return t.name!==(null===(a=e.tag)||void 0===a?void 0:a.name)}));break;case w.PLOT_HOOK:this.advanceCampaignStory();break;case w.HEALING:1===e.value?n.healRandomCharacter():n.raiseRandomFromDead();break;case w.BACKSTORY:break;case w.MAGIC:n.replenishPartyMagic()}})),a&&this.backToOverview(),this.emit("dmScreenUpdated")},this.getFormattedSource=(e,t)=>{let a=t;return this.isMagicItemRumor(e.name)||e.type===l.GEAR?a=x.MAGIC_ITEM:this.isBackstoryTag(e.name)?a=x.BACKSTORY:this.isLocationRumor(e.name)||this.isEncounterLocationTag(e.name)?a=x.LOCATION:(this.isCurrentEncounterTag(e.name)||this.isUpcomingEncounterTag(e.name))&&(a=x.FORESHADOWING),a},this.appManager=e,this.playerManager=e.getPlayerManager(),this.init()}partyManager(){return this.appManager.getPartyManager()}init(){this.dmTricks=[]}getWeightedLocationTagsEstablished(){return this.collectedLocationTags.length}redeemTheme(e){switch(delete this.themeCounts[e],e){case A.COMEDIC:this.partyManager().addPartyEnjoyment(5);break;case A.SERIOUS:this.partyManager().setPartyTension(50);break;case A.DRAMATIC:this.partyManager().addPartyEngagement(5);break;case A.NONE:this.partyManager().addPartyEnjoyment(1)}this.emit("dmScreenUpdated",this.themeCounts)}continueTheme(e){this.partyManager().addPartyScore(10)}updateFlavorTagThemesTally(e){e.forEach((e=>{e.theme!==A.NONE&&this.addTheme(e.theme)}))}themedUiClicked(e){this.addTheme(e),this.emit("dmScreenUpdated",this.themeCounts)}addTheme(e){e!==A.NONE&&(void 0===this.themeCounts[e]?this.themeCounts[e]=1:(this.themeCounts[e]||0)>=3?this.continueTheme(e):this.themeCounts[e]=Math.min(3,Math.max(0,(this.themeCounts[e]||0)+1)),this.emit("dmScreenUpdated",this.themeCounts))}spendDMPoints(e){this.dmPoints+=e,this.emit("dmScreenUpdated",this.dmPoints)}getDMPoints(){return this.dmPoints}exhaustForRoleplayAction(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=1*(this.rumorTags.length||1);this.partyManager().exhaustParty(t+e)}getPerceptionTags(e){var t;const a=this.playerManager.getPlayerAssignedCharacter(e),n=(null===(t=this.currentEncounter)||void 0===t?void 0:t.branches)||[];if(!a||!this.currentEncounter)return[];const r=Math.floor(5*Math.random());switch(r){case C.BRANCH_LOCATION:const t=n[Math.floor(Math.random()*n.length)],s=t.name;let i=this.getTagsForEncounter(t);i=i.filter((e=>!this.getExpectedTagsForBranch(t.name).includes(e)));const o=Math.floor(2*Math.random())+1;if(0===i.length){return{tags:[{tag:{name:this.appManager.getCharacterManager().getRandomGear().name,type:l.GEAR},source:x.LOCATION,theme:A.NONE}],type:r,name:t.name}}return{tags:i.sort((()=>Math.random()-.5)).slice(0,o).map((e=>({tag:e,source:x.LOCATION,theme:this.getTheme()}))),type:r,name:s};case C.CURRENT_LOCATION:const c=this.currentEncounter.location.name,d=this.getEncounterLocationTags(),u=Math.floor(2*Math.random())+1;return{tags:d.sort((()=>Math.random()-.5)).slice(0,u).map((e=>({tag:e,source:x.LOCATION,theme:this.getTheme()}))),type:r,name:c};case C.PLOT_HOOK:return{tags:[{tag:{name:`Plot Hook: ${this.campaignProgress+1}`,type:l.PLOT},source:x.PLOT,theme:A.NONE}],type:C.PLOT_HOOK,name:"Campaign Story"};case C.CHARACTER_BACKSTORY:case C.CHARACTER_BACKSTORY_PROGRESS:const h=this.appManager.getCharacterManager().getAllExpectedBackstoryTags();if(h.length>0&&Math.random()<.5){return{tags:[{tag:h[Math.floor(Math.random()*h.length)],source:x.PLAYERS,theme:this.getTheme()}],type:C.CHARACTER_BACKSTORY_PROGRESS,name:e.name}}return{tags:this.getNewBackstoryTags(a,e,1),type:C.CHARACTER_BACKSTORY,name:e.name};case C.MAGIC_ITEM:const m=this.getRumorTags().filter((e=>e.type===l.GEAR));if(m.length>0&&Math.random()<.5){const e=m[Math.floor(Math.random()*m.length)];return{tags:[{tag:e,source:x.PLAYERS,theme:this.getTheme()}],type:C.MAGIC_ITEM,name:e.name}}const g={name:this.appManager.getCharacterManager().getRandomGear().name,type:l.GEAR};return{tags:[{tag:g,source:x.PLAYERS,theme:A.NONE}],type:C.MAGIC_ITEM,name:g.name}}return[]}getNewBackstoryTags(e,t,a){const n=Object.values(_a).flatMap((e=>Object.values(e))).sort((()=>Math.random()-.5)).slice(0,5);return[...e.preferences.map((e=>{let[t]=e;return t})),...n].sort((()=>Math.random()-.5)).slice(0,a).map((e=>({tag:e,source:x.BACKSTORY,theme:this.getTheme()})))}acceptPerceptionTags(e,t){this.updateFlavorTagThemesTally(e.tags);e.tags.map((e=>e.tag)).forEach((e=>{this.playerManager.exposeEncounterTag(e)}));const a=this.playerManager.getPlayerAssignedCharacter(t);let n=-1;switch(e.type){case C.CURRENT_LOCATION:e.tags.forEach((e=>{this.exposeCurrentlocationTag(e.tag)}));break;case C.BRANCH_LOCATION:e.tags.forEach((t=>{this.expectedTagsForBranches[e.name].push(t.tag)})),this.addCampaignScore(Jn.FORESHADOWED_ENCOUNTER*e.tags.length),this.partyManager().addPartyScore(2);break;case C.PLOT_HOOK:n=0,this.advanceCampaignStory(),this.partyManager().addPartyScore(3);break;case C.CHARACTER_BACKSTORY:this.partyManager().addPartyScore(Zn.BACKSTORY_ASSIGNED),this.appManager.getCharacterManager().assignBackstory(t,e.tags[0].tag);break;case C.CHARACTER_BACKSTORY_PROGRESS:this.partyManager().addPartyScore(Zn.BACKSTORY_FULFILLED),this.appManager.getCharacterManager().assignBackstory(t,e.tags[0].tag);break;case C.MAGIC_ITEM:const a=e.tags[0].tag;this.isRumor(a.name)?(this.appManager.getCharacterManager().assignGear(t,a.name),this.rumorTags=this.rumorTags.filter((e=>e.name!==a.name)),this.partyManager().addPartyScore(Zn.MAGIC_ITEM_INTRODUCED)):(this.partyManager().addPartyScore(Zn.MAGIC_ITEM_FOUND),this.rumorTags=[...this.rumorTags,a])}-1!==n?this.partyManager().updateAllAttention(n):this.partyManager().playersTakeAction(a&&[a.name]||void 0,!0),a&&this.partyManager().stressAction([a]),this.emit("dmScreenUpdated",this.establishedTags)}setCampaignProgress(e){this.campaignProgress=e,this.emit("campaignProgressUpdated",e)}getCampaignProgress(){return this.campaignProgress}handleExpositionClicked(){var e;const t=this.currentEncounter;if(!t)return;const a=t.branches||[],n=[];if(null===(e=this.currentEncounter)||void 0===e||e.location.tags.forEach((e=>{this.collectedLocationTags.includes(e)||n.push(e)})),this.getExpectedEncounterTags().forEach((e=>{n.push(e)})),a.forEach((e=>{e.tags.forEach((t=>{this.establishedTags.includes(t)||n.includes(t)||this.getExpectedTagsForBranch(e.name).includes(t)||n.push(t)}))})),0===n.length)return;const r=Math.floor(Math.random()*n.length),s=n[r];this.exposeTagForEncounter({tag:s,source:x.EXPOSITION,theme:A.NONE}),this.partyManager().updateAllAttention(-1),this.emit("encounterUpdated",this.establishedTags)}exposeTagForEncounter(e){var t;let a=!0;this.updateFlavorTagThemesTally([e]),this.playerManager.exposeEncounterTag(e.tag);if(this.appManager.getCharacterManager().getCharactersWithBackstoryTag(e.tag).forEach((t=>{this.appManager.getCharacterManager().assignBackstory(t,e.tag),this.partyManager().addPartyScore(Zn.BACKSTORY_ASSIGNED),a=!1})),this.isMagicItemRumor(e.tag.name)){const t=this.playerManager.getRandomPlayer(),n=this.playerManager.getRandomCharacterForPlayer(t,!0);this.appManager.getCharacterManager().assignGear(n,e.tag.name),this.partyManager().addPartyScore(Zn.MAGIC_ITEM_FOUND),this.rumorTags=this.rumorTags.filter((t=>t.name!==e.tag.name)),a=!1}(e.source===x.LOCATION||e.source===x.EXPOSITION||this.isLocationRumor(e.tag.name))&&(this.exposeCurrentlocationTag(e.tag),a=!1);let n=!1;this.appManager.getChatManager().expectedTagResolved(e.tag)&&(n=!0);const r=[];let s=!1;const i=(null===(t=this.currentEncounter)||void 0===t?void 0:t.branches)||[];if(i.forEach(((t,n)=>{t.tags.includes(e.tag)?(this.expectedTagsForBranches[t.name].push(e.tag),s=!0,this.addCampaignScore(Jn.FORESHADOWED_ENCOUNTER),a=!1):!s&&this.couldAssignRandomTagToBranch(t)&&r.push(n)})),e.source===x.FORESHADOWING_RANDOM&&!s&&r.length>0){const t=Math.floor(Math.random()*r.length),n=i[r[t]];this.expectedTagsForBranches[n.name].push(e.tag),this.appManager.getChatManager().triggerAddRandomTagToEncounterConversation(e.tag,n),this.addCampaignScore(Jn.FORESHADOWED_ENCOUNTER),a=!1}this.getExpectedEncounterTags().includes(e.tag)&&(this.partyManager().addPartyEngagement(10),this.resolveExpectedTagsForBranch(e.tag),this.addCampaignScore(Jn.ENCOUNTER_TAG_RESOLVED),a=!1),a&&this.establishOrStartRumor(e.tag),this.emit("dmScreenUpdated",this.establishedTags)}selectRoleplayFlavorTag(e,t){if("character"===e.type&&e.character){const t=this.playerManager.getPlayerAssignedCharacter(e.character);return void(t&&(this.partyManager().playersTakeAction([t.name],!0,2),this.partyManager().stressAction([t])))}if("treasure"===e.type)return void this.partyManager().addTreasurePoints(1);if("dmpoint"===e.type)return void this.addDmExp(1);const a=e.tag;a&&(this.exposeTagForEncounter(a),t<=0&&this.partyManager().playersTakeAction(),this.partyManager().stressAction(),this.exhaustForRoleplayAction())}establishOrStartRumor(e){this.establishedTags.includes(e)||(this.rumorTags.includes(e)?(this.rumorTags=this.rumorTags.filter((t=>t!==e)),this.establishedTags.push(e)):this.rumorTags.push(e))}resolveExpectedTagsForBranch(e){if(!this.currentEncounter)return;const t=this.expectedTagsForBranches[this.currentEncounter.name||""];this.expectedTagsForBranches[this.currentEncounter.name||""]=t.filter((t=>t!==e)),this.resolvedTagsForBranches[this.currentEncounter.name].push(e),this.establishedTags=[...this.establishedTags,e],this.emit("dmScreenUpdated",this.themeCounts)}generateRoleplayEventTags(e){console.log(e);const t=this.currentEncounter;if(!t)return[];let a=[...this.establishedTags,...this.getCollectedLocationTags()];const n=this.getEncounterLocationTags(),r=this.getRumorTags(),s=this.getExpectedEncounterTags(),i=this.playerManager.getAllPlayerPreferences(),l=this.appManager.getCharacterManager().getAllExpectedBackstoryTags(),o=Object.values(_a).flatMap((e=>Object.values(e))),c=t.branches||[];let d=c.flatMap((e=>e.tags));const u=c.flatMap((e=>this.getExpectedTagsForBranch(e.name)));d=d.filter((e=>!u.includes(e)&&!s.includes(e)));const h=this.getRandomTags([2,3],d,[]);a=[...a,...h];const m=this.getRandomTags([2,3],n,[...a]);a=[...a,...n];const g=this.getRandomTags([2,3],[...r,...s],a);a=[...a,...g],a=[...a,...this.getTagsForUpcomingEncounters()];const p=this.getRandomTags([1,2],i,a);if(a=[...a,...p],l.length>0&&Math.random()<.1){const e=this.getRandomTags(1,l,a);p.push(...e),a=[...a,...e]}const f=m.length+g.length+p.length,v=this.getRandomTags(12-f,o,a),y=m.map((e=>({tag:e,source:this.getFormattedSource(e,x.LOCATION),theme:this.getTheme()}))),b=h.map((e=>({tag:e,source:this.getFormattedSource(e,x.FORESHADOWING),theme:this.getTheme()}))),E=[...y,...g.map((e=>({tag:e,source:this.getFormattedSource(e,x.RUMOR),theme:this.getTheme()}))),...p.map((e=>({tag:e,source:this.getFormattedSource(e,x.PLAYERS),theme:this.getTheme()}))),...v.map((e=>this.couldAssignRandomTag()&&Math.random()<.25?{tag:e,source:this.getFormattedSource(e,x.FORESHADOWING_RANDOM),theme:this.getTheme()}:{tag:e,source:this.getFormattedSource(e,x.ALL),theme:this.getTheme()})),...b].sort((()=>Math.random()-.5)).slice(0,12),S=Math.random()<.5,N=[];if(E.forEach((e=>{N.push({tag:e,type:"tag"})})),S){const e=this.appManager.getCharacterManager().getPlayerCharacters(),t={character:e[Math.floor(Math.random()*e.length)],type:"character"};N.push(t)}if(Math.random()<.5){const e={type:"treasure"};N.push(e)}if(Math.random()<.5){const e={type:"dmpoint"};N.push(e)}return N}setDefaultTravelOptions(){this.travelOptions=[Xr,Zr,Jr]}setTravelOptions(e){this.travelOptions=e,this.emit("travelOptionsUpdated",e)}getTravelOptions(){return this.travelOptions}hasTravelTag(e){return this.establishedTags.includes(e)||this.rumorTags.includes(e)||this.collectedLocationTags.includes(e)}getEventTag(e){let t=0;switch(e.travelOptionType){case O.AMBUSH:return this.getEstablishedCombatantTags().length>0?(t=Math.floor(Math.random()*this.getEstablishedCombatantTags().length),this.getEstablishedCombatantTags()[t]):(t=Math.floor(Math.random()*this.getPotentialCombatantsTags().length),this.getPotentialCombatantsTags()[t]);case O.TRADERS:return this.getEstablishedFriendlyTags().length>0?(t=Math.floor(Math.random()*this.getEstablishedFriendlyTags().length),this.getEstablishedFriendlyTags()[t]):this.getRandomFriendlyTags(1)[0]}return e.tag}getResultTags(e){const t=this.playerManager.getPlayers(),a=t[Math.floor(Math.random()*t.length)],n=this.playerManager.getRandomCharacterForPlayer(a,!0);if(!n)return[];switch(e.travelOptionType){case O.TRADERS:case O.AMBUSH:break;case O.EXPLORE_CURRENT_LOCATION:return this.getEncounterLocationTags().map((e=>({tag:e,source:x.LOCATION,theme:this.getTheme()})));case O.EXPLORE_UPCOMING_LOCATION:return this.getUpcomingEncounterTags().map((e=>({tag:e,source:x.FORESHADOWING,theme:this.getTheme()})));case O.CHARACTER_BACKSTORY:return this.getNewBackstoryTags(a,n,3);case O.SIDE_QUEST:return this.getRandomTags(1,Object.values(_a).flatMap((e=>Object.values(e)))).map((e=>({tag:e,source:x.QUESTS,theme:this.getTheme()})));case O.TRAVEL:return this.getRandomTags(1,this.getRumorTags()).map((e=>({tag:e,source:x.RUMOR,theme:this.getTheme()})))}}selectTravelOption(e,t){const a=[];-1===e.boredom&&(e.boredom=Math.floor(25*Math.random())),-1===e.score&&(e.score=Math.floor(25*Math.random())),-1===e.time&&(e.time=Math.floor(20*Math.random())),-1===e.exhaustion&&(e.exhaustion=Math.floor(15*Math.random()));const n=(e,t,n)=>{if(!e)return;const r=a.find((t=>t.object===e));r&&r.effects?r.effects.push({effect:t,class:n}):a.push({object:e,effects:[{effect:t,class:n}]})},r=this.playerManager.getPlayers(),s=t>66?1:t>33?.5:.2,i=this.playerManager.getRandomCharacter();if(!i)return;if(!this.playerManager.getPlayerAssignedCharacter(i))return;switch(e.travelOptionType){case O.AMBUSH:if(i)if(Math.random()<.5){const e=this.partyManager().addInjury(i);n(i,e,"injury")}else if(Math.random()<.5&&this.appManager.getCharacterManager().getRemainingAttributes(i,c.MAGIC)>0){const e=this.appManager.getCharacterManager().useHalfRemainingAttributes(i,c.MAGIC);n(i,"Used "+e+" Magic","used-ability")}else if(this.appManager.getCharacterManager().getRemainingAttributes(i,c.TOOLS)>0){const e=this.appManager.getCharacterManager().useHalfRemainingAttributes(i,c.TOOLS);n(i,"Used "+e+" Tools","used-ability")}break;case O.CHARACTER_BACKSTORY:n(i,"+New Backstory Details","backstory")}r.forEach((e=>{Math.random()<s&&(this.partyManager().updateAttention(e,-1),n(e,"-1 Attention","boredom")),t>66&&Math.random()<.15&&(this.partyManager().addEnjoyment(e,-1),n(e,"-1 Attitude","boredom"))}));const l=t>66?-10:t>33?-5:-1;return this.partyManager().addPartyTension(l),n("party","-"+Math.abs(l)+" Tension","tension"),e.exhaustion&&(this.partyManager().exhaustParty(e.exhaustion),n("party","+"+Math.abs(e.exhaustion)+" Exhaustion","exhaustion")),{travelResults:a,travelTags:this.getResultTags(e)}}exposeCurrentlocationTag(e){var t;(this.collectedLocationTags.push(e),this.addCampaignScore(Jn.LOCATION_DESCRIBED),this.currentEncounter)&&this.appManager.getUiManager().setEventImageOpacity(this.collectedLocationTags.length/(null===(t=this.currentEncounter)||void 0===t?void 0:t.location.tags.length))}isCurrentEncounterTag(e){return!!this.currentEncounter&&this.expectedTagsForBranches[this.currentEncounter.name].some((t=>t.name===e))}isUpcomingEncounterTag(e){if(!this.currentEncounter)return!1;return(this.currentEncounter.branches||[]).some((t=>t.tags.some((t=>t.name===e))))}advanceCampaignStory(){this.partyManager().updateAllAttention(2),this.setCampaignProgress(this.campaignProgress+1),this.addCampaignScore(25),this.emit("campaignProgressUpdated",this.campaignProgress)}getCampaignTooltipForTag(e){var t,a;const n=on[this.currentCampaign||0];if(n.tooltipTags&&null!==(t=n.tooltipTags[(null===(a=this.currentEncounter)||void 0===a?void 0:a.name)||""])&&void 0!==t&&t[e.tag.name]){var r,s;const t=null===(r=n.tooltipTags[(null===(s=this.currentEncounter)||void 0===s?void 0:s.name)||""])||void 0===r?void 0:r[e.tag.name];if(t)return t+this.appManager.getChatManager().getThemePostFix(e)}}couldAssignRandomTagToBranch(e){const t=4-e.tags.length;return!(this.expectedTagsForBranches[e.name].length-e.tags.filter((t=>this.expectedTagsForBranches[e.name].includes(t))).length>=t)}getUpcomingEncounterTags(){if(!this.currentEncounter)return[];const e=this.currentEncounter.branches||[];let t=[];return e.forEach((e=>{t=[...t,...e.tags.filter((t=>!this.expectedTagsForBranches[e.name].includes(t)))]})),t}resolveTownTag(e){this.updateFlavorTagThemesTally([e]),this.playerManager.exposeEncounterTag(e.tag),this.exposeTagForEncounter(e)}couldAssignRandomTag(){if(!this.currentEncounter)return 0;const e=this.currentEncounter.branches||[];let t=!1;return e.forEach((e=>{this.couldAssignRandomTagToBranch(e)&&(t=!0)})),t}getExpectedGear(){return this.getRumorTags().filter((e=>e.type===l.GEAR))}getActiveThemes(){return Object.values(this.themeCounts).reduce(((e,t)=>e+(t>0?1:0)),0)}getOpenCampaign(){return this.currentCampaign}getExpectedTagsForBranch(e){return this.expectedTagsForBranches[e]}getOutstandingBackstoryTags(){return this.appManager.getCharacterManager().getAllExpectedBackstoryTags()}getColorForEncounterByName(e){var t;const a=null===(t=on[this.currentCampaign||0].processedEncounters)||void 0===t?void 0:t.flat().find((t=>t.name===e));return a?a.location.themes[0]:"none"}getRumorTags(){return this.rumorTags}getNextPlotHookPerceptionText(){var e;const t=this.campaignProgress;let a=null===(e=on[this.currentCampaign||0].plotHooks)||void 0===e?void 0:e[t||0];return a||(a="Next important plot information...."),a}isRumor(e){return this.rumorTags.some((t=>t.name===e))}isMagicItemRumor(e){return this.rumorTags.some((t=>t.name===e&&t.type===l.GEAR))}isLocationRumor(e){return this.rumorTags.some((t=>t.name===e&&this.getEncounterLocationTags().includes(t)))}isEncounterLocationTag(e){return this.getEncounterLocationTags().some((t=>t.name===e))}isBackstoryTag(e){return this.appManager.getCharacterManager().getAllExpectedBackstoryTags().some((t=>t.name===e))}getEstablishedTags(){return this.establishedTags}getCollectedThemes(){return this.themeCounts}getAvailableCampaigns(){return on}getCampaignIcon(){return on[this.currentCampaign||0].icon}getCampaignName(){return on[this.currentCampaign||0].name}getDmTricks(){return this.dmTricks}getAuthoredEncounterTags(e){var t;const a=null===(t=on[this.currentCampaign||0].processedEncounters)||void 0===t?void 0:t.flat().find((t=>t.name===e));return a?a.tags:[]}getCurrentEncounter(){return this.currentEncounter}getNextEncounters(){var e;return(null===(e=this.currentEncounter)||void 0===e?void 0:e.branches)||[]}getCurrentCampaign(){return this.currentCampaign}getCollectedLocationTags(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.collectedLocationTags:Array.from(new Set(this.collectedLocationTags))}getCollectedLocationTagsForChallenge(){return this.getCollectedLocationTags(!1)}getEncounterEvents(){var e;return(null===(e=this.currentEncounter)||void 0===e?void 0:e.events)||[[],[],[]]}getEncounterLocationTags(){var e;return(null===(e=this.currentEncounter)||void 0===e?void 0:e.location.tags)||[]}getOutstandingLocationTags(){return this.getEncounterLocationTags().filter((e=>!this.collectedLocationTags.includes(e)))}getEncounterTags(){var e;return(null===(e=this.currentEncounter)||void 0===e?void 0:e.tags)||[]}getExpectedEncounterTags(){var e;return this.expectedTagsForBranches[(null===(e=this.currentEncounter)||void 0===e?void 0:e.name)||""]||[]}getTagsForUpcomingEncounters(){var e;const t=(null===(e=this.currentEncounter)||void 0===e?void 0:e.branches)||[];let a=[];return t.forEach((e=>{a=[...a,...e.tags]})),a}getTheme(){if(0!==Math.floor(5*Math.random()))return A.NONE;const e=Math.floor(4*Math.random());return 0===e?A.COMEDIC:1===e?A.DRAMATIC:2===e?A.SERIOUS:A.NONE}getCampaignScore(){return this.campaignScore}addCampaignScore(e){this.campaignScore+=e,this.emit("dmScreenUpdated",this.campaignScore)}getEstablishedFriendlyTags(){const e=Object.values(_a).flatMap((e=>Object.values(e))).filter((e=>e.friendly));return this.establishedTags.filter((t=>e.includes(t)))}getRandomFriendlyTags(e){const t=Object.values(_a).flatMap((e=>Object.values(e))).filter((e=>e.friendly));return this.getRandomTags(e,t)}getPotentialCombatantsTags(){return Object.values(_a).flatMap((e=>Object.values(e))).filter((e=>e.enemy||e.friendly))}getEstablishedCombatantTags(){const e=Object.values(_a).flatMap((e=>Object.values(e))).filter((e=>e.enemy||e.friendly));return this.establishedTags.filter((t=>e.includes(t)))}getRandomMagicItemTag(e){const t=this.getRumorTags().filter((e=>e.type===l.GEAR));for(;t.length<e+2;){const e={name:this.appManager.getCharacterManager().getRandomGear().name,type:l.GEAR};t.push(e)}return this.getRandomTags(e,t)}getEncounterExpositionText(){return"Expose details, players lose attention"}getFriendlyCombatantTags(){return[...this.establishedTags.filter((e=>e.friendly)),...this.getCollectedLocationTags(!1).filter((e=>e.friendly))]}getHostileCombatantTags(e){return[...this.establishedTags.filter((t=>t.enemy&&t.name!==e)),...this.getCollectedLocationTags(!1).filter((e=>e.enemy))]}getCampaignChatTriggers(){return void 0===this.currentCampaign?{}:on[this.currentCampaign].chatTriggers}getEncounterChatTriggers(){const e=this.getCampaignChatTriggers();if(void 0===this.currentEncounter||void 0===e)return{};return e[this.currentEncounter.name]}getEncounterChatTrigger(e){const t=this.getEncounterChatTriggers();if(void 0!==t)return t[e.name]}getRandomTags(e,t,a){if(Array.isArray(e)&&(e=Math.floor(Math.random()*e[1]+e[0])),e<=0)return[];if(a){const e=a.map((e=>e.name));t=t.filter((t=>!e.includes(t.name)))}return t.sort((()=>Math.random()-.5)).slice(0,e)}useBreak(){this.partyManager().takeBreak(),this.breaksAvailable--}canTakeBreak(){return this.breaksAvailable>0}initiateQuickStart(){this.startCampaign(0)}startCampaign(e){var t,a,n,r,s;this.currentCampaign=e,this.currentEncounter=(null===(t=on[e])||void 0===t?void 0:t.startingEncounter)||void 0,this.rumorTags=[],this.resolvedTagsForBranches={};const i=(null===(a=this.currentEncounter)||void 0===a?void 0:a.branches)||[];this.resolvedTagsForBranches[this.currentEncounter.name]=[],i.forEach((e=>{this.expectedTagsForBranches[e.name]=[],this.resolvedTagsForBranches[e.name]=[]}));const l=this.expectedTagsForBranches[(null===(n=this.currentEncounter)||void 0===n?void 0:n.name)||""]||[];this.expectedTagsForBranches[(null===(r=this.currentEncounter)||void 0===r?void 0:r.name)||""]=[...l,...this.getEncounterTags()],this.validateTags((null===(s=on[e].processedEncounters)||void 0===s?void 0:s.flat())||[]),this.partyManager().setPartyTension(25),this.completedEventIndexes=[],this.displayNewEncounter(),this.emit("dmScreenUpdated",this.themeCounts)}getTagsForEncounter(e){let t=this.expectedTagsForBranches[e.name]||[],a=[...e.tags,...t];return Array.from(new Set(a))}setSessionState(e){this.encounterState={sessionState:e,eventIndex:0}}getResolvedTagsForBranch(){var e;const t=(null===(e=this.currentEncounter)||void 0===e?void 0:e.name)||"";return this.resolvedTagsForBranches[t]||[]}validateTags(e){for(let t=0;t<e.length;t++){for(let a=0;a<e[t].tags.length;a++)void 0===e[t].tags[a]&&console.error(`Encounter ${e[t].name} tag ${a} is undefined`);for(let a=0;a<e[t].location.tags.length;a++)void 0===e[t].location.tags[a]&&console.error(`Encounter ${e[t].name} location ${e[t].location.name} tag ${a} is undefined`)}}getDmLevel(){return this.dmLevel}addDmExp(e){this.dmExperience+=e,this.dmExperience>=5&&(this.dmLevel++,this.dmExperience=0),this.emit("dmScreenUpdated",this.dmExperience)}getDmExp(){return this.dmExperience}getCompletedEvents(){return this.completedEventIndexes}getEncounterAdvanceReadinessText(){var e;const t=0===this.getExpectedEncounterTags().length,a=(null===(e=this.currentEncounter)||void 0===e?void 0:e.branches)||[],n=a.some((e=>this.getExpectedTagsForBranch(e.name).length>=3)),r=a.every((e=>this.getExpectedTagsForBranch(e.name).length>=3));return t?n?r?"Players are ready to move on.":"Players are ready to move on, but feel some choices are unclear.":"Players don't have enough information to choose what to do next.":"Players will be confused. They expect more from the current encounter."}encounterEventSelected(e){void 0!==this.encounterState&&(this.completedEventIndexes.includes(e)||(this.appManager.state=aa.SESSION,this.completedEventIndexes.push(e),this.encounterState.eventIndex=e,this.appManager.getUiManager().updateEncounterState(this.encounterState)))}getEncounterState(){return this.encounterState}getCurrentEvent(){var e;if(void 0!==this.encounterState)return null===(e=this.currentEncounter)||void 0===e?void 0:e.events[this.encounterState.eventIndex]}backToOverview(){void 0!==this.encounterState&&(this.appManager.state=aa.SESSION_OVERVIEW,this.appManager.getUiManager().updateEncounterState(this.encounterState))}advanceEncounter(e){var t,a,n,r;const s=(null===(t=this.currentEncounter)||void 0===t?void 0:t.branches)||[];if(e&&s.includes(e))this.currentEncounter=e;else{const e=s.sort(((e,t)=>this.getExpectedTagsForBranch(t.name).length-this.getExpectedTagsForBranch(e.name).length))[1];this.currentEncounter=e||s[0]}this.resolvedTagsForBranches={};const i=(null===(a=this.currentEncounter)||void 0===a?void 0:a.branches)||[];this.resolvedTagsForBranches[this.currentEncounter.name]=[],i.forEach((e=>{this.expectedTagsForBranches[e.name]=[],this.resolvedTagsForBranches[e.name]=[]}));const l=this.expectedTagsForBranches[(null===(n=this.currentEncounter)||void 0===n?void 0:n.name)||""]||[];this.expectedTagsForBranches[(null===(r=this.currentEncounter)||void 0===r?void 0:r.name)||""]=[...l,...this.getEncounterTags()],this.collectedLocationTags=[],this.completedEventIndexes=[],this.displayNewEncounter(),this.emit("encounterUpdated",this.themeCounts),this.emit("dmScreenUpdated",this.themeCounts)}displayNewEncounter(){this.currentEncounter&&this.appManager.getUiManager().showBasicNotebook(u,this.currentEncounter)}}const $r=qr,es={TEAM_PLAYER:{name:"Team Player",description:"+1 to all other players happiness"},GRUMPY:{name:"Grumpy",description:"-1 to all other players happiness"},FORMER_DM:{name:"Former DM",description:"Ignores personal LIKES and HATES when choosing encounters"},MIN_MAXER:{name:"Min-Maxer",description:"Gets a bonus to Combat encounters"},ROLE_PLAYER:{name:"Role Player",description:"Gets a bonus to Social encounters"},LOGICIAN:{name:"Logician",description:"Gets a bonus to Puzzle encounters"},WEALTHY:{name:"Wealthy",description:"Gives a bonus 20% reward at the end of a Campaign if Happy"},BLOODTHIRSTY:{name:"Bloodthirsty",description:"Gets x2 happiness from Combat encounters"}},ts=[{race:St.ELF,character_class:Nt.WIZARD,abilities:[],level:1,name:"Saul",id:0,icon:"elf_1",gear:[],backstory:[{tag:{name:"Dark Gem"},completed:!1}]},{race:St.HUMAN,character_class:Nt.FIGHTER,abilities:[],level:1,name:"Riker",id:1,icon:"human_1",gear:[],backstory:[]},{race:St.HUMAN,character_class:Nt.ROGUE,abilities:[],level:1,name:"Godfrey",id:2,icon:"human_2",gear:[],backstory:[]}],as=[{name:"Matt W",characters:[ts[0]],id:0,icon:"player_1",schedule:[10,20,30,40,50,60,70],preferences:[[_a.RACE.ELVES,o.LIKE],[_a.RACE.HUMANS,o.LIKE],[_a.MONSTERS.UNDEAD,o.LIKE],[_a.GAME.EXPOSITION,o.HATE],[_a.GAME.POLITICS,o.HATE],[_a.LOCATION.BRIDGES,o.LIKE],[_a.GAME.SOCIALIZING,o.LIKE],[_a.PROPS.BEER,o.LIKE]],traits:[],playerStats:{stress:0,enjoyment:1,engagement:25,involvement:3,experience:0,level:1,maxEngagement:5,maxInvolvement:5,maxEnjoyment:5,stressBuffer:10}},{name:"Dan A",characters:[ts[1]],id:1,icon:"player_2",schedule:[10,20,30,40,50,60,70],preferences:[[_a.RACE.HALFLINGS,o.LIKE],[_a.GAME.POLITICS,o.LIKE],[_a.LOCATION.TAVERNS,o.LIKE],[_a.MONSTERS.GOBLINS,o.HATE],[_a.GAME.EXPLORATION,o.LIKE],[_a.PROPS.BEER,o.LIKE]],traits:[],playerStats:{stress:0,enjoyment:4,engagement:25,involvement:3,experience:0,level:1,maxEngagement:5,maxInvolvement:5,maxEnjoyment:5,stressBuffer:10}},{name:"Olivier B",characters:[ts[2]],id:2,icon:"player_3",schedule:[10,20,30,40,50,60,70],preferences:[[_a.RACE.DWARVES,o.LIKE],[_a.RACE.HALFLINGS,o.LIKE],[_a.GAME.PUZZLES,o.LIKE],[_a.GAME.TRAVEL,o.LIKE],[_a.GAME.SOCIALIZING,o.LIKE],[_a.GAME.BORING_THINGS,o.HATE],[_a.PROPS.BEER,o.LIKE]],traits:[es.TEAM_PLAYER],playerStats:{stress:0,enjoyment:3,engagement:25,involvement:3,experience:0,level:1,maxEngagement:5,maxInvolvement:5,maxEnjoyment:5,stressBuffer:10}}];const ns=class{constructor(e){this.recruitablePlayers=void 0,this.selectedPlayers=void 0,this.players=void 0,this.uniqueID=0,this._currentPlayerIndex=0,this.appManager=void 0,this.uiManager=void 0,this.recruitablePlayers=[],this.players=[],this.selectedPlayers=[],this.appManager=e}getCurrentPlayer(){return 0===this.players.length?void 0:this.players[this._currentPlayerIndex]}isCurrentPlayerLast(){return this._currentPlayerIndex===this.players.length-1}init(){this.uiManager=this.appManager.getUiManager(),this.generateAvailablePlayers(8)}stressPlayers(e){var t;this.players.forEach((t=>{t.playerStats.stress+=e})),null===(t=this.uiManager)||void 0===t||t.updateParty()}getRecruitablePlayers(){return this.recruitablePlayers}setSelectedPlayers(e){this.selectedPlayers=this.recruitablePlayers.filter(((t,a)=>e.includes(a)))}getPlayers(){return this.players}getSelectedPlayers(){return this.selectedPlayers}getPlayerById(e){return this.players.find((t=>t.id===e))||void 0}getSelectedPlayerIds(){return this.selectedPlayers.map((e=>e.id))}generateIcon(){return"player_"+Math.ceil(9.9*Math.random())}generateSchedule(){const e=[];for(let t=0;t<7;t++)e.push(Math.ceil(100*Math.random()));return e}generateAvailablePlayers(e){for(let t=0;t<e;t++){const e={name:Vn(!1),id:this.uniqueID++,characters:[],icon:this.generateIcon(),schedule:this.generateSchedule(),preferences:this.generatePreferences(),traits:this.generatePlayerTraits(),playerStats:{stress:50,enjoyment:3,engagement:50,involvement:3,experience:0,level:1,maxEngagement:5,maxInvolvement:5,maxEnjoyment:5,stressBuffer:10}};this.recruitablePlayers.push(e)}}getMaxCharactersPerPlayer(){return 1}acceptSelectedPlayers(){this.players=this.selectedPlayers}getPlayerWithAttitudeForTag(e,t){const a=this.players.filter((a=>a.preferences.some((a=>a[0].name===e.name&&a[1]===t))));if(a.length>0)return a[Math.floor(Math.random()*a.length)]}generatePlayerTraits(){const e=Object.values(es);if(Math.random()<.5){return[e[Math.floor(Math.random()*e.length)]]}return[]}generatePreferences(){const e=[],t=Object.values(_a).flatMap((e=>Object.values(e))),a=t.filter((e=>e.preference===i.START)),n=t.filter((e=>e.preference===i.MAIN));if(a.length>1){const t=a.splice(Math.floor(Math.random()*a.length),1)[0],n=a.splice(Math.floor(Math.random()*a.length),1)[0];e.push([t,o.LIKE]),e.push([n,o.HATE])}const r=(e,t,a,n)=>{const r=[];for(let s=0;s<t;s++){const t=e[Math.floor(Math.random()*e.length)],s=Math.floor(Math.random()*(n-a+1))+a;r.push([t,s])}return r},s=Math.floor(3*Math.random()),l=Math.floor(3*Math.random()),c=r(n,s,1,5),d=r(n,l,-5,-1);return e.push(...c),e.push(...d),e}exposeEncounterTag(e){var t;this.players.forEach((t=>{const a=t.preferences.find((t=>t[0].name===e.name));a&&(t.playerStats.enjoyment=Math.max(Math.min(t.playerStats.maxEnjoyment,t.playerStats.enjoyment+a[1]),0))})),null===(t=this.uiManager)||void 0===t||t.updateParty()}toggleSinglePlayerForCharacter(e,t){e&&(e.characters.includes(t)?this.removeCharacterFromPlayer(e,t):(this.players.forEach((e=>{e.characters.includes(t)&&this.removeCharacterFromPlayer(e,t)})),e.characters.push(t)))}getPlayerAssignedCharacter(e){let t;return this.players.forEach((a=>{a.characters.includes(e)&&(t=a)})),t}assignCharactersToPlayer(e,t){e&&t.forEach((t=>{e.characters.push(t)}))}isCharacterAssigned(e){return this.players.some((t=>t.characters.includes(e)))}removeCharacterFromPlayer(e,t){if(e){const a=e.characters.indexOf(t);a>-1&&e.characters.splice(a,1)}}aggregateSchedule(){const e=[0,0,0,0,0,0,0];return this.selectedPlayers.forEach((t=>{t.schedule.forEach(((t,a)=>{e[a]+=t/this.selectedPlayers.length,e[a]=Math.ceil(e[a])}))})),e}getGroupAttitudes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedPlayers;const t={};e.forEach((e=>{e.preferences.forEach((e=>{const a=e[0],n=e[1];if(t[a.name])switch(t[a.name]){case o.LIKE:n<0&&(t[a.name]=o.CONFLICTED);break;case o.HATE:n>0&&(t[a.name]=o.CONFLICTED)}else t[a.name]=n<0?o.HATE:o.LIKE}))}));return{likes:Object.keys(t).map((e=>t[e]===o.LIKE?e:"")).filter((e=>""!==e)),hates:Object.keys(t).map((e=>t[e]===o.HATE?e:"")).filter((e=>""!==e)),conflicted:Object.keys(t).map((e=>t[e]===o.CONFLICTED?e:"")).filter((e=>""!==e))}}getGroupAttitudeForTag(e,t){const a=this.getGroupAttitudes(e);return a.likes.includes(t.name)?o.LIKE:a.hates.includes(t.name)?o.HATE:a.conflicted.includes(t.name)?o.CONFLICTED:o.NEUTRAL}getPartyAttitudeForTag(e){return this.getGroupAttitudeForTag(this.players,e)}readyForGame(){if(0===this.players.length)return!1;let e=!0;return this.players.forEach((t=>{0===t.characters.length&&(e=!1)})),e}initiateQuickStart(){this.recruitablePlayers=this.players=as}addPlayerExp(e,t){var a;e&&(e.playerStats.experience+=t,e.playerStats.experience>=this.expNeededForLevel(e.playerStats.level)&&(e.playerStats.level+=1,e.playerStats.experience=0,console.log("player leveled up!!!!"),this.appManager.getChatManager().dmMessage(`${e.name} learned something!`),this.handleLevelUp(e)),null===(a=this.uiManager)||void 0===a||a.updateParty())}expNeededForLevel(e){return Mt[e-1]||0}getAllPlayerPreferences(){const e=[];return this.players.forEach((t=>{t.preferences.forEach((t=>{e.includes(t[0])||e.push(t[0])}))})),e}getAllPlayerCharacters(){const e=[];return this.players.forEach((t=>{t.characters.forEach((t=>{e.includes(t)||e.push(t)}))})),e}getRandomPlayer(){return this.players[Math.floor(Math.random()*this.players.length)]}getRandomCharacter(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getAllPlayerCharacters();if(0!==t.length){if(!e){const e=t.filter((e=>!("dead"===e.injury)));if(0===e.length)return;return e[Math.floor(Math.random()*e.length)]}return t[Math.floor(Math.random()*t.length)]}}getRandomCharacterForPlayer(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&0!==e.characters.length){if(!t){const t=e.characters.filter((e=>!("dead"===e.injury)));if(0===t.length)return;return t[Math.floor(Math.random()*t.length)]}return e.characters[Math.floor(Math.random()*e.characters.length)]}}refreshPlayer(e){var t;e&&(e.playerStats.involvement=e.playerStats.maxInvolvement,e.playerStats.enjoyment=e.playerStats.maxEnjoyment,e.playerStats.stress=0),null===(t=this.uiManager)||void 0===t||t.updateParty()}getPlayerLevelUpOption(e){let t;const a=Math.floor(3*Math.random())+1,n=(()=>{const e=Math.random();return e<.5?1:e<.9?2:3})(),r=1===n?"common":2===n?"rare":"legend";return t=1===a?{id:Ct.MAX_HAPPINESS,title:(1===n?"":2===n?"Better ":"Great ")+"Happiness",description:`+${n} max Enjoyment`,icon:"\ud83d\ude0a",level:n,class:r,callback:()=>{var t;e.playerStats.maxEnjoyment+=n,null===(t=this.uiManager)||void 0===t||t.updateParty()}}:2===a?{id:Ct.MAX_ATTENTION,title:(1===n?"":2===n?"Better ":"Great ")+"Attention",description:`+${n} max Attention`,icon:"\ud83e\udde0",level:n,class:r,callback:()=>{var t;e.playerStats.maxInvolvement+=n,null===(t=this.uiManager)||void 0===t||t.updateParty()}}:{id:Ct.STRESS_BUFFER,title:(1===n?"":2===n?"Better ":"Great ")+"Stress Proof",description:`+${5*n} Stress Buffer/Reduce`,icon:"\ud83d\udee1\ufe0f",class:r,callback:()=>{var t;e.playerStats.stressBuffer+=5*n,e.playerStats.stress=Math.max(0,e.playerStats.stress-5*n),null===(t=this.uiManager)||void 0===t||t.updateParty()}},t}getFancyLevelUpOption(e){const t=this.appManager.getCharacterManager().generateRandomCharacter(1);return{id:Ct.CHARACTER,title:"New Character",description:`Get ${t.name}`,icon:`${t.icon}`,class:"level-up-option-character",callback:()=>{var a;e.characters.push(t),null===(a=this.uiManager)||void 0===a||a.updateParty()}}}handleLevelUp(e){var t;const a=[];a.push({id:Ct.REFRESH,title:"Refresh",description:"Fill Attitude, Attention. Reduce Stress.",icon:"\ud83d\udd04",callback:()=>this.refreshPlayer(e)}),a.push(this.getPlayerLevelUpOption(e)),a.push(this.getFancyLevelUpOption(e)),null===(t=this.uiManager)||void 0===t||t.showModal({title:e.name+" Level Up!",options:a,onClose:()=>console.log("Modal closed"),type:"levelup"})}};const rs=class{constructor(){this.init()}init(){}startSession(){console.log("Starting session...")}};class ss extends(Nn()){constructor(e){super(),this.dataManager=void 0,this.appManager=void 0,this.characterManager=void 0,this.campaignManager=void 0,this.playerManager=void 0,this.uiManager=void 0,this.partyScore=0,this.partyTension=0,this.treasureLevel=0,this.treasurePoints=0,this.partyExhaustion=0,this.stressColors=["#FFB347","#FFDF80","#FFDF80","#B2FF66","#B2FF66","#B2FF66","#66FF66","#FF7043","#FF7043","#FF6666"],this.getTreasureReward=e=>e%2===0?{type:"attitude",value:1}:{type:"score",value:5*(e+1)},this.tensionDescriptions=[{max:10,description:"Too Low",scoreMultiplier:0,stressIncrease:0},{max:30,description:"Very Low",scoreMultiplier:.5,stressIncrease:0},{max:60,description:"Good",scoreMultiplier:1,stressIncrease:0},{max:70,description:"Perfect!",scoreMultiplier:2,stressIncrease:0},{max:90,description:"Stress",scoreMultiplier:1,stressIncrease:5},{max:100,description:"High Stress",scoreMultiplier:1,stressIncrease:10},{max:1/0,description:"Impossible",scoreMultiplier:0,stressIncrease:20}],setTimeout((()=>{this.appManager=e,this.dataManager=e.getDataManager(),this.characterManager=e.getCharacterManager(),this.campaignManager=e.getCampaignManager(),this.playerManager=e.getPlayerManager(),this.uiManager=e.getUiManager()}),0)}perceptionEventReveal(e){var t,a;const n=null===(t=this.playerManager)||void 0===t?void 0:t.getPlayers();null===n||void 0===n||n.forEach((t=>{t.characters.includes(e)?t.playerStats.engagement=Math.min(t.playerStats.maxEngagement,Math.max(t.playerStats.engagement+1,0)):t.playerStats.engagement=Math.min(t.playerStats.maxEngagement,Math.max(t.playerStats.engagement-1,0))})),null===(a=this.uiManager)||void 0===a||a.updateParty()}getPartyStrength(){var e;const t=null===(e=this.playerManager)||void 0===e?void 0:e.getPlayers();let a=0;return null===t||void 0===t||t.forEach((e=>{e.characters.forEach((e=>{e&&(a+=e.level)}))})),a}playersTakeAction(e){var t,a;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const s=null===(t=this.playerManager)||void 0===t?void 0:t.getPlayers();null===s||void 0===s||s.forEach((t=>{var a;null!==e&&void 0!==e&&e.includes(t.name)?(t.playerStats.involvement=Math.min(t.playerStats.involvement+r,t.playerStats.maxInvolvement),null===(a=this.playerManager)||void 0===a||a.addPlayerExp(t,r)):n&&this.updateAttention(t,-r)})),null===(a=this.uiManager)||void 0===a||a.updateParty()}updateAllAttention(e){var t,a;const n=null===(t=this.playerManager)||void 0===t?void 0:t.getPlayers();null===n||void 0===n||n.forEach((t=>{this.updateAttention(t,e)})),null===(a=this.uiManager)||void 0===a||a.updateParty()}updateAttention(e,t){var a;e&&(t<0&&0===e.playerStats.involvement&&(e.playerStats.enjoyment=Math.max(e.playerStats.enjoyment-1,0)),e.playerStats.involvement=Math.max(0,Math.min(e.playerStats.involvement+t,e.playerStats.maxInvolvement))),null===(a=this.uiManager)||void 0===a||a.updateParty()}multiplyPartyTension(e){var t;this.partyTension*=e,null===(t=this.uiManager)||void 0===t||t.updateParty()}addPartyTension(e){var t;this.partyTension+=e,this.partyTension>100&&(this.partyTension=100),null===(t=this.uiManager)||void 0===t||t.updateParty()}setPartyTension(e){var t;this.partyTension=e,null===(t=this.uiManager)||void 0===t||t.updateParty()}takeBreak(){var e;this.partyTension=.5*this.partyTension,this.updateAllAttention(-2),this.partyExhaustion=.5*this.partyExhaustion,this.emit("dmScreenUpdated",this.partyExhaustion),null===(e=this.uiManager)||void 0===e||e.updateParty()}getPartyExhaustion(){return this.partyExhaustion}exhaustParty(e){this.partyExhaustion+=e,this.emit("dmScreenUpdated",this.partyExhaustion)}addPartyEngagement(e){var t,a;const n=null===(t=this.playerManager)||void 0===t?void 0:t.getPlayers();null===n||void 0===n||n.forEach((t=>{t.playerStats.engagement=Math.min(t.playerStats.maxEngagement,Math.max(t.playerStats.engagement+e,0))})),null===(a=this.uiManager)||void 0===a||a.updateParty()}addPartyScore(e){var t;this.partyScore+=e*this.getTensionScoreMultiplier(),null===(t=this.uiManager)||void 0===t||t.updateParty()}getPartyScore(){return this.partyScore}addInjury(e){var t,a;if(!e)return" invalid";e.injury="injured"===e.injury?"dead":"injured";const n=null===(t=this.playerManager)||void 0===t?void 0:t.getPlayerAssignedCharacter(e);return n&&(e.injury,n.playerStats.enjoyment=Math.max(n.playerStats.enjoyment-1,0)),null===(a=this.uiManager)||void 0===a||a.updateParty(),e.injury}addEnjoyment(e,t){var a;e&&(e.playerStats.enjoyment=Math.min(e.playerStats.maxEnjoyment,Math.max(e.playerStats.enjoyment+t,0)),null===(a=this.uiManager)||void 0===a||a.updateParty())}getTreasureLevel(){return this.treasureLevel}getTreasurePoints(){return this.treasurePoints}getTreasureThreshold(e){return e+1}addTreasurePoints(e){var t;for(this.treasurePoints+=e;this.getTreasureThreshold(this.treasureLevel+1)<=this.treasurePoints;)this.treasureLevelUp(this.treasureLevel),this.treasureLevel++,this.treasurePoints=0;null===(t=this.uiManager)||void 0===t||t.updateParty()}treasureLevelUp(e){const t=this.getTreasureReward(e);if("score"===t.type)this.addPartyScore(t.value);else{var a;const e=null===(a=this.playerManager)||void 0===a?void 0:a.getPlayers();null===e||void 0===e||e.forEach((e=>{e.playerStats.enjoyment=Math.min(e.playerStats.maxEnjoyment,e.playerStats.enjoyment+t.value)}))}}addPartyEnjoyment(e){var t,a;const n=null===(t=this.playerManager)||void 0===t?void 0:t.getPlayers();null===n||void 0===n||n.forEach((t=>{t.playerStats.enjoyment=Math.min(t.playerStats.maxEnjoyment,Math.max(t.playerStats.enjoyment+e,0))})),null===(a=this.uiManager)||void 0===a||a.updateParty()}replenishTools(e,t){e.attributeLoss&&e.attributeLoss.tools&&(t||(t=e.attributeLoss.tools),e.attributeLoss.tools=Math.max(0,e.attributeLoss.tools-t),e.attributeLoss.tools=0)}replenishPartyTools(){var e,t;const a=null===(e=this.playerManager)||void 0===e?void 0:e.getPlayers();null===a||void 0===a||a.forEach((e=>{e.characters.forEach((e=>{e&&e.attributeLoss&&(e.attributeLoss.tools=0)}))})),null===(t=this.uiManager)||void 0===t||t.updateParty()}healRandomCharacter(){var e;const t=null===(e=this.playerManager)||void 0===e?void 0:e.getPlayers(),a=[];if(null===t||void 0===t||t.forEach((e=>{e.characters.forEach((e=>{e&&e.injury&&a.push(e)}))})),0===a.length)return;const n=Math.floor(Math.random()*a.length);a[n].injury=void 0}healParty(){var e,t;const a=null===(e=this.playerManager)||void 0===e?void 0:e.getPlayers();null===a||void 0===a||a.forEach((e=>{e.characters.forEach((e=>{e&&(e.injury=void 0)}))})),null===(t=this.uiManager)||void 0===t||t.updateParty()}healCharacter(e){var t;e&&(e.injury=void 0,null===(t=this.uiManager)||void 0===t||t.updateParty())}raiseRandomFromDead(){var e;const t=null===(e=this.playerManager)||void 0===e?void 0:e.getPlayers(),a=[];if(null===t||void 0===t||t.forEach((e=>{e.characters.forEach((e=>{e&&"dead"===e.injury&&a.push(e)}))})),0===a.length)return;const n=Math.floor(Math.random()*a.length);a[n].injury=void 0}replenishPartyMagic(){var e,t;const a=null===(e=this.playerManager)||void 0===e?void 0:e.getPlayers();null===a||void 0===a||a.forEach((e=>{e.characters.forEach((e=>{e&&e.attributeLoss&&(e.attributeLoss.magic=0)}))})),null===(t=this.uiManager)||void 0===t||t.updateParty()}replenishMagic(e,t){var a;e.attributeLoss&&e.attributeLoss.magic&&(t||(t=e.attributeLoss.magic),e.attributeLoss.magic=Math.max(0,e.attributeLoss.magic-t),null===(a=this.uiManager)||void 0===a||a.updateParty())}levelUpLowestCharacter(){var e;const t=null===(e=this.playerManager)||void 0===e?void 0:e.getPlayers();let a,n=100;null===t||void 0===t||t.forEach((e=>{e.characters.forEach((e=>{e&&e.level<n&&(n=e.level,a=e)}))})),a&&(a.level+=1)}levelUp(e){e&&(e.level+=1)}stressAction(e){var t,a;const n=null===(t=this.playerManager)||void 0===t?void 0:t.getPlayers(),r=this.getStressIncrease(this.partyTension)||0;null===n||void 0===n||n.forEach((t=>{e&&!e.includes(t)||(t.playerStats.stress=Math.min(100,t.playerStats.stress+r))})),null===(a=this.uiManager)||void 0===a||a.updateParty()}generateHeroes(e){var t;const a=[];e.forEach((e=>{const t={npcTag:e,icon:`combat_${e.name}`,name:e.name};a.push(t)}));const n=null===(t=this.characterManager)||void 0===t?void 0:t.getPlayerCharacters();return null===n||void 0===n||n.forEach((e=>{const t={character:e,icon:e.icon,name:e.name};a.push(t)})),a}getPartyTension(){return this.partyTension}getTensionScoreMultiplier(){for(const e of this.tensionDescriptions)if(this.partyTension<=e.max)return e.scoreMultiplier;return 0}getTensionDescription(e){for(const t of this.tensionDescriptions)if(e<=t.max)return t.description;return"Unknown Tension"}getTensionDescription2(e){let t=0;for(const a of this.tensionDescriptions)if(e<=a.max){t=a.scoreMultiplier;break}return 0===t?"none":.5===t?"1/2":1===t?"normal":`x${t}`}getScoreMultiplier(e){for(const t of this.tensionDescriptions)if(e<=t.max)return t.scoreMultiplier}getStressIncrease(e){for(const t of this.tensionDescriptions)if(e<=t.max)return t.stressIncrease;return 0}getStressColors(){return this.stressColors}}const is=ss;class ls extends Sn.EventEmitter{constructor(e){super(),this.appManager=void 0,this.playerManager=void 0,this.characterManager=void 0,this.renderImageForEvent=!0,this.eventImageOpacity=0,this.activeModal=null,this.init(),this.appManager=e,this.playerManager=this.appManager.getPlayerManager(),this.characterManager=this.appManager.getCharacterManager()}showModal(e){this.activeModal=e,this.emit("modalStateChanged",this.activeModal)}closeModal(){var e;null!==(e=this.activeModal)&&void 0!==e&&e.onClose&&this.activeModal.onClose(),this.activeModal=null,this.emit("modalStateChanged",null)}handleModalOptionSelected(e){var t;const a=null===(t=this.activeModal)||void 0===t?void 0:t.options.find((t=>t.id===e));a&&(a.callback(),this.closeModal())}closeNotebook(){this.emit("setNotebookState",void 0)}closeTutorial(){this.closeNotebook()}updateEncounterState(e){this.emit("updateEncounterState",e)}showNotebook(e){this.emit("setNotebookState",e)}removePlayer(e){this.emit("removePlayer",e)}getEventIcon(e){return`event_${e}`}showTutorialPage(e){this.emit("setTutorialPage",e)}changeEventTimer(e){this.emit("setupTimeChange",e)}showRewardModal(e,t){this.emit("showRewardModal",e,t)}toggleImageForEvent(){this.renderImageForEvent=!this.renderImageForEvent,this.emit("eventUpdated")}getMessageIconId(e){let t;switch(e.type){case N.PLAYER:t=this.playerManager.getRecruitablePlayers()[e.id].icon;break;case N.CHARACTER:t=this.characterManager.getCharacterById(e.id).icon;break;case N.DM:t="chat_dm";break;case N.HELPER:default:t="chat_imp"}return t}getMessageSpeakerName(e){let t;switch(e.type){case N.PLAYER:t=this.playerManager.getRecruitablePlayers()[e.id].name;break;case N.CHARACTER:t=this.characterManager.getCharacterById(e.id).name;break;case N.DM:t="You";break;case N.HELPER:default:t="Impy"}return t}getShortenedName(e){return e.split(" ").map((e=>e[0])).join("")}showImageForEvent(){return this.renderImageForEvent}setEventImageOpacity(e){this.eventImageOpacity=e,this.emit("eventUpdated")}getEventImageOpacity(){return this.eventImageOpacity}getHeroFirstName(e){return e.split(" ")[0]}showBasicNotebook(e,t){let a,n="",r=[];switch(e){case m:a={character:t},n=a.character.name;let e=this.playerManager.getPlayerAssignedCharacter(a.character);e&&r.push({category:g,content:{player:e,message:""},title:e.name});break;case h:a={location:t},n=a.location.name;break;case u:a={encounter:t},n=a.encounter.name,r.push({category:h,content:{location:a.encounter.location},title:a.encounter.location.name});break;case g:a={player:t},n=a.player.name,a.player.characters.forEach((e=>{r.push({category:m,content:{character:e,message:""},title:e.name})}));break;default:return void console.error("BAD SHOW BASIC NOTEBOOK CALLED")}const s={category:e,content:a,title:n};r.length>0?this.showNotebook([s,...r]):this.showNotebook([s])}showTutorialMessage(e){const t={category:f,content:{message:e.content[0],showNext:e.content.length>1?1:void 0,icon:e.icons?e.icons[0]:void 0,title:e.title},title:e.title},a=e.content.slice(1).map(((t,a)=>({category:f,content:{message:t,showNext:a<e.content.length-2?a+2:void 0,showPrev:a,icon:e.icons?e.icons[a+1]:void 0,title:e.title},title:e.title})));a.length>0?this.showNotebook([t,...a]):this.showNotebook([t])}getPlayerAttitudesStyle(e){switch(this.playerManager.getGroupAttitudeForTag(this.playerManager.getPlayers(),e)){case o.LIKE:return"player-like";case o.CONFLICTED:return"player-conflicted";case o.HATE:return"player-hate";default:return""}}updateParty(){this.emit("playerUpdate")}showAcceptCampaignModal(e){console.log("showing accept campaign modal...")}init(){console.log("init uiManager...")}update(e){}static getPlayerEmail(e){const t=this.hashString(e),a=this.seededRandom(t);return`${e.replace(" ",".").toLowerCase()}${this.randomDigit(a)}${this.randomDigit(a)}${this.randomDigit(a)}@gmail.com`}static getPlayerPhone(e){const t=this.hashString(e),a=this.seededRandom(t);return`(${this.randomDigit(a)}${this.randomDigit(a)}${this.randomDigit(a)}) ${this.randomDigit(a)}${this.randomDigit(a)}${this.randomDigit(a)}-${this.randomDigit(a)}${this.randomDigit(a)}${this.randomDigit(a)}${this.randomDigit(a)}`}static hashString(e){let t=0;for(let a=0;a<e.length;a++){t=(t<<5)-t+e.charCodeAt(a),t|=0}return t}static seededRandom(e){return function(){const t=1e4*Math.sin(e++);return t-Math.floor(t)}}static randomDigit(e){return Math.floor(10*e())}}const os=ls;const cs=class{getGraph(){return this.campaignGraph}constructor(e){this.campaignGraph=void 0,this.stateConfigs=new Map,this.appManager=void 0,this.appManager=e,this.init()}init(){this.campaignGraph=new s,this.initStates(),console.log("init dataManager...")}getStateProps(e){var t;return null!==(t=this.stateConfigs.get(e||this.appManager.state))&&void 0!==t?t:na}initStates(){this.stateConfigs.set(aa.MAIN_MENU,{...na,...ra[aa.MAIN_MENU]}),this.stateConfigs.set(aa.CAMPAIGN_SETUP,{...na,...ra[aa.CAMPAIGN_SETUP]}),this.stateConfigs.set(aa.PLAYER_RECRUITMENT,{...na,...ra[aa.PLAYER_RECRUITMENT]}),this.stateConfigs.set(aa.CHARACTER_CREATION,{...na,...ra[aa.CHARACTER_CREATION]}),this.stateConfigs.set(aa.SESSION_OVERVIEW,{...na,...ra[aa.SESSION_OVERVIEW]}),this.stateConfigs.set(aa.SESSION,{...na,...ra[aa.SESSION]}),this.stateConfigs.set(aa.SCORE,{...na,...ra[aa.SCORE]})}};const ds=class{constructor(e){this.characters=void 0,this.uniqueID=0,this.selectedCharacters=void 0,this.appManager=void 0,this.getUFClass=e=>{switch(e){case Nt.CLERIC:return"Cleric";case Nt.DRUID:return"Druid";case Nt.FIGHTER:return"Fighter";case Nt.PALADIN:return"Paladin";case Nt.ROGUE:return"Rogue";case Nt.WIZARD:return"Wizard";default:return"Unknown"}},this.getUFRace=e=>{switch(e){case St.HUMAN:return"Human";case St.ELF:return"Elven";case St.DWARF:return"Dwarven";case St.HALFLING:return"Halfling";case St.HALF_ELF:return"Half-Elf";case St.HALF_ORC:return"Half-Orc";default:return"Unknown"}},this.getUFAttributeName=e=>{switch(e){case c.COMBAT:return"Combat";case c.MAGIC:return"Magic";case c.TOOLS:return"Tools";default:return"Unknown"}},this.getUFAttributeSymbol=e=>{switch(e){case c.COMBAT:return"\u2694\ufe0f";case c.MAGIC:return"\u2728";case c.TOOLS:return"\ud83d\udd27";default:return"\u2753"}},this.getUFInitials=e=>e.name.split(" ").map((e=>e[0])).join(""),this.characters=[],this.selectedCharacters=[],this.appManager=e}init(){this.generateRandomCharacters(12)}getCharacters(){return this.characters}getPlayerCharacters(){return this.appManager.getPlayerManager().getPlayers().flatMap((e=>e.characters))}setSelectedCharacters(e){this.selectedCharacters=this.characters.filter(((t,a)=>e.includes(a))).map((e=>e.id))}getCharacterByIndex(e){return this.characters[e]}getCharacterById(e){return this.characters.find((t=>t.id===e))||this.characters[0]}getCharacterReferences(){return this.characters}setAttributeUsed(e,t,a){e.attributeLoss||(e.attributeLoss={}),e.attributeLoss[t]=(e.attributeLoss[t]||0)+a}useHalfRemainingAttributes(e,t){var a;const n=oa(e)[t]-((null===(a=e.attributeLoss)||void 0===a?void 0:a[t])||0),r=n-Math.floor(n/2);return this.setAttributeUsed(e,t,r),r}getRemainingAttributes(e,t){var a;return(oa(e)[t]||0)-((null===(a=e.attributeLoss)||void 0===a?void 0:a[t])||0)}getSelectedCharacters(){return this.selectedCharacters}getRandomRace(){const e=Object.values(St);return e[Math.floor(Math.random()*e.length)]}getRandomClass(){const e=Object.values(Nt);return e[Math.floor(Math.random()*e.length)]}getRandomIconNumber(){return Math.floor(2*Math.random())+1}getRandomIcon(e){switch(e){case St.DWARF:return"dwarf_"+this.getRandomIconNumber();case St.ELF:return"elf_"+this.getRandomIconNumber();case St.HUMAN:return"human_"+this.getRandomIconNumber();case St.HALF_ORC:return"halfOrc_"+this.getRandomIconNumber();case St.HALF_ELF:return"halfElf_"+this.getRandomIconNumber();case St.HALFLING:return"halfling_"+this.getRandomIconNumber();default:return"human_"+this.getRandomIconNumber()}}generateStartingGear(){switch(Math.floor(6*Math.random())){case 0:return[sa.SWORD_1];case 1:return[sa.WAND_5];case 2:return[sa.HELPFUL_IMP];default:return[]}}getRandomGear(){const e=Object.keys(sa),t=Math.floor(Math.random()*e.length);return sa[e[t]]}assignGear(e,t){void 0===sa[t]&&(console.error("Gear not found: "+t),t=Object.keys(sa).find((e=>sa[e].name===t))||"");const a=sa[t];a?e.gear.push(a):console.error("Gear not found: "+t)}getAllExpectedBackstoryTags(){const e=this.characters.flatMap((e=>e.backstory.filter((e=>!e.completed)).map((e=>e.tag))));return[...new Set(e)]}getCharactersWithBackstoryTag(e){return this.characters.filter((t=>t.backstory.some((t=>t.tag===e))))}assignBackstory(e,t){const a=e.backstory.find((e=>e.tag===t));if(a)a.completed=!0,this.appManager.getPartyManager().addPartyScore(Yn);else{const a={tag:t,completed:!1,description:void 0};e.backstory.push(a)}}generateRandomCharacter(e){return this.generateSingleCharacter(e||1)}generateSingleCharacter(e){const t=this.getRandomClass(),a=this.getRandomRace();return{name:Vn(!0),race:a,character_class:t,level:e||1+Math.floor(4*Math.random()),icon:this.getRandomIcon(a),abilities:[],id:this.uniqueID++,gear:this.generateStartingGear(),backstory:[]}}generateRandomCharacters(e,t){for(let a=0;a<e;a++)this.characters.push(this.generateSingleCharacter(t||1))}generateNPC(e){return{race:St.NPC,character_class:Nt.NPC,abilities:[],level:1,name:e.name,id:this.uniqueID++,icon:`combat_${e.name}`,gear:[],backstory:[]}}initiateQuickStart(){this.characters=ts}},us={MAIN_MENU:{title:"Welcome to Dungeon Master Simulator!",content:[{withHTML:"\n        <h1>Welcome!</h1>\n        <p>Thanks for trying out my game, the latest version is version 0.0.1 from Dec 22, 2024. It is still very much in the early stages.<br><br>This is a game about running a fantasy-tabletop RPG. Instead of exploring, adventuring, and conquering, this is a game about scheduling players, designing balanced encounters, managing potential branches in storylines, and above all keeping your players happy!</p>\n        <p>At the moment the only things available are:</p>\n        <ul>\n            <li>Player Recruitment</li>\n            <li>Character Assignment</li>\n            <li>Campaign Selection</li>\n        </ul>\n        <p> Get started by going to Player Recruitment</p>\n        <br>\n        <h1>COMING SOON</h1>\n        <ul>\n            <li>Player chatter / message system</li>\n            <li>Campaign settings / launch game</li>\n        </ul>\n         <h1>COMING LATER</h1>\n          <ul>\n            <li>Rest of game</li>\n        </ul>\n    "}.withHTML],icons:["tutorial_mascot","tutorial_mascot","tutorial_mascot"]},PLAYER_RECRUITMENT:{title:"Player Recruitment",content:["\n        <h1>PLAYERS</h1>\n        <p>Players are your clients. After a successful campaign, they will reward you with money and respect. You'll want to recruit players with similar, or complimentary preferences (LIKES/HATES), as well as making sure their schedules are compatible.<br><br>To see a player's preferences, hover over the red or green dots on their player card. When you click a player it will be added to the group, and you will see the player's preferences added to the notebook on the left. The notebook will also contain a page for each player.</p>\n        <p>I think three players is a good number to go for. I have a feeling the game will be more difficult to play with more players - as keeping them all happy and juggling other game elements with high player-counts may prove difficult. having more players would also logically lead to getting paid more at the end of the campaign so it could be a nice synergy of difficulty and reward scaling on its own.</p>\n        \n        <br>","\n        <h1>Notes</h1>\n        <ul>\n            <li>I have a new design for the player-cards in mind. I realize they are very busy now.</li>\n            <li>Im not sure how scheduling will work out in the game. Im hesitant to remove it because it provides a bit of a counter to simply matching LIKES/HATES of players. Im thinking that a better-schedule might impact some elements of the actual gameplay later on, even if it's just a points-multiplier at the end if you have a good schedule-synergy...give me ideas!</li>\n            <li>I'm thinking of adding more player-stats. Things like stamina, or focus, which would come into play during sessions. Some players may tolerate certain gameplay elements outside of simply liking/hating based on the metadata tags. \n        </ul>\n        <p>Once you have some Players, head over to Character Assignment to assign them some characters.</p>\n    "],icons:["tutorial_mascot","tutorial_mascot"]},CHARACTER_CREATION:{title:"Character Creation",content:["\n        <h1>CHARACTERS</h1>\n        <p>Characters are what you are probably used to in a game. These are the wizards, fighters, elves, dwarves, etc.. Characters are assigned to Players. At the moment, there is a four Character limit for each player, and I feel like that's a lot. Im not sure what the tradeoff is in the Player:Character ratio though.</p>\n        <br>The Character stats are about as far into the 'game within the game' as I'd like to get. Id like for there to be some simple mechanics that can be used to make these stats important or fun though.</p>\n        <p>I'm also not sure what the limit should be for a player to have a higher level character. As a Dungeon Master, having higher level characters at your table isn't a reward in itself, but it might be a fun element of progression in the game. As you get to know your players and play with them over multiple campaigns, maybe the same would be true with the Characters.</p>\n        <p>Once you have some Characters, head over to Campaign Setup to start a campaign.</p>\n    "],icons:["tutorial_mascot"]},CAMPAIGN_SETUP:{title:"Campaign Setup",content:["\n    <h1>Campaigns</h1>\n    <p>Campaigns are the storyline of the game you are presenting to your players. A Campaign is composed of a series of events, called 'encounters'.\n    <br>Encounters all have different features, including a Location and some number of characteristics. For example, an encounter called 'Goblin Ambush' may feature a Location 'Forest' and have characteristics like 'goblins', 'combat', forest', 'wilderness', 'night', etc.. Any of which may be things certain players prefer (or prefer to avoid!)\n    <p>During the encounter, the players will uncover the different features and react to them based on their preferences. They will also be uncovering information about the <i>upcoming<i> encounters. This will then lead to the players choosing which branching encounter to go to next. Some encounters may be more rewarding than others, so there will be ways to try and 'steer' the player's decisions, but there will still be an element of randomness, and if you try to put too much emphasis on ONE encounter over the others there will be some penalty.</p>\n    ","\n        <h1>Notes</h1>\n        <ul>\n            <li>I actually really like the design of this screen. I'd like to achieve this level of style in the rest of the game.</p> \n            <li>Making the encounters is pretty fun too. I like being able to tell the idea of a story - it allows for so much potential in terms of the details that could all <i>possibly</i> exist. \n            <li>I plan to make the actual CREATING of campaigns, encounters, and location possible. I find the idea of making an in-game editor a bit daunting, to be honest so I'll probably circle back to that closer to the end of the first full version of this game.</li>\n        \n        </ul>\n"],icons:["tutorial_mascot","tutorial_mascot"]}};class hs extends Sn.EventEmitter{constructor(e){super(),this.appManager=void 0,this.uiManager=void 0,this.seenTutorials=new Set,this.turnOffTutorials=!1,this.appManager=e,this.uiManager=this.appManager.getUiManager(),this.seenTutorials=new Set}startTutorial(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.turnOffTutorials||this.seenTutorials.has(e)&&!t||this.uiManager.showTutorialMessage(us[e])}disableTutorial(){this.turnOffTutorials=!0}}const ms=hs;class gs extends(Nn()){constructor(e){super(),this.appManager=void 0,this.playerManager=void 0,this.characterManager=void 0,this.conversations={WELCOME_CONVERSATION:[{message:"Hello everyone, welcome to the game.",speaker:{type:N.DM,id:0}},{message:"Hello!",speaker:{type:N.PLAYER,id:0}},{message:"Have a seat and grab some snacks. I'm just looking over my notes and we will start in a moment.",speaker:{type:N.DM,id:0}},{message:"Can I sit here?",speaker:{type:N.PLAYER,id:1}},{message:"Where are the snacks?",speaker:{type:N.PLAYER,id:2}},{message:"Everyone settled? We start in the Village of Fairlight...",speaker:{type:N.DM,id:0}}]},this.appManager=e,this.playerManager=this.appManager.getPlayerManager(),this.characterManager=this.appManager.getCharacterManager()}fireNewChatMessage(e){if(Array.isArray(e))this.launchNewConversation(e);else{if("string"===typeof e&&(e={message:e,speaker:{type:N.DM,id:0}}),e.speaker.type===N.PLAYER){this.characterManager.getCharacterById(e.speaker.id)||(e.speaker.id=this.playerManager.getRandomPlayer().id)}if(e.speaker.type===N.CHARACTER){if(!this.characterManager.getCharacterById(e.speaker.id))return void console.error("Character not found: ",e.speaker.id)}else if(e.speaker.type===N.PLAYER){if(!this.playerManager.getPlayerById(e.speaker.id))return void console.error("Player not found: ",e.speaker.id)}this.emit("chat-message",e)}}triggerConversation(e,t){100*Math.random()<t&&this.launchNewConversationById(e)}playerMessage(e,t){let a;a=Array.isArray(e)?e[Math.floor(Math.random()*e.length)]:e;const n=null!==t&&void 0!==t?t:this.playerManager.getRandomPlayer().id,r={message:a,speaker:{type:N.PLAYER,id:n}};this.fireNewChatMessage(r)}dmMessage(e){let t;t=Array.isArray(e)?e[Math.floor(Math.random()*e.length)]:e;const a={message:t,speaker:{type:N.DM,id:0}};this.fireNewChatMessage(a)}launchNewConversationById(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const a=this.conversations[e];a?a.forEach(((e,a)=>{setTimeout((()=>{this.fireNewChatMessage(e)}),a*t)})):console.error("Conversation not found: ",e)}launchNewConversation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;e.forEach(((e,a)=>{setTimeout((()=>{this.fireNewChatMessage(e)}),a*t)}))}startSessionEvent(){this.launchNewConversationById("WELCOME_CONVERSATION",3e3)}perceptionEvent(e,t){let a="",n=!1;if(t.tags.forEach((e=>{this.expectedTagResolved(e.tag)&&(n=!0)})),n)return;switch(t.type){case C.CURRENT_LOCATION:a=`${t.tags[0].tag.name}? Pretty much what I would expect from a ${t.name}.`;break;case C.BRANCH_LOCATION:a=`Hmm. Sounds like we know where to look for ${t.tags[0].tag.name}...`;break;case C.CHARACTER_BACKSTORY:a="OH. MY. GOSH.";break;case C.CHARACTER_BACKSTORY_PROGRESS:a=`AT LAST! My character has been searching for ${t.tags[0].tag.name}.`;break;case C.MAGIC_ITEM:a="Magic item? I'm intrigued.";break;case C.PLOT_HOOK:const n=[{message:"I have a feeling this is going to be important",speaker:{type:N.PLAYER,id:e.id}},{message:"... in a few months.",speaker:{type:N.PLAYER,id:this.playerManager.getRandomPlayer().id}}];return void this.launchNewConversation(n)}const r={message:a,speaker:{type:N.PLAYER,id:e.id}};this.fireNewChatMessage(r)}chance(e){return 100*Math.random()<e}getThemePostFix(e){switch(e.theme){case"comedic":return" in a comedic way";case"heroic":return" in a heroic way";case"serious":return" in a serious way";case"dramatic":return" in a dramatic way";case"grim":return" in a grim way";case"romantic":return" in a romantic way";case"fantasy":return" in a fantasy way";case"horror":return" in a horror way"}return""}roleplayingEvent(e){if("character"===e.type){const t=e.character;return void this.dmMessage(`We are going to focus on ${t.name} for a while...`)}if("treasure"===e.type)return void this.dmMessage("You guys discover.... some treasure!");if("dmpoint"===e.type)return void this.dmMessage("Something just clicked for me! Im getting better at this...");const t=e.tag;if(!t)return void console.error("No tag found for roleplaying event");let a=this.playerManager.getRandomPlayer(),n=this.appManager.getCampaignManager(),r="maxim broke something, haha",s=a.id,i=N.PLAYER;if(this.chance(50)&&n.isMagicItemRumor(t.tag.name))return void this.magicItemConversation(t.tag.name,a.id);if(this.chance(50)&&"none"!==t.theme)return void this.themeConversation(t,a.id);const l=this.playerManager.getPlayers();if(n.getOutstandingBackstoryTags().includes(t.tag)){const e=this.characterManager.getCharactersWithBackstoryTag(t.tag)[0];a=this.playerManager.getPlayerAssignedCharacter(e)||a,r=`${e.name} was looking for ${t.tag.name}!`}else if(this.chance(50)&&this.playerManager.getGroupAttitudeForTag(l,t.tag)!==o.NEUTRAL){if(this.playerManager.getGroupAttitudeForTag(l,t.tag)===o.HATE)a=this.playerManager.getPlayerWithAttitudeForTag(t.tag,o.HATE),r=`Ick. ${t.tag.name}.`;else if(this.playerManager.getGroupAttitudeForTag(l,t.tag)===o.LIKE)a=this.playerManager.getPlayerWithAttitudeForTag(t.tag,o.LIKE),r=`Oooh, I like ${t.tag.name}.`;else if(this.playerManager.getGroupAttitudeForTag(l,t.tag)===o.CONFLICTED){var c,d,u;a=this.playerManager.getPlayerWithAttitudeForTag(t.tag,o.LIKE);let e=this.playerManager.getPlayerWithAttitudeForTag(t.tag,o.HATE),n=null!==(c=null===(d=a)||void 0===d?void 0:d.id)&&void 0!==c?c:0,r=null!==(u=null===e||void 0===e?void 0:e.id)&&void 0!==u?u:0;const s=[{message:`Ugh. I'm sick of ${t.tag.name}!`,speaker:{type:N.PLAYER,id:r}},{message:`...I like ${t.tag.name}.`,speaker:{type:N.PLAYER,id:n}}];return void this.launchNewConversation(s)}}else switch(Math.floor(7*Math.random())){case 0:r=`What do we think about ${t.tag.name}?`;break;case 1:r=`You remember something about ${t.tag.name} ...`,i=N.DM;break;case 2:r=`I was hoping ${t.tag.name} would come up!`;break;case 3:r=`Can ${t.tag.name} be important?`;break;case 4:r=`${t.tag.name}? ok.`;break;case 5:r=`${t.tag.name} reminds me of gob${t.tag.name}lins.`;break;case 6:r=`You overhear someone talking about ${t.tag.name}.`,i=N.DM}const h={message:r,speaker:{type:i,id:s}};this.fireNewChatMessage(h)}expectedTagResolved(e){const t=this.appManager.getCampaignManager().getEncounterChatTriggers(),a=null===t||void 0===t?void 0:t[e.name];return!!a&&(this.fireNewChatMessage(a),!0)}triggerAddRandomTagToEncounterConversation(e,t){const a=[[{message:`Thinking: "Hmmm....should I add ${e.name} to the ${t.name} encounter....?"`,speaker:{type:N.DM,id:0}},{message:"Hey!...why are you so quiet? What are you thinking about?",speaker:{type:N.PLAYER,id:this.playerManager.getRandomPlayer().id}},{message:`Oh, nothing...just thinking about how much you guys are going to love ${e.name} if you go to ${t.location.name}...`,speaker:{type:N.DM,id:0}}],[{message:`Why do I get the feeling we will find ${e.name} at ${t.location.name}?`,speaker:{type:N.PLAYER,id:this.playerManager.getRandomPlayer().id}},{message:"Yeah, sure. Why not?",speaker:{type:N.DM,id:0}},{message:`You shrewdly devise that you will find ${e.name} at ${t.location.name}...`,speaker:{type:N.DM,id:0}}],[{message:`Going off-script here - but I think it will be fun to have ${e.name} involved with the events at ${t.location.name}...`,speaker:{type:N.DM,id:0}}],[{message:`I bet ${e.name} will be at ${t.location.name}!`,speaker:{type:N.PLAYER,id:this.playerManager.getRandomPlayer().id}},{message:"Why? I don't think I ever indicated that th-",speaker:{type:N.DM,id:0}},{message:`Oh man! I bet you're right! If we get to ${t.location.name} we are sure to find ${e.name}!`,speaker:{type:N.PLAYER,id:this.playerManager.getRandomPlayer().id}}]],n=a[Math.floor(Math.random()*a.length)];this.launchNewConversation(n)}magicItemConversation(e,t){const a=[{message:`Behold....the ${e}...`,speaker:{type:N.PLAYER,id:t}},{message:"Say it in-character",speaker:{type:N.DM,id:this.playerManager.getRandomPlayer().id}},{message:`Behold....the ${e}...`,speaker:{type:N.CHARACTER,id:t}}];this.launchNewConversation(a)}townEvent(e,t,a){if(!e)return void console.error("No tag found for roleplaying event");let n=this.playerManager.getPlayerAssignedCharacter(t)||this.playerManager.getRandomPlayer(),r=this.appManager.getCampaignManager(),s="maxim broke something, haha",i=n.id,l=N.PLAYER;if(this.chance(100)&&r.isMagicItemRumor(e.tag.name))return void this.magicItemConversation(e.tag.name,n.id);if(this.chance(50)&&"none"!==e.theme)return void this.themeConversation(e,n.id);if(r.getOutstandingBackstoryTags().includes(e.tag)){const t=this.characterManager.getCharactersWithBackstoryTag(e.tag)[0];n=this.playerManager.getPlayerAssignedCharacter(t)||n,s=`${t.name} never expected to find ${e.tag.name} in a ${a.name}!`}else switch(Math.floor(7*Math.random())){case 0:s=`${e.tag.name}... at ${a.name}?`;break;case 1:s=`${e.tag.name} is clear when you arrive at ${a.name}.`,l=N.DM;break;case 2:s=`Why would ${e.tag.name} be anywhere near ${a.name}?`;break;case 3:s=`Hmmm.... ${e.tag.name}?`;break;case 4:s=`${e.tag.name}...${a.name}...`;break;case 5:s=`${e.tag.name} is a strange thing to find at ${a.name}.`;break;case 6:s=`You overhear someone talking about ${e.tag.name}.`,l=N.DM}const o={message:s,speaker:{type:l,id:i}};this.fireNewChatMessage(o)}themeConversation(e,t){let a="",n=t,r=N.PLAYER;switch(e.theme){case"comedic":a=`Heheh..."${e.tag.name}"`;break;case"grim":a=`I need to tell you something disturbing about ${e.tag.name}.`,r=N.DM;break;case"fantasy":a=`I sometimes daydream about ${e.tag.name}.`;break;case"heroic":a=`Yeah! ${e.tag.name}!!!`,r=N.CHARACTER;break;case"horror":a=`A chill descends on the party as they think about ${e.tag.name}.`,r=N.DM;break;case"romantic":a=`OOoooooOOOoo ${e.tag.name}. Kissy kissy!`;break;case"serious":a=`We should focus on ${e.tag.name}.`;break;case"dramatic":a=`BEHOLD! ${e.tag.name}!!!`,r=N.CHARACTER}const s={message:a,speaker:{type:r,id:n}};this.fireNewChatMessage(s)}sayCombatModifiedMessage(e,t,a,n){let r="";r="DM"===t.name?"heroes"===e?`The ${a.name} are not as strong as you first thought...`:`Oops, the ${a.name} have more HP than regular...`:n<0?`Nevermind about the ${t.name}...`:"heroes"===e?t.enemy||t.friendly?`Some ${t.name} are distracting the ${a.name}!`:`The ${a.name} get stuck trying to avoid the ${t.name}.`:t.enemy||t.friendly?`The ${a.name} seem to have some ${t.name} on their side...`:`The ${a.name} use the ${t.name} to their advantage.`;const s={message:r,speaker:{type:N.DM,id:0}};this.fireNewChatMessage(s)}combatIntroMessage(e){const t=this.playerManager.getGroupAttitudeForTag(this.playerManager.getPlayers(),e);let a="",n=this.playerManager.getRandomPlayer();t===o.LIKE?(a=`Yay! ${e.name} are my favorite!`,n=this.playerManager.getPlayerWithAttitudeForTag(e,o.LIKE)||n):t===o.HATE?(n=this.playerManager.getPlayerWithAttitudeForTag(e,o.HATE)||n,a=`Ugh. I hate ${e.name}. Why do we even have them in the game?`):t===o.CONFLICTED?(a=`Well, I know some people don't like ${e.name}, but I like em.`,n=this.playerManager.getPlayerWithAttitudeForTag(e,o.LIKE)||n):a=`I figured we'd fight ${e.name} eventually.`;const r={message:a,speaker:{type:N.PLAYER,id:n.id}};this.dmMessage("You guys enter combat with some "+e.name),setTimeout((()=>{this.fireNewChatMessage(r)}),5e3)}}const ps=gs;const fs=class{constructor(e){this.appManager=void 0,this.partyManager=void 0,this.playerManager=void 0,this.campaignManager=void 0,this.appManager=e,this.partyManager=this.appManager.getPartyManager(),this.playerManager=this.appManager.getPlayerManager(),this.campaignManager=this.appManager.getCampaignManager()}getTagsForBuilding(e){let t=[...e.tags];if(e.addFriendlyTags){const e=this.campaignManager.getRandomFriendlyTags(1);t=[...t,...e]}if(e.allowMagicItems){const e=this.campaignManager.getRandomMagicItemTag(1);t=[...t,...e]}const a=this.campaignManager.getExpectedEncounterTags(),n=this.campaignManager.getOutstandingLocationTags(),r=this.campaignManager.getUpcomingEncounterTags(),s=this.campaignManager.getOutstandingBackstoryTags(),i=(e.nbTags||5)-t.length,l=[...a,...n,...r,...s],o=new Set(t);for(;o.size<i&&o.size<l.length;){const e=l[Math.floor(Math.random()*l.length)];o.add(e)}let c=[];return o.forEach((e=>{c.push({tag:e,source:this.campaignManager.getFormattedSource(e,x.ALL),theme:this.campaignManager.getTheme()})})),c}townBuildingAssigned(e,t){const a=this.playerManager.getPlayerAssignedCharacter(e);a&&(this.partyManager.playersTakeAction([a.name],!0,1),this.partyManager.stressAction([a])),this.appManager.getChatManager().playerMessage(`${e.name} will head towards the ${t.building.name}`,null===a||void 0===a?void 0:a.id)}townBuildingResolved(e,t,a){t.tags,this.playerManager.getPlayerAssignedCharacter(e);t.effects.forEach((a=>{this.applyBuildingEffect(a,e,t)})),t.positionEffects[a].forEach((a=>{this.applyBuildingEffect(a,e,t)})),t.capacity=0}applyBuildingEffect(e,t,a){if(!e.chance||100*Math.random()<e.chance)switch(e.type){case R.HEAL:this.partyManager.healCharacter(t);break;case R.INJURE:this.partyManager.addInjury(t);break;case R.ADD_TENSION:this.partyManager.addPartyTension(e.value);break;case R.REPLENISH_MAGIC:this.partyManager.replenishMagic(t,e.value);break;case R.ADD_REWARDS:this.appManager.getUiManager().showRewardModal(e.value,!1);break;case R.REPLENISH_TOOLS:this.partyManager.replenishTools(t,e.value);break;case R.RESURRECT:this.partyManager.healCharacter(t);break;case R.USE_TOOLS:this.appManager.getCharacterManager().setAttributeUsed(t,c.TOOLS,e.value);break;case R.USE_MAGIC:this.appManager.getCharacterManager().setAttributeUsed(t,c.MAGIC,e.value);break;case R.ADD_DM_POINT:this.campaignManager.addDmExp(e.value);break;case R.ADD_PLAYER_POINT:const a=this.playerManager.getPlayerAssignedCharacter(t);this.playerManager.addPlayerExp(a,e.value);break;case R.ADD_TREASURE:this.partyManager.addTreasurePoints(e.value);break;case R.ADD_SCORE:this.partyManager.addPartyScore(e.value);break;case R.ADD_ENJOYMENT:this.partyManager.addPartyEnjoyment(e.value)}}};const vs=class{constructor(e,t,a){this.campaignManager=void 0,this.playerManager=void 0,this.chatManager=void 0,this.playerManager=t,this.chatManager=a,this.campaignManager=e}getTooltipText(e){let t="";if(e.tag){if(this.campaignManager.getCampaignTooltipForTag(e.tag))return this.campaignManager.getCampaignTooltipForTag(e.tag);const a=e.tag,n=this.playerManager.getPartyAttitudeForTag(a.tag);switch(a.source){case x.LOCATION:switch(Math.floor(2*Math.random())){case 0:t=`The players interact with ${a.tag.name}`;break;case 1:t=`You describe some nearby ${a.tag.name}`}break;case x.FORESHADOWING:t=n===o.LIKE?`Some players will be happy to know that ${a.tag.name} seems to be part of an upcoming encounter`:n===o.HATE?`Much to one player's annoyaince - you imply that ${a.tag.name} will be expected in an upcoming encounter`:`You foreshadow ${a.tag.name} for an upcoming encounter`;break;case x.FORESHADOWING_RANDOM:t=n===o.LIKE?`The players like ${a.tag.name}...add it on a whim to an upcoming encounter`:n===o.HATE?`${a.tag.name} will feature in an upcoming encounter even though some players hate ${a.tag.name}`:`Ad-lib ${a.tag.name} into an upcoming encounter`;break;case x.RUMOR:t=this.campaignManager.getExpectedEncounterTags().includes(a.tag)?`You reinforce the importance of ${a.tag.name}.`:`You confirm the players' questions about ${a.tag.name}`;break;case x.PLAYERS:t=`The players have feelings about ${a.tag.name}`;break;case x.QUESTS:t=`A quest may be advanced bacause of ${a.tag.name}`;break;case x.ALL:t=`For no specific reason, the players discuss ${a.tag.name}`;break;case x.MAGIC_ITEM:t=`You award the players the ${a.tag.name} they have been looking for!`;break;case x.BACKSTORY:t=`The ${a.tag.name} is integral to a character's backstory!`;break;case x.PLOT:t=`${a.tag.name} will be important to the story`;break;default:t=""}return t+=this.chatManager.getThemePostFix(a),t}return e.character?(t=`Spend some time focusing on ${e.character.name}`,t):"treasure"===e.type?(t="award the players a bit of treasure...",t):"dmpoint"===e.type?(t="You have a great idea which will inform future decisions and make you an overall better dm",t):void 0}};class ys extends Sn.EventEmitter{constructor(){super(),this._state=aa.MAIN_MENU,this.lastTime=0,this.campaignManager=void 0,this.playerManager=void 0,this.sessionManager=void 0,this.dataManager=void 0,this.partyManager=void 0,this.uiManager=void 0,this.characterManager=void 0,this.tutorialManager=void 0,this.chatManager=void 0,this.combatManager=void 0,this.townManager=void 0,this.tagManager=void 0,this.playerManager=new ns(this),this.campaignManager=new $r(this),this.characterManager=new ds(this),this.sessionManager=new rs,this.dataManager=new cs(this),this.partyManager=new is(this),this.uiManager=new os(this),this.tutorialManager=new ms(this),this.chatManager=new ps(this),this.combatManager=new Cn(this),this.townManager=new fs(this),this.tagManager=new vs(this.campaignManager,this.playerManager,this.chatManager),this.init()}init(){this.state=aa.MAIN_MENU,this.playerManager.init(),this.characterManager.init(),this.startGameLoop()}initiateQuickStartSetup(){this.playerManager.initiateQuickStart(),this.characterManager.initiateQuickStart(),this.campaignManager.initiateQuickStart(),this.chatManager.startSessionEvent()}startGameLoop(){const e=t=>{const a=t-this.lastTime;this.lastTime=t,this.update(a),requestAnimationFrame(e)};requestAnimationFrame(e)}update(e){var t;null===(t=this.uiManager)||void 0===t||t.update(e)}get state(){return this._state}set state(e){switch(console.log("Changing state from",this._state,"to",e),this._state){case aa.PLAYER_RECRUITMENT:this.playerManager.acceptSelectedPlayers();break;case aa.MAIN_MENU:case aa.CHARACTER_CREATION:case aa.CAMPAIGN_SETUP:console.log("Changing state from ",this._state)}switch(e){case aa.MAIN_MENU:break;case aa.PLAYER_RECRUITMENT:this.tutorialManager.startTutorial("PLAYER_RECRUITMENT");break;case aa.CHARACTER_CREATION:this.tutorialManager.startTutorial("CHARACTER_CREATION");break;case aa.CAMPAIGN_SETUP:this.tutorialManager.startTutorial("CAMPAIGN_SETUP");break;case aa.SESSION_OVERVIEW:this.campaignManager.setSessionState(T.LOCATION_INTRO);break;case aa.SESSION:this.campaignManager.setSessionState(T.INTRO_EVENTS)}this._state=e,this.emit("stateChange")}advanceState(){var e;this.state=(null===(e=this.dataManager)||void 0===e?void 0:e.getStateProps().nextState)||aa.MAIN_MENU}getUiManager(){return this.uiManager}getDataManager(){return this.dataManager}getPlayerManager(){return this.playerManager}getCharacterManager(){return this.characterManager}getSessionManager(){return this.sessionManager}getPartyManager(){return this.partyManager}getTagManager(){return this.tagManager}getCombatManager(){return this.combatManager}getCampaignManager(){return this.campaignManager}getTutorialManager(){return this.tutorialManager}getChatManager(){return this.chatManager}getTownManager(){return this.townManager}}const bs=new ys,Es=bs.getDataManager(),Ss=bs.getCampaignManager(),Ns=bs.getSessionManager(),Ts=bs.getPartyManager(),xs=bs.getUiManager(),As=bs.getCharacterManager(),Cs=bs.getPlayerManager();r.createRoot(document.getElementById("root")).render((0,yt.jsx)(n.StrictMode,{children:(0,yt.jsx)(Gt,{manager:As,children:(0,yt.jsx)(Wt,{manager:Cs,children:(0,yt.jsx)(Kt,{manager:bs,children:(0,yt.jsx)(zt,{manager:Es,children:(0,yt.jsx)(Vt,{manager:Ss,children:(0,yt.jsx)(Yt,{manager:Ns,children:(0,yt.jsx)(Qt,{manager:Ts,children:(0,yt.jsx)(Xt,{manager:xs,children:(0,yt.jsx)(Qr,{})})})})})})})})})}))})();
//# sourceMappingURL=main.d515293d.js.map